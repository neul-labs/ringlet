import{d as S,a as $,u as A,o as N,y as j,k as R,c as a,b as e,l as x,g as i,f as d,t as l,F as y,r as g,w as f,j as p,h as V,i as o}from"./index-C1O0OhB3.js";import{_ as B}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-DF471Y56.js";import{_ as v}from"./StatusBadge.vue_vue_type_script_setup_true_lang-DO_oPMsR.js";const L={class:"flex items-center justify-between mb-6"},I={key:0,class:"flex justify-center py-12"},E={key:1,class:"space-y-6"},F={class:"bg-white dark:bg-gray-800 rounded-lg shadow"},M={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},U={class:"text-lg font-semibold text-gray-900 dark:text-white"},z={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},D={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},O={class:"flex items-center space-x-4"},T={class:"text-sm text-gray-500 dark:text-gray-400"},q={class:"flex items-center space-x-3"},G=["onClick"],H={class:"bg-white dark:bg-gray-800 rounded-lg shadow"},J={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},K={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"text-sm text-gray-500 dark:text-gray-400"},W={key:0},X={class:"flex items-center space-x-3"},Y=["onClick"],Z=["onClick"],tt={class:"bg-blue-50 dark:bg-blue-900/30 rounded-lg p-6"},et={key:0,class:"space-y-2"},st={class:"text-sm font-medium text-gray-900 dark:text-white mb-1"},at={class:"text-sm text-gray-600 dark:text-gray-300 block"},ot={key:1,class:"text-sm text-blue-700 dark:text-blue-300 italic"},dt=S({__name:"ProxyView",setup(rt){const n=$(),c=A(),_=R({});N(async()=>{await Promise.all([n.fetchStatus(),c.fetchProfiles()]);for(const r of c.profiles)_.value[r.alias]=await j.proxy.config(r.alias).catch(()=>null)});function h(r){var s;return((s=_.value[r])==null?void 0:s.enabled)??!1}async function w(r){try{await n.startProxy(r)}catch(s){alert(s.message)}}async function b(r){try{await n.stopProxy(r)}catch(s){alert(s.message)}}async function P(){if(confirm("Stop all running proxies?"))try{await n.stopAll()}catch(r){alert(r.message)}}function u(r){return n.instances.some(s=>s.alias===r)}function C(r){var s;return(s=n.getInstanceByAlias(r))==null?void 0:s.port}return(r,s)=>{const m=V("RouterLink");return o(),a("div",null,[e("div",L,[s[0]||(s[0]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Proxy Management",-1)),i(n).instances.length>0?(o(),a("button",{key:0,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",onClick:P}," Stop All ")):x("",!0)]),i(n).loading?(o(),a("div",I,[d(B,{size:"lg"})])):(o(),a("div",E,[e("div",F,[e("div",M,[e("h2",U," Running Proxies ("+l(i(n).instances.length)+") ",1)]),i(n).instances.length===0?(o(),a("div",z," No proxies currently running ")):(o(),a("ul",D,[(o(!0),a(y,null,g(i(n).instances,t=>(o(),a("li",{key:t.alias,class:"px-6 py-4 flex items-center justify-between"},[e("div",O,[e("div",null,[d(m,{to:`/profiles/${t.alias}`,class:"font-medium text-blue-600 hover:text-blue-700"},{default:f(()=>[p(l(t.alias),1)]),_:2},1032,["to"]),e("div",T," Port: "+l(t.port),1)])]),e("div",q,[d(v,{status:"running"}),e("button",{class:"px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded transition-colors",onClick:k=>b(t.alias)}," Stop ",8,G)])]))),128))]))]),e("div",H,[s[1]||(s[1]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Profiles ")],-1)),i(c).profiles.length===0?(o(),a("div",J," No profiles found ")):(o(),a("ul",K,[(o(!0),a(y,null,g(i(c).profiles,t=>(o(),a("li",{key:t.alias,class:"px-6 py-4 flex items-center justify-between"},[e("div",null,[d(m,{to:`/profiles/${t.alias}`,class:"font-medium text-blue-600 hover:text-blue-700"},{default:f(()=>[p(l(t.alias),1)]),_:2},1032,["to"]),e("div",Q,[p(l(t.agent_id)+" ",1),u(t.alias)?(o(),a("span",W," Â· Port "+l(C(t.alias)),1)):x("",!0)])]),e("div",X,[d(v,{status:h(t.alias)?u(t.alias)?"running":"stopped":"disabled"},null,8,["status"]),h(t.alias)&&!u(t.alias)?(o(),a("button",{key:0,class:"px-3 py-1.5 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors",onClick:k=>w(t.alias)}," Start ",8,Y)):u(t.alias)?(o(),a("button",{key:1,class:"px-3 py-1.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded transition-colors",onClick:k=>b(t.alias)}," Stop ",8,Z)):x("",!0)])]))),128))]))]),e("div",tt,[s[2]||(s[2]=e("h3",{class:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2"},"Using the Proxy",-1)),s[3]||(s[3]=e("p",{class:"text-blue-800 dark:text-blue-200 text-sm mb-4"}," Once a proxy is running, configure your AI agent to use it as an API endpoint: ",-1)),i(n).instances.length>0?(o(),a("div",et,[(o(!0),a(y,null,g(i(n).instances,t=>(o(),a("div",{key:t.alias,class:"bg-white dark:bg-gray-800 rounded p-3"},[e("p",st,l(t.alias),1),e("code",at," http://127.0.0.1:"+l(t.port)+"/v1 ",1)]))),128))])):(o(),a("p",ot," Start a proxy to see the endpoint URL "))])]))])}}});export{dt as default};
