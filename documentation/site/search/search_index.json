{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Clown","text":"<p>CLI orchestrator for coding agents - manage multiple AI coding assistants with isolated profiles, seamless provider switching, and unified usage tracking.</p>"},{"location":"#what-is-clown","title":"What is Clown?","text":"<p>Clown is a command-line tool that helps you manage multiple AI coding agents (like Claude Code, Codex CLI, Grok CLI) with different API providers and configurations. It provides:</p> <ul> <li>Profile Isolation - Each profile gets its own isolated environment, preventing configuration conflicts</li> <li>Provider Abstraction - Switch between Anthropic, MiniMax, OpenAI, and other providers without reconfiguring your agent</li> <li>Usage Tracking - Monitor token usage and costs across all your profiles in one place</li> <li>Intelligent Routing - Route requests to different providers based on cost, latency, or custom rules</li> </ul>"},{"location":"#quick-install","title":"Quick Install","text":"Linux/macOSFrom SourceLocal Build <pre><code>curl -fsSL https://raw.githubusercontent.com/neul-labs/ccswitch/main/install.sh | bash\n</code></pre> <pre><code>cargo install --git https://github.com/neul-labs/ccswitch ringlet\n</code></pre> <pre><code>git clone https://github.com/neul-labs/ccswitch\ncd ccswitch\n./install.sh --local\n</code></pre>"},{"location":"#features","title":"Features","text":"<ul> <li> <p>:material-account-switch:{ .lg .middle } Profile Management</p> <p>Create isolated profiles that bind agents to providers. Switch between configurations instantly.</p> <p>:octicons-arrow-right-24: Learn more</p> </li> <li> <p>:material-api:{ .lg .middle } Multi-Provider Support</p> <p>Use Anthropic, MiniMax, OpenAI, OpenRouter, or add custom providers. Each agent works with compatible APIs.</p> <p>:octicons-arrow-right-24: Providers</p> </li> <li> <p>:material-chart-line:{ .lg .middle } Usage Tracking</p> <p>Track tokens, costs, and sessions across all profiles. Import existing Claude data and export for analysis.</p> <p>:octicons-arrow-right-24: Usage guide</p> </li> <li> <p>:material-router:{ .lg .middle } Intelligent Routing</p> <p>Route requests based on token count, tool usage, or custom rules. Optimize for cost or performance.</p> <p>:octicons-arrow-right-24: Proxy guide</p> </li> <li> <p>:material-hook:{ .lg .middle } Event Hooks</p> <p>Execute commands or webhooks on tool usage, notifications, or agent events. Build custom workflows.</p> <p>:octicons-arrow-right-24: Hooks guide</p> </li> <li> <p>:material-script:{ .lg .middle } Extensible Scripting</p> <p>Customize agent configuration with Rhai scripts. Add new agents without recompiling.</p> <p>:octicons-arrow-right-24: Scripting guide</p> </li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Create your first profile in under a minute:</p> <pre><code># List available agents\nringlet agents list\n\n# Create a profile binding Claude Code to Anthropic\nringlet profiles create claude my-claude --provider anthropic\n\n# Run your profile\nringlet profiles run my-claude\n\n# Check your usage\nringlet usage\n</code></pre> <p>:octicons-arrow-right-24: Full quick start guide</p>"},{"location":"#supported-agents","title":"Supported Agents","text":"Agent Description Provider Compatibility Claude Code Anthropic's agentic IDE Anthropic, MiniMax Codex CLI OpenAI-based coding agent OpenAI, OpenRouter Grok CLI xAI's coding assistant OpenAI-compatible OpenCode Open-source coding agent Multiple providers"},{"location":"#architecture-overview","title":"Architecture Overview","text":"<p>Clown uses a daemon-first architecture where a background service manages all state:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  CLI    \u2502\u2500\u2500\u2500\u2500\u25b6\u2502 ringletd  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  Agent       \u2502\n\u2502         \u2502     \u2502 daemon  \u2502     \u2502  (isolated)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502             \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510\n        \u2502 Profiles \u2502  \u2502  Usage   \u2502\n        \u2502  Store   \u2502  \u2502 Tracking \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>:octicons-arrow-right-24: Architecture details</p>"},{"location":"#getting-help","title":"Getting Help","text":"<ul> <li>Documentation: You're reading it!</li> <li>GitHub Issues: Report bugs or request features</li> <li>CLI Help: Run <code>ringlet --help</code> or <code>ringlet &lt;command&gt; --help</code></li> </ul>"},{"location":"#license","title":"License","text":"<p>Clown is open source software licensed under the MIT License.</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Thank you for your interest in contributing to Clown! This guide will help you get started.</p>"},{"location":"contributing/#ways-to-contribute","title":"Ways to Contribute","text":""},{"location":"contributing/#report-bugs","title":"Report Bugs","text":"<p>Before creating a bug report, check existing issues to avoid duplicates.</p> <p>Include in your report:</p> <ul> <li>Clear, descriptive title</li> <li>Steps to reproduce</li> <li>Expected vs actual behavior</li> <li>Environment details (OS, Rust version, Clown version)</li> <li>Relevant logs or error messages</li> </ul> <pre><code># Get version info\nringlet --version\n\n# Get debug logs\nringlet --log-level debug &lt;command&gt;\n</code></pre>"},{"location":"contributing/#suggest-features","title":"Suggest Features","text":"<p>Feature suggestions are welcome! Open an issue with:</p> <ul> <li>Clear description of the feature</li> <li>Problem it solves or use case</li> <li>Implementation ideas (optional)</li> </ul>"},{"location":"contributing/#submit-pull-requests","title":"Submit Pull Requests","text":"<ol> <li>Fork and clone the repository</li> <li>Create a branch from <code>main</code></li> <li>Make your changes</li> <li>Test thoroughly</li> <li>Submit a pull request</li> </ol>"},{"location":"contributing/#development-setup","title":"Development Setup","text":""},{"location":"contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Rust 1.75 or later</li> <li>Cargo</li> <li>Git</li> </ul>"},{"location":"contributing/#clone-and-build","title":"Clone and Build","text":"<pre><code>git clone https://github.com/neul-labs/ccswitch.git\ncd ccswitch\ncargo build\n</code></pre>"},{"location":"contributing/#run-tests","title":"Run Tests","text":"<pre><code># Run all tests\ncargo test\n\n# Run specific crate tests\ncargo test -p ringlet-core\n</code></pre>"},{"location":"contributing/#check-code-quality","title":"Check Code Quality","text":"<pre><code># Format code\ncargo fmt\n\n# Run linter\ncargo clippy\n\n# Check formatting\ncargo fmt --check\n</code></pre>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<pre><code>ringlet/\n\u251c\u2500\u2500 crates/\n\u2502   \u251c\u2500\u2500 ringlet/           # CLI binary\n\u2502   \u251c\u2500\u2500 ringletd/          # Background daemon\n\u2502   \u251c\u2500\u2500 ringlet-core/      # Core types and utilities\n\u2502   \u2514\u2500\u2500 ringlet-scripting/ # Rhai scripting engine\n\u251c\u2500\u2500 docs/                # Developer documentation\n\u251c\u2500\u2500 documentation/       # User-facing MkDocs site\n\u251c\u2500\u2500 manifests/           # Built-in agent/provider manifests\n\u2514\u2500\u2500 scripts/             # Built-in Rhai scripts\n</code></pre>"},{"location":"contributing/#key-crates","title":"Key Crates","text":"Crate Description <code>ringlet</code> CLI binary - thin client for daemon <code>ringletd</code> Background daemon - core orchestration <code>ringlet-core</code> Shared types, serialization, filesystem <code>ringlet-scripting</code> Rhai script engine and built-ins"},{"location":"contributing/#code-guidelines","title":"Code Guidelines","text":""},{"location":"contributing/#style","title":"Style","text":"<ul> <li>Follow Rust conventions and idioms</li> <li>Run <code>cargo fmt</code> before committing</li> <li>Ensure <code>cargo clippy</code> passes without warnings</li> <li>Write documentation for public APIs</li> </ul>"},{"location":"contributing/#commit-messages","title":"Commit Messages","text":"<p>Use clear, descriptive commit messages:</p> <pre><code>feat: add MiniMax provider support\n\n- Add provider manifest for MiniMax\n- Create Rhai script for configuration\n- Update documentation\n\nCloses #123\n</code></pre>"},{"location":"contributing/#documentation","title":"Documentation","text":"<ul> <li>Update docs for user-facing changes</li> <li>Add doc comments to public APIs</li> <li>Keep README current</li> </ul>"},{"location":"contributing/#adding-agents","title":"Adding Agents","text":"<p>To add support for a new AI coding agent:</p>"},{"location":"contributing/#1-create-agent-manifest","title":"1. Create Agent Manifest","text":"<p>Add to <code>manifests/agents/&lt;id&gt;.toml</code>:</p> <pre><code>id = \"my-agent\"\nname = \"My Agent\"\nbinary = \"my-agent\"\nversion_flag = \"--version\"\n\n[detect]\ncommands = [\"my-agent --version\"]\n\n[profile]\nstrategy = \"home-wrapper\"\nsource_home = \"~/.my-agent-profiles/{alias}\"\nscript = \"my-agent.rhai\"\n\n[models]\ndefault = \"default-model\"\nsupported = [\"default-model\", \"other-model\"]\n</code></pre>"},{"location":"contributing/#2-create-rhai-script","title":"2. Create Rhai Script","text":"<p>Add to <code>scripts/&lt;id&gt;.rhai</code>:</p> <pre><code>// Configuration generation for my-agent\n\nlet config = #{\n    \"api_key\": provider.api_key,\n    \"model\": provider.model,\n    \"base_url\": provider.endpoint\n};\n\n#{\n    \"files\": #{\n        \".my-agent/config.json\": json::encode(config)\n    },\n    \"env\": #{\n        \"MY_AGENT_API_KEY\": provider.api_key\n    }\n}\n</code></pre>"},{"location":"contributing/#3-test-detection","title":"3. Test Detection","text":"<pre><code>cargo build\n./target/debug/ringlet agents list\n</code></pre>"},{"location":"contributing/#adding-providers","title":"Adding Providers","text":"<p>To add a new API provider:</p>"},{"location":"contributing/#create-provider-manifest","title":"Create Provider Manifest","text":"<p>Add to <code>manifests/providers/&lt;id&gt;.toml</code>:</p> <pre><code>id = \"my-provider\"\nname = \"My Provider\"\ntype = \"anthropic-compatible\"  # or \"openai-compatible\"\n\n[endpoints]\ndefault = \"https://api.example.com/v1\"\n\n[auth]\nenv_key = \"MY_PROVIDER_API_KEY\"\nprompt = \"Enter your API key\"\n\n[models]\navailable = [\"model-a\", \"model-b\"]\ndefault = \"model-a\"\n</code></pre>"},{"location":"contributing/#testing","title":"Testing","text":""},{"location":"contributing/#unit-tests","title":"Unit Tests","text":"<p>Add tests in the same file:</p> <pre><code>#[cfg(test)]\nmod tests {\n    use super::*;\n\n    #[test]\n    fn test_feature() {\n        // Test implementation\n    }\n}\n</code></pre>"},{"location":"contributing/#integration-tests","title":"Integration Tests","text":"<p>Add to <code>tests/</code> directory:</p> <pre><code>#[test]\nfn test_profile_creation() {\n    // Integration test\n}\n</code></pre>"},{"location":"contributing/#manual-testing","title":"Manual Testing","text":"<pre><code># Build and test\ncargo build\n./target/debug/ringlet agents list\n./target/debug/ringlet providers list\n</code></pre>"},{"location":"contributing/#documentation_1","title":"Documentation","text":""},{"location":"contributing/#user-documentation","title":"User Documentation","text":"<p>User-facing docs use MkDocs in <code>documentation/</code>:</p> <pre><code>cd documentation\npip install -r requirements.txt\nmkdocs serve\n# Open http://127.0.0.1:8000\n</code></pre>"},{"location":"contributing/#developer-documentation","title":"Developer Documentation","text":"<p>Developer docs are in <code>docs/</code> as Markdown.</p>"},{"location":"contributing/#api-documentation","title":"API Documentation","text":"<p>Generate Rust docs:</p> <pre><code>cargo doc --open\n</code></pre>"},{"location":"contributing/#pull-request-process","title":"Pull Request Process","text":""},{"location":"contributing/#before-submitting","title":"Before Submitting","text":"<ul> <li>[ ] Code compiles without errors</li> <li>[ ] All tests pass</li> <li>[ ] <code>cargo clippy</code> has no warnings</li> <li>[ ] <code>cargo fmt --check</code> passes</li> <li>[ ] Documentation updated if needed</li> <li>[ ] Commit messages are clear</li> </ul>"},{"location":"contributing/#pr-description","title":"PR Description","text":"<p>Include:</p> <ul> <li>What the change does</li> <li>Why it's needed</li> <li>How to test it</li> <li>Related issues (e.g., \"Closes #123\")</li> </ul>"},{"location":"contributing/#review-process","title":"Review Process","text":"<ol> <li>Automated CI checks run</li> <li>Maintainer reviews code</li> <li>Address feedback if needed</li> <li>PR is merged when approved</li> </ol>"},{"location":"contributing/#getting-help","title":"Getting Help","text":"<ul> <li>Documentation: Read the docs first</li> <li>Issues: Open a GitHub issue</li> <li>Discussions: Use GitHub Discussions for questions</li> </ul>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the MIT License.</p>"},{"location":"advanced/architecture/","title":"System Architecture","text":"<p>Deep dive into how Clown is designed and how its components interact.</p>"},{"location":"advanced/architecture/#overview","title":"Overview","text":"<p>Clown is a Rust-native workspace built around a central background daemon (<code>ringletd</code>) that orchestrates CLI coding agents. The daemon owns profile persistence, agent discovery, telemetry collection, and real-time event distribution.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        User / UI                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         ringlet CLI                                \u2502\n\u2502    (Thin client - auto-starts daemon, forwards commands)        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502 async-nng / HTTP\n                               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        ringletd (Daemon)                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\n\u2502  \u2502   Profile    \u2502 \u2502    Agent     \u2502 \u2502   Registry   \u2502             \u2502\n\u2502  \u2502   Manager    \u2502 \u2502   Registry   \u2502 \u2502    Client    \u2502             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\n\u2502  \u2502    Proxy     \u2502 \u2502    Usage     \u2502 \u2502   Scripting  \u2502             \u2502\n\u2502  \u2502   Manager    \u2502 \u2502   Tracking   \u2502 \u2502    Engine    \u2502             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                               \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u25bc                    \u25bc                    \u25bc\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502 Claude Code \u2502      \u2502  Codex CLI  \u2502      \u2502  ultrallm   \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502   Proxy     \u2502\n                                             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"advanced/architecture/#design-goals","title":"Design Goals","text":"<ul> <li>Single entry point - Detect any supported CLI coding agent installed on the system</li> <li>Profile isolation - Each profile has completely separate configuration and state</li> <li>Multi-provider support - Run the same agent against different API backends</li> <li>Centralized orchestration - Daemon ensures single source of truth</li> <li>Usage tracking - Monitor token consumption and costs across all profiles</li> <li>Extensibility - Add new agents through manifests and scripts, not code</li> </ul>"},{"location":"advanced/architecture/#core-components","title":"Core Components","text":""},{"location":"advanced/architecture/#ringlet-cli","title":"ringlet CLI","text":"<p>A thin client that:</p> <ul> <li>Parses commands like <code>agents list</code>, <code>profiles create</code>, <code>profiles run</code></li> <li>Auto-starts the daemon if not running</li> <li>Forwards requests over <code>async-nng</code> sockets</li> <li>Renders responses as tables or JSON</li> </ul> <p>The CLI never performs stateful operations directly - everything goes through the daemon.</p>"},{"location":"advanced/architecture/#ringletd-daemon","title":"ringletd (Daemon)","text":"<p>The heart of Clown. Runs as a long-lived background process and owns:</p> Responsibility Description Profile persistence Stores and retrieves profile configurations Agent discovery Detects installed agents and their versions Telemetry collection Tracks usage, sessions, and costs Event distribution Publishes changes via WebSocket/pub-sub Proxy management Spawns and monitors ultrallm instances HTTP API Serves REST endpoints and Web UI <p>The daemon auto-starts on first CLI use and exits after idle timeout unless pinned with <code>--stay-alive</code>.</p>"},{"location":"advanced/architecture/#profile-manager","title":"Profile Manager","text":"<p>Handles profile lifecycle:</p> <ol> <li>Creation - Validates agent+provider pairing, prompts for API key, runs Rhai script</li> <li>Storage - Writes profile JSON to <code>~/.config/ringlet/profiles/</code></li> <li>Execution - Creates isolated environment, injects variables, spawns agent</li> <li>Tracking - Updates <code>last_used</code> timestamps</li> </ol>"},{"location":"advanced/architecture/#agent-registry","title":"Agent Registry","text":"<p>Loads and manages agent manifests:</p> <ul> <li>Built-in manifests compiled into binary</li> <li>User manifests from <code>~/.config/ringlet/agents.d/</code></li> <li>Registry manifests from GitHub</li> </ul> <p>Detection probes run in parallel to capture versions and paths.</p>"},{"location":"advanced/architecture/#provider-registry","title":"Provider Registry","text":"<p>Manages API backend definitions:</p> <ul> <li>Built-in providers (Anthropic, MiniMax, OpenAI, OpenRouter)</li> <li>User providers from <code>~/.config/ringlet/providers.d/</code></li> </ul> <p>Providers define endpoints, authentication, and available models.</p>"},{"location":"advanced/architecture/#scripting-engine","title":"Scripting Engine","text":"<p>Embeds Rhai for configuration generation:</p> <ul> <li>Receives context (provider, profile, preferences)</li> <li>Outputs configuration files and environment variables</li> <li>Scripts resolved: user override \u2192 registry \u2192 built-in</li> </ul>"},{"location":"advanced/architecture/#registry-client","title":"Registry Client","text":"<p>Synchronizes GitHub-hosted metadata:</p> <ul> <li>Downloads manifests, templates, and model catalog</li> <li>Verifies checksums/signatures</li> <li>Caches under <code>~/.config/ringlet/registry/</code></li> <li>Downloads LiteLLM pricing for cost calculation</li> </ul>"},{"location":"advanced/architecture/#proxy-manager","title":"Proxy Manager","text":"<p>Manages ultrallm proxy instances:</p> <ul> <li>Spawns processes on dedicated ports (8080-8180 range)</li> <li>Generates routing configuration from profile rules</li> <li>Monitors health and handles graceful shutdown</li> <li>Auto-starts proxies when profiles with proxy enabled run</li> </ul>"},{"location":"advanced/architecture/#usage-tracking","title":"Usage Tracking","text":"<p>Collects and aggregates token usage:</p> <ul> <li>Per-session records in <code>sessions.jsonl</code></li> <li>Rolled-up stats in <code>aggregates.json</code></li> <li>Cost calculation using LiteLLM pricing</li> <li>Queryable via CLI, HTTP API, and Web UI</li> </ul>"},{"location":"advanced/architecture/#communication","title":"Communication","text":""},{"location":"advanced/architecture/#cli-daemon-transport","title":"CLI \u2194 Daemon Transport","text":"<p>The CLI and daemon communicate through <code>async-nng</code>:</p> <pre><code>CLI                                      Daemon\n \u2502                                         \u2502\n \u2502  \u2500\u2500\u2500\u2500 RegistrySyncRequest \u2500\u2500\u2500\u2500\u2500\u2500\u25ba       \u2502\n \u2502                                         \u2502\n \u2502  \u25c4\u2500\u2500\u2500\u2500 RegistrySyncResponse \u2500\u2500\u2500\u2500        \u2502\n \u2502                                         \u2502\n</code></pre> <ul> <li>Request/Reply: Commands serialized via <code>serde_json</code>, sent over IPC</li> <li>Pub/Sub: Change notifications for watch modes and UI clients</li> <li>Endpoint: <code>/tmp/ringletd.sock</code> (Unix) or <code>%LOCALAPPDATA%/ringlet/ringletd.ipc</code> (Windows)</li> </ul>"},{"location":"advanced/architecture/#http-api","title":"HTTP API","text":"<p>For UI integrations that can't speak NNG:</p> <ul> <li>REST endpoints at <code>http://127.0.0.1:8765</code></li> <li>WebSocket at <code>ws://127.0.0.1:8765/ws</code></li> <li>Serves embedded Web UI</li> </ul>"},{"location":"advanced/architecture/#profile-isolation","title":"Profile Isolation","text":""},{"location":"advanced/architecture/#home-wrapper-strategy","title":"Home Wrapper Strategy","text":"<p>When a profile runs, Clown creates an isolated environment:</p> <pre><code>Real HOME: /home/user\nProfile HOME: /home/user/.claude-profiles/my-project\n\nEnvironment:\n  HOME=/home/user/.claude-profiles/my-project\n  ANTHROPIC_BASE_URL=https://api.anthropic.com\n  ANTHROPIC_AUTH_TOKEN=sk-...\n</code></pre> <p>The agent reads configuration from the profile HOME, ensuring:</p> <ul> <li>Configuration files are isolated</li> <li>Conversation history is separate</li> <li>Settings don't leak between profiles</li> </ul>"},{"location":"advanced/architecture/#what-gets-isolated","title":"What Gets Isolated","text":"Isolated Not Isolated Agent config files System binaries API credentials Shell configuration Conversation history Network access Agent settings File system access"},{"location":"advanced/architecture/#data-flow","title":"Data Flow","text":""},{"location":"advanced/architecture/#profile-run-workflow","title":"Profile Run Workflow","text":"<pre><code>1. User: ringlet profiles run my-project\n\n2. CLI:\n   - Connects to daemon (or starts it)\n   - Sends ProfileRunRequest\n\n3. Daemon:\n   - Loads profile configuration\n   - Retrieves API key from keychain\n   - Creates/validates profile home\n   - If proxy enabled, starts ultrallm\n   - Spawns agent process with:\n     - HOME set to profile home\n     - Environment variables injected\n     - CLI arguments forwarded\n\n4. Agent runs with isolated configuration\n\n5. Daemon tracks:\n   - Session start/end times\n   - Token usage (from agent files)\n   - Runtime duration\n</code></pre>"},{"location":"advanced/architecture/#registry-sync-workflow","title":"Registry Sync Workflow","text":"<pre><code>1. CLI sends RegistrySyncRequest to daemon\n\n2. Daemon:\n   - Acquires per-channel lock\n   - Checks registry.lock for cached data\n   - If force or cache stale:\n     - Downloads registry.json\n     - Verifies checksums\n     - Fetches missing artifacts\n     - Stages under commits/&lt;sha&gt;/\n   - Updates registry.lock\n   - Publishes RegistryUpdated event\n\n3. CLI receives response with:\n   - Resolved commit\n   - Channel\n   - Downloaded artifact count\n   - Cache/network indicator\n</code></pre>"},{"location":"advanced/architecture/#persistence-layout","title":"Persistence Layout","text":"<pre><code>~/.config/ringlet/\n\u251c\u2500\u2500 config.toml               # User preferences\n\u251c\u2500\u2500 daemon-endpoint           # Active daemon endpoint\n\u251c\u2500\u2500 agents.d/                 # Custom agent manifests\n\u251c\u2500\u2500 providers.d/              # Custom provider manifests\n\u251c\u2500\u2500 scripts/                  # Custom Rhai scripts\n\u251c\u2500\u2500 profiles/                 # Profile definitions\n\u2502   \u2514\u2500\u2500 my-project.json\n\u251c\u2500\u2500 registry/                 # Cached registry data\n\u2502   \u251c\u2500\u2500 current -&gt; commits/f4a12c3\n\u2502   \u251c\u2500\u2500 registry.lock\n\u2502   \u251c\u2500\u2500 litellm-pricing.json\n\u2502   \u2514\u2500\u2500 commits/\n\u2502       \u2514\u2500\u2500 f4a12c3/\n\u251c\u2500\u2500 cache/\n\u2502   \u2514\u2500\u2500 agent-detections.json\n\u251c\u2500\u2500 telemetry/\n\u2502   \u251c\u2500\u2500 sessions.jsonl\n\u2502   \u2514\u2500\u2500 aggregates.json\n\u2514\u2500\u2500 logs/\n    \u2514\u2500\u2500 ringletd.log\n</code></pre>"},{"location":"advanced/architecture/#cross-platform-support","title":"Cross-Platform Support","text":"Platform Config Path IPC Endpoint macOS <code>~/.config/ringlet/</code> <code>/tmp/ringletd.sock</code> Linux <code>~/.config/ringlet/</code> or XDG <code>/tmp/ringletd.sock</code> Windows <code>%APPDATA%\\ringlet\\</code> <code>%LOCALAPPDATA%\\ringlet\\ringletd.ipc</code> <p>Clown uses the <code>dirs</code> crate to resolve paths and keeps launcher scripts optional.</p>"},{"location":"advanced/architecture/#future-directions","title":"Future Directions","text":"<ul> <li>UI Layer - Desktop/web frontend connecting to daemon</li> <li>Delta syncs - Download only changed registry entries</li> <li>Prometheus/OpenTelemetry - Enterprise observability endpoints</li> <li>Plugin system - User-defined hooks and extensions</li> </ul>"},{"location":"advanced/registry/","title":"Registry Management","text":"<p>Clown distributes agent manifests, profile templates, and model catalogs through a GitHub-hosted registry. This guide covers how to work with the registry system.</p>"},{"location":"advanced/registry/#overview","title":"Overview","text":"<p>The registry provides:</p> <ul> <li>Agent manifests - How to detect and configure each agent</li> <li>Provider definitions - API backends and their endpoints</li> <li>Rhai scripts - Configuration generation logic</li> <li>Profile templates - Pre-configured setups</li> <li>Model catalog - Available models with metadata</li> </ul>"},{"location":"advanced/registry/#benefits","title":"Benefits","text":"<ul> <li>Single source of truth - Consistent metadata across all installations</li> <li>Open and reviewable - Changes vetted through pull requests</li> <li>Extensible - Support multiple channels and private forks</li> <li>Offline friendly - Local cache keeps CLI working without network</li> </ul>"},{"location":"advanced/registry/#repository-layout","title":"Repository Layout","text":"<pre><code>registry/\n\u251c\u2500\u2500 registry.json               # Versioned index with channels\n\u251c\u2500\u2500 agents/\n\u2502   \u2514\u2500\u2500 claude/\n\u2502       \u251c\u2500\u2500 manifest.toml       # Agent manifest\n\u2502       \u2514\u2500\u2500 hooks/              # Optional scripts/assets\n\u251c\u2500\u2500 providers/\n\u2502   \u2514\u2500\u2500 minimax.toml            # Provider definition\n\u251c\u2500\u2500 scripts/\n\u2502   \u251c\u2500\u2500 claude.rhai             # Config generation script\n\u2502   \u251c\u2500\u2500 codex.rhai\n\u2502   \u2514\u2500\u2500 grok.rhai\n\u251c\u2500\u2500 profiles/\n\u2502   \u2514\u2500\u2500 claude/\n\u2502       \u251c\u2500\u2500 minimax.toml        # Profile template\n\u2502       \u2514\u2500\u2500 anthropic.toml\n\u251c\u2500\u2500 models/\n\u2502   \u2514\u2500\u2500 catalog.json            # Model metadata\n\u2514\u2500\u2500 templates/\n    \u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"advanced/registry/#key-files","title":"Key Files","text":"File Description <code>registry.json</code> Index pointing to entries, includes checksums, maps to channels <code>agents/&lt;id&gt;/manifest.toml</code> Agent detection and configuration <code>providers/&lt;id&gt;.toml</code> API backend definitions <code>scripts/&lt;agent&gt;.rhai</code> Configuration generation scripts <code>profiles/&lt;agent&gt;/&lt;template&gt;.toml</code> Pre-configured profile templates <code>models/catalog.json</code> Model metadata for autocomplete"},{"location":"advanced/registry/#cli-commands","title":"CLI Commands","text":""},{"location":"advanced/registry/#sync-registry","title":"Sync Registry","text":"<p>Update local cache from GitHub:</p> <pre><code># Normal sync (uses cache if fresh)\nringlet registry sync\n\n# Force refresh\nringlet registry sync --force\n\n# Use cached data only\nringlet registry sync --offline\n</code></pre>"},{"location":"advanced/registry/#inspect-registry","title":"Inspect Registry","text":"<p>View current registry status:</p> <pre><code>ringlet registry inspect\n</code></pre> <p>Output:</p> <pre><code>Registry Status\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nChannel: stable\nCommit: f4a12c3\nLast Sync: 2026-01-08T10:00:00Z\nCached: Yes\nArtifacts: 25\n\nAgents: 5\nProviders: 4\nTemplates: 8\n</code></pre>"},{"location":"advanced/registry/#pin-version","title":"Pin Version","text":"<p>Lock to a specific version:</p> <pre><code># Pin to specific commit\nringlet registry pin f4a12c3\n\n# Pin to tag\nringlet registry pin v1.2.3\n</code></pre>"},{"location":"advanced/registry/#sync-workflow","title":"Sync Workflow","text":"<p>When you run <code>ringlet registry sync</code>:</p> <ol> <li>CLI sends <code>RegistrySyncRequest</code> to daemon</li> <li>Daemon acquires per-channel lock</li> <li>Checks <code>registry.lock</code> for cached data</li> <li>If online and not cached/forced:</li> <li>Downloads <code>registry.json</code></li> <li>Verifies checksums/signatures</li> <li>Fetches missing artifacts</li> <li>Stages under <code>commits/&lt;sha&gt;/</code></li> <li>Updates <code>registry.lock</code> with resolved state</li> <li>Publishes <code>RegistryUpdated</code> event</li> <li>Returns summary to CLI</li> </ol>"},{"location":"advanced/registry/#caching","title":"Caching","text":"<p>The registry is cached under:</p> <pre><code>~/.config/ringlet/registry/\n\u251c\u2500\u2500 current -&gt; commits/f4a12c3    # Symlink to active version\n\u251c\u2500\u2500 registry.lock                  # Lock file with state\n\u251c\u2500\u2500 litellm-pricing.json          # Model pricing data\n\u2514\u2500\u2500 commits/\n    \u2514\u2500\u2500 f4a12c3/\n        \u251c\u2500\u2500 registry.json\n        \u251c\u2500\u2500 agents/\n        \u251c\u2500\u2500 providers/\n        \u251c\u2500\u2500 scripts/\n        \u2514\u2500\u2500 models/\n</code></pre>"},{"location":"advanced/registry/#offline-mode","title":"Offline Mode","text":"<p>When GitHub is unreachable:</p> <pre><code>ringlet registry sync --offline\n</code></pre> <p>Returns the currently pinned commit with <code>offline=true</code> indicator.</p>"},{"location":"advanced/registry/#profile-templates","title":"Profile Templates","text":"<p>Templates define common setups for agent+provider combinations.</p>"},{"location":"advanced/registry/#using-templates","title":"Using Templates","text":"<pre><code># Create profile from template\nringlet profiles create claude work --template minimax\n\n# List available templates\nringlet registry templates\n</code></pre>"},{"location":"advanced/registry/#template-format","title":"Template Format","text":"<pre><code># profiles/claude/minimax.toml\nname = \"Claude + MiniMax\"\ndescription = \"Claude Code with MiniMax API\"\nagent = \"claude\"\nprovider = \"minimax\"\n\n[defaults]\nmodel = \"MiniMax-M2.1\"\nendpoint = \"international\"\n\n[prompts]\napi_key = \"Enter your MiniMax API key\"\n\n[env]\nAPI_TIMEOUT_MS = \"3000000\"\n</code></pre>"},{"location":"advanced/registry/#template-features","title":"Template Features","text":"<ul> <li>Required prompts for API keys and settings</li> <li>Default environment variables and CLI args</li> <li>Optional hooks or setup tasks</li> <li>Recommended MCP servers</li> </ul>"},{"location":"advanced/registry/#model-catalog","title":"Model Catalog","text":"<p>The model catalog provides metadata for autocomplete and validation.</p>"},{"location":"advanced/registry/#format","title":"Format","text":"<pre><code>{\n  \"id\": \"MiniMax-M2.1\",\n  \"provider\": \"minimax\",\n  \"base_urls\": {\n    \"international\": \"https://api.minimax.io/anthropic\",\n    \"china\": \"https://api.minimaxi.com/anthropic\"\n  },\n  \"capabilities\": [\"code\", \"image\"],\n  \"max_output_tokens\": 64000,\n  \"notes\": \"Use with Claude-compatible CLIs\"\n}\n</code></pre>"},{"location":"advanced/registry/#pricing-data","title":"Pricing Data","text":"<p>LiteLLM pricing is downloaded during sync:</p> <pre><code>ls ~/.config/ringlet/registry/litellm-pricing.json\n</code></pre> <p>Contains per-token costs for 200+ models.</p>"},{"location":"advanced/registry/#channels","title":"Channels","text":"<p>The registry supports multiple channels:</p> Channel Description <code>stable</code> Production-ready, thoroughly tested <code>beta</code> New features, may have bugs <code>nightly</code> Latest changes, unstable"},{"location":"advanced/registry/#switching-channels","title":"Switching Channels","text":"<pre><code># Use environment variable\nexport CLOWN_REGISTRY_CHANNEL=beta\nringlet registry sync\n</code></pre>"},{"location":"advanced/registry/#private-registries","title":"Private Registries","text":"<p>Enterprises can host their own registry:</p>"},{"location":"advanced/registry/#setup","title":"Setup","text":"<ol> <li>Fork the registry repository</li> <li>Host on GitHub Enterprise or artifact server</li> <li>Configure Clown to use your registry:</li> </ol> <pre><code>export CLOWN_REGISTRY_URL=https://github.example.com/org/ringlet-registry\nringlet registry sync\n</code></pre>"},{"location":"advanced/registry/#benefits_1","title":"Benefits","text":"<ul> <li>Control which agents/providers are available</li> <li>Add internal-only configurations</li> <li>Audit changes through your review process</li> <li>Air-gapped environments support</li> </ul>"},{"location":"advanced/registry/#contributing","title":"Contributing","text":""},{"location":"advanced/registry/#adding-a-new-agent","title":"Adding a New Agent","text":"<ol> <li>Fork the registry repository</li> <li>Create <code>agents/&lt;id&gt;/manifest.toml</code>:</li> </ol> <pre><code>id = \"my-agent\"\nname = \"My Agent\"\nbinary = \"my-agent\"\nversion_flag = \"--version\"\n\n[detect]\ncommands = [\"my-agent --version\"]\n\n[profile]\nstrategy = \"home-wrapper\"\nsource_home = \"~/.my-agent-profiles/{alias}\"\nscript = \"my-agent.rhai\"\n\n[models]\ndefault = \"default-model\"\nsupported = [\"default-model\"]\n</code></pre> <ol> <li>Create <code>scripts/my-agent.rhai</code></li> <li>Open a pull request</li> </ol>"},{"location":"advanced/registry/#adding-a-provider","title":"Adding a Provider","text":"<ol> <li>Create <code>providers/&lt;id&gt;.toml</code>:</li> </ol> <pre><code>id = \"my-provider\"\nname = \"My Provider\"\ntype = \"anthropic-compatible\"\n\n[endpoints]\ndefault = \"https://api.example.com/v1\"\n\n[auth]\nenv_key = \"MY_PROVIDER_API_KEY\"\nprompt = \"Enter your API key\"\n\n[models]\navailable = [\"model-a\", \"model-b\"]\ndefault = \"model-a\"\n</code></pre> <ol> <li>Open a pull request</li> </ol>"},{"location":"advanced/registry/#validation","title":"Validation","text":"<p>Before submitting:</p> <pre><code># Validate manifests (planned)\nringlet registry lint\n\n# Test locally\ncp -r my-changes ~/.config/ringlet/registry/\nringlet agents list\n</code></pre>"},{"location":"advanced/registry/#security","title":"Security","text":""},{"location":"advanced/registry/#verification","title":"Verification","text":"<ul> <li>Registry releases are tagged</li> <li>Checksums verified before caching</li> <li>Optional Sigstore attestations</li> <li>Only trusted artifacts served to clients</li> </ul>"},{"location":"advanced/registry/#best-practices","title":"Best Practices","text":"<ul> <li>Review changes before syncing in production</li> <li>Pin to specific versions in CI/CD</li> <li>Use private registries for sensitive configurations</li> <li>Audit registry access in enterprise environments</li> </ul>"},{"location":"advanced/registry/#troubleshooting","title":"Troubleshooting","text":""},{"location":"advanced/registry/#sync-fails","title":"Sync Fails","text":"<ol> <li>Check network connectivity</li> <li>Try <code>--offline</code> to use cache</li> <li>Check if GitHub is accessible</li> <li>Review daemon logs</li> </ol>"},{"location":"advanced/registry/#manifest-not-found","title":"Manifest Not Found","text":"<ol> <li>Verify manifest exists in registry</li> <li>Force sync: <code>ringlet registry sync --force</code></li> <li>Check if using correct channel</li> </ol>"},{"location":"advanced/registry/#custom-provider-not-detected","title":"Custom Provider Not Detected","text":"<ol> <li>Place in <code>~/.config/ringlet/providers.d/</code></li> <li>Verify TOML syntax</li> <li>Run <code>ringlet registry sync --force</code></li> <li>Check <code>ringlet providers list</code></li> </ol>"},{"location":"advanced/troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and their solutions when working with Clown.</p>"},{"location":"advanced/troubleshooting/#daemon-issues","title":"Daemon Issues","text":""},{"location":"advanced/troubleshooting/#daemon-not-starting","title":"Daemon Not Starting","text":"<p>Symptoms:</p> <ul> <li>Commands hang or timeout</li> <li>\"Connection refused\" errors</li> </ul> <p>Solutions:</p> <ol> <li> <p>Check if daemon is already running:    <pre><code>ringlet daemon status\n</code></pre></p> </li> <li> <p>Check for stale socket file:    <pre><code># Linux/macOS\nrm /tmp/ringletd.sock\n\n# Windows\ndel %LOCALAPPDATA%\\ringlet\\ringletd.ipc\n</code></pre></p> </li> <li> <p>Start daemon manually with debug logging:    <pre><code>ringlet --log-level debug daemon start\n</code></pre></p> </li> <li> <p>Check daemon logs:    <pre><code>cat ~/.config/ringlet/logs/ringletd.log\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#daemon-keeps-stopping","title":"Daemon Keeps Stopping","text":"<p>Cause: Daemon exits after idle timeout by default.</p> <p>Solution: Keep daemon running indefinitely:</p> <pre><code>ringlet daemon start --stay-alive\n</code></pre>"},{"location":"advanced/troubleshooting/#profile-issues","title":"Profile Issues","text":""},{"location":"advanced/troubleshooting/#profile-creation-fails","title":"Profile Creation Fails","text":"<p>Symptoms:</p> <ul> <li>\"Provider not compatible with agent\" error</li> <li>\"Failed to run Rhai script\" error</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify agent-provider compatibility:    <pre><code>ringlet agents inspect &lt;agent-id&gt;\n# Check \"Compatible Providers\"\n</code></pre></p> </li> <li> <p>Sync registry for latest scripts:    <pre><code>ringlet registry sync --force\n</code></pre></p> </li> <li> <p>Check if custom script has syntax errors:    <pre><code>ringlet scripts test &lt;agent&gt;.rhai --provider &lt;provider&gt;\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#profile-wont-run","title":"Profile Won't Run","text":"<p>Symptoms:</p> <ul> <li>Agent exits immediately</li> <li>\"Command not found\" error</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify agent is installed:    <pre><code>ringlet agents list\nwhich &lt;agent-binary&gt;\n</code></pre></p> </li> <li> <p>Check profile configuration:    <pre><code>ringlet profiles inspect &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Verify API key is valid:    <pre><code># Check if key is stored\nringlet profiles inspect &lt;alias&gt;\n# Should show \"API Key: ****...****\"\n</code></pre></p> </li> <li> <p>Run with debug logging:    <pre><code>ringlet --log-level debug profiles run &lt;alias&gt;\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#wrong-model-being-used","title":"Wrong Model Being Used","text":"<p>Cause: Model specified in profile doesn't match expected.</p> <p>Solutions:</p> <ol> <li> <p>Inspect profile:    <pre><code>ringlet profiles inspect &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Recreate with explicit model:    <pre><code>ringlet profiles delete &lt;alias&gt;\nringlet profiles create &lt;agent&gt; &lt;alias&gt; --provider &lt;provider&gt; --model &lt;model&gt;\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#agent-issues","title":"Agent Issues","text":""},{"location":"advanced/troubleshooting/#agent-not-detected","title":"Agent Not Detected","text":"<p>Symptoms:</p> <ul> <li>Agent shows as \"Not Installed\" in <code>agents list</code></li> <li>\"Agent not found\" error</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify binary is in PATH:    <pre><code>which claude\n# Should return path like /usr/local/bin/claude\n</code></pre></p> </li> <li> <p>Verify detection command works:    <pre><code>claude --version\n</code></pre></p> </li> <li> <p>Sync registry to update manifests:    <pre><code>ringlet registry sync --force\n</code></pre></p> </li> <li> <p>Check agent manifest detection config:    <pre><code>ringlet agents inspect &lt;agent-id&gt;\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#wrong-version-displayed","title":"Wrong Version Displayed","text":"<p>Cause: Detection cache is stale.</p> <p>Solutions:</p> <ol> <li> <p>Force registry sync:    <pre><code>ringlet registry sync --force\n</code></pre></p> </li> <li> <p>Clear detection cache:    <pre><code>rm ~/.config/ringlet/cache/agent-detections.json\nringlet agents list\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#provider-issues","title":"Provider Issues","text":""},{"location":"advanced/troubleshooting/#api-key-not-working","title":"API Key Not Working","text":"<p>Symptoms:</p> <ul> <li>Authentication errors from provider</li> <li>\"Invalid API key\" messages</li> </ul> <p>Solutions:</p> <ol> <li>Verify key is correct with provider directly</li> <li> <p>Recreate profile to re-enter key:    <pre><code>ringlet profiles delete &lt;alias&gt;\nringlet profiles create &lt;agent&gt; &lt;alias&gt; --provider &lt;provider&gt;\n</code></pre></p> </li> <li> <p>Check environment variables aren't overriding:    <pre><code>env | grep -i api_key\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#wrong-endpoint-used","title":"Wrong Endpoint Used","text":"<p>Symptoms:</p> <ul> <li>Connection errors</li> <li>Requests going to wrong region</li> </ul> <p>Solutions:</p> <ol> <li> <p>Specify endpoint explicitly:    <pre><code>ringlet profiles create &lt;agent&gt; &lt;alias&gt; --provider minimax --endpoint china\n</code></pre></p> </li> <li> <p>Check profile endpoint:    <pre><code>ringlet profiles inspect &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Verify provider endpoints:    <pre><code>ringlet providers inspect &lt;provider-id&gt;\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#proxy-issues","title":"Proxy Issues","text":""},{"location":"advanced/troubleshooting/#proxy-not-starting","title":"Proxy Not Starting","text":"<p>Symptoms:</p> <ul> <li>\"Failed to start proxy\" error</li> <li>Agent can't connect to local endpoint</li> </ul> <p>Solutions:</p> <ol> <li> <p>Check if ultrallm is installed:    <pre><code>which ultrallm\n# Or check ringlet's binary cache\nls ~/.cache/ringlet/binaries/ultrallm\n</code></pre></p> </li> <li> <p>Check if port is in use:    <pre><code>lsof -i :8081\n</code></pre></p> </li> <li> <p>View proxy logs:    <pre><code>ringlet proxy logs &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Start proxy manually to see errors:    <pre><code>ringlet proxy start &lt;alias&gt;\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#routing-not-working","title":"Routing Not Working","text":"<p>Symptoms:</p> <ul> <li>All requests go to same provider</li> <li>Rules seem to be ignored</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify routing rules:    <pre><code>ringlet proxy route list &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Check generated config:    <pre><code>cat ~/.claude-profiles/&lt;alias&gt;/.ultrallm/config.yaml\n</code></pre></p> </li> <li> <p>Ensure API keys are set for all target providers</p> </li> </ol>"},{"location":"advanced/troubleshooting/#connection-refused","title":"Connection Refused","text":"<p>Symptoms:</p> <ul> <li>Agent gets \"connection refused\" error</li> <li>Proxy appears to be running</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify proxy status:    <pre><code>ringlet proxy status &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Check port matches profile config:    <pre><code>ringlet profiles inspect &lt;alias&gt;\nringlet proxy config &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Test proxy health endpoint:    <pre><code>curl http://127.0.0.1:8081/health\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#usage-tracking-issues","title":"Usage Tracking Issues","text":""},{"location":"advanced/troubleshooting/#no-usage-data-showing","title":"No Usage Data Showing","text":"<p>Symptoms:</p> <ul> <li><code>ringlet usage</code> shows zeros</li> <li>\"No data for period\" message</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify daemon is running:    <pre><code>ringlet daemon status\n</code></pre></p> </li> <li> <p>Check if profiles have been used:    <pre><code>ringlet profiles list\n# Check \"Last Used\" column\n</code></pre></p> </li> <li> <p>Verify telemetry directory exists:    <pre><code>ls ~/.config/ringlet/telemetry/\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#costs-showing-as-null","title":"Costs Showing as Null","text":"<p>Cause: Cost calculation only works for \"self\" provider.</p> <p>Solutions:</p> <ol> <li> <p>Check provider type:    <pre><code>ringlet profiles inspect &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Verify pricing data is synced:    <pre><code>ls ~/.config/ringlet/registry/litellm-pricing.json\n</code></pre></p> </li> <li> <p>Sync registry:    <pre><code>ringlet registry sync\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#import-not-finding-data","title":"Import Not Finding Data","text":"<p>Symptoms:</p> <ul> <li>\"No data found\" when importing Claude data</li> <li>Import shows 0 records</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify Claude directory exists:    <pre><code>ls ~/.claude\n</code></pre></p> </li> <li> <p>Check for stats-cache.json:    <pre><code>ls ~/.claude/stats-cache.json\n</code></pre></p> </li> <li> <p>Specify path explicitly:    <pre><code>ringlet usage import-claude --claude-dir ~/.claude\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#registry-issues","title":"Registry Issues","text":""},{"location":"advanced/troubleshooting/#sync-fails","title":"Sync Fails","text":"<p>Symptoms:</p> <ul> <li>\"Network error\" during sync</li> <li>Timeout errors</li> </ul> <p>Solutions:</p> <ol> <li>Check internet connectivity</li> <li> <p>Use offline mode:    <pre><code>ringlet registry sync --offline\n</code></pre></p> </li> <li> <p>Check if GitHub is accessible:    <pre><code>curl https://github.com\n</code></pre></p> </li> <li> <p>Use environment variable to override URL:    <pre><code>export CLOWN_REGISTRY_URL=&lt;alternative-url&gt;\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#custom-manifest-not-loaded","title":"Custom Manifest Not Loaded","text":"<p>Symptoms:</p> <ul> <li>Custom agent/provider not appearing</li> <li>Changes not taking effect</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify file location:    <pre><code>ls ~/.config/ringlet/agents.d/\nls ~/.config/ringlet/providers.d/\n</code></pre></p> </li> <li> <p>Check TOML syntax:    <pre><code># Use a TOML validator\ncat ~/.config/ringlet/agents.d/my-agent.toml | python3 -c \"import sys, toml; toml.load(sys.stdin)\"\n</code></pre></p> </li> <li> <p>Force sync:    <pre><code>ringlet registry sync --force\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#hooks-issues","title":"Hooks Issues","text":""},{"location":"advanced/troubleshooting/#hook-not-firing","title":"Hook Not Firing","text":"<p>Symptoms:</p> <ul> <li>Command not executing</li> <li>No output from hook</li> </ul> <p>Solutions:</p> <ol> <li> <p>Verify event type is correct (case-sensitive):    <pre><code># Correct: PreToolUse, PostToolUse, Notification, Stop\n# Wrong: pretooluse, pre_tool_use\n</code></pre></p> </li> <li> <p>Check matcher pattern:    <pre><code>ringlet hooks list &lt;alias&gt;\n</code></pre></p> </li> <li> <p>Ensure agent supports hooks:    <pre><code>ringlet agents inspect &lt;agent-id&gt;\n# Check \"Supports Hooks: Yes\"\n</code></pre></p> </li> <li> <p>Enable debug logging:    <pre><code>ringlet --log-level debug profiles run &lt;alias&gt;\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#hook-command-errors","title":"Hook Command Errors","text":"<p>Symptoms:</p> <ul> <li>Hook runs but fails</li> <li>Partial output</li> </ul> <p>Solutions:</p> <ol> <li> <p>Test command manually:    <pre><code>echo '{\"type\":\"PreToolUse\",\"tool\":\"Bash\"}' | your-command\n</code></pre></p> </li> <li> <p>Check <code>$EVENT</code> variable quoting:    <pre><code># Good: echo '$EVENT'\n# Bad: echo $EVENT (unquoted)\n</code></pre></p> </li> <li> <p>Increase timeout if needed:    <pre><code>{\n  \"type\": \"command\",\n  \"command\": \"slow-command\",\n  \"timeout\": 30000\n}\n</code></pre></p> </li> </ol>"},{"location":"advanced/troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you're still stuck:</p> <ol> <li> <p>Check logs: <pre><code>cat ~/.config/ringlet/logs/ringletd.log\n</code></pre></p> </li> <li> <p>Enable debug mode: <pre><code>ringlet --log-level debug &lt;command&gt;\n</code></pre></p> </li> <li> <p>Report issues: https://github.com/neul-labs/ccswitch/issues</p> </li> <li> <p>Include in bug reports:</p> </li> <li>Clown version (<code>ringlet --version</code>)</li> <li>OS and version</li> <li>Agent and provider being used</li> <li>Relevant log output</li> <li>Steps to reproduce</li> </ol>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Welcome to Clown! This section will help you get up and running quickly.</p>"},{"location":"getting-started/#overview","title":"Overview","text":"<p>Clown helps you manage multiple AI coding agents with different configurations. Here's what you'll learn:</p> <ol> <li>Installation - Install Clown on your system</li> <li>Quick Start - Create and run your first profile</li> <li>Key Concepts - Understand how Clown works</li> </ol>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before installing Clown, ensure you have:</p> <ul> <li>An AI coding agent installed (Claude Code, Codex CLI, etc.)</li> <li>An API key from your provider (Anthropic, OpenAI, etc.)</li> <li>Linux or macOS (Windows support coming soon)</li> </ul>"},{"location":"getting-started/#5-minute-setup","title":"5-Minute Setup","text":"<p>If you want to dive right in:</p> <pre><code># 1. Install Clown\ncurl -fsSL https://raw.githubusercontent.com/neul-labs/ccswitch/main/install.sh | bash\n\n# 2. Create a profile\nringlet profiles create claude my-project --provider anthropic\n\n# 3. Run it\nringlet profiles run my-project\n</code></pre> <p>That's it! Your agent will start with its own isolated configuration.</p>"},{"location":"getting-started/#whats-next","title":"What's Next?","text":"<ul> <li> <p>:material-download:{ .lg .middle } Installation</p> <p>Detailed installation instructions for all platforms and methods.</p> <p>:octicons-arrow-right-24: Install Clown</p> </li> <li> <p>:material-rocket-launch:{ .lg .middle } Quick Start</p> <p>Step-by-step tutorial to create your first profile.</p> <p>:octicons-arrow-right-24: Quick Start</p> </li> <li> <p>:material-lightbulb:{ .lg .middle } Key Concepts</p> <p>Understand agents, providers, profiles, and how they work together.</p> <p>:octicons-arrow-right-24: Learn Concepts</p> </li> </ul>"},{"location":"getting-started/concepts/","title":"Key Concepts","text":"<p>Understanding how Clown works will help you get the most out of it.</p>"},{"location":"getting-started/concepts/#the-big-picture","title":"The Big Picture","text":"<p>Clown solves a common problem: managing multiple AI coding agents with different configurations. Instead of manually switching API keys and config files, Clown lets you:</p> <ol> <li>Define profiles that bind agents to providers</li> <li>Isolate configurations so profiles don't interfere</li> <li>Track usage across all your profiles</li> <li>Switch instantly between different setups</li> </ol>"},{"location":"getting-started/concepts/#core-concepts","title":"Core Concepts","text":""},{"location":"getting-started/concepts/#agents","title":"Agents","text":"<p>An agent is an AI coding assistant CLI tool like:</p> <ul> <li>Claude Code - Anthropic's agentic IDE</li> <li>Codex CLI - OpenAI's coding assistant</li> <li>Grok CLI - xAI's coding agent</li> <li>OpenCode - Open-source alternative</li> </ul> <p>Clown detects installed agents automatically and knows how to configure them.</p> <pre><code># See what agents are available\nringlet agents list\n</code></pre>"},{"location":"getting-started/concepts/#providers","title":"Providers","text":"<p>A provider is an API backend that serves the AI models:</p> Provider Type Example Models Anthropic Native Claude Sonnet, Claude Opus MiniMax Anthropic-compatible Claude via proxy OpenAI Native GPT-4o, o1 OpenRouter OpenAI-compatible Many models <p>Providers are separate from agents because:</p> <ul> <li>One agent can work with multiple providers</li> <li>You might use different providers for different projects</li> <li>Costs and limits vary by provider</li> </ul> <pre><code># See available providers\nringlet providers list\n</code></pre>"},{"location":"getting-started/concepts/#profiles","title":"Profiles","text":"<p>A profile binds an agent to a provider with specific configuration:</p> <pre><code>Profile = Agent + Provider + API Key + Settings\n</code></pre> <p>For example:</p> <ul> <li><code>work-claude</code> = Claude Code + MiniMax API + work API key</li> <li><code>personal-claude</code> = Claude Code + Anthropic + personal API key</li> <li><code>experiment</code> = Codex CLI + OpenRouter + test API key</li> </ul> <pre><code># Create a profile\nringlet profiles create claude my-profile --provider anthropic\n</code></pre>"},{"location":"getting-started/concepts/#how-isolation-works","title":"How Isolation Works","text":""},{"location":"getting-started/concepts/#the-home-wrapper-strategy","title":"The Home Wrapper Strategy","text":"<p>When you run a profile, Clown creates an isolated environment:</p> <pre><code>~/.claude-profiles/my-profile/\n\u251c\u2500\u2500 .claude/\n\u2502   \u251c\u2500\u2500 settings.json    # Profile-specific settings\n\u2502   \u2514\u2500\u2500 history/         # Conversation history\n\u2514\u2500\u2500 ...\n</code></pre> <p>The agent runs with <code>HOME</code> set to this directory, so:</p> <ul> <li>Configuration files are isolated</li> <li>History is separate per profile</li> <li>Settings don't leak between profiles</li> </ul>"},{"location":"getting-started/concepts/#what-gets-isolated","title":"What Gets Isolated","text":"Isolated Not Isolated Agent config files System binaries API keys Shell configuration Conversation history Other applications Custom settings Network access"},{"location":"getting-started/concepts/#the-daemon","title":"The Daemon","text":"<p>Clown uses a background daemon (<code>ringletd</code>) that:</p> <ul> <li>Manages profiles - Stores and retrieves profile data</li> <li>Tracks usage - Monitors token consumption and costs</li> <li>Runs proxies - Handles request routing when enabled</li> <li>Broadcasts events - Notifies about profile changes</li> </ul> <p>The daemon starts automatically when needed and stops after idle timeout.</p> <pre><code># Check daemon status\nringlet daemon status\n\n# Keep daemon running indefinitely\nringlet daemon start --stay-alive\n</code></pre>"},{"location":"getting-started/concepts/#why-a-daemon","title":"Why a Daemon?","text":"<ul> <li>Single source of truth - No config file conflicts</li> <li>Real-time tracking - Usage updates as you work</li> <li>Background services - Proxies run independently</li> <li>Web UI - Access stats via browser at <code>http://127.0.0.1:8765</code></li> </ul>"},{"location":"getting-started/concepts/#the-registry","title":"The Registry","text":"<p>Clown uses a GitHub-based registry to store:</p> <ul> <li>Agent manifests - How to configure each agent</li> <li>Provider definitions - API endpoints and auth</li> <li>Profile templates - Pre-configured setups</li> <li>Pricing data - Token costs for usage tracking</li> </ul> <p>The registry syncs automatically, but you can control it:</p> <pre><code># Force sync\nringlet registry sync --force\n\n# Check status\nringlet registry inspect\n\n# Pin to specific version\nringlet registry pin v1.2.3\n</code></pre>"},{"location":"getting-started/concepts/#data-flow","title":"Data Flow","text":"<p>Here's how a typical profile run works:</p> <pre><code>1. You run: ringlet profiles run my-profile\n\n2. CLI sends request to daemon (via IPC)\n\n3. Daemon:\n   - Loads profile configuration\n   - Creates isolated home directory\n   - Injects environment variables\n   - Starts the agent process\n\n4. Agent runs with:\n   - Isolated HOME\n   - API key in environment\n   - Custom configuration\n\n5. Daemon tracks:\n   - Session start/end\n   - Token usage (from agent files)\n   - Runtime duration\n</code></pre>"},{"location":"getting-started/concepts/#common-patterns","title":"Common Patterns","text":""},{"location":"getting-started/concepts/#one-profile-per-project","title":"One Profile Per Project","text":"<pre><code>ringlet profiles create claude project-a --provider anthropic\nringlet profiles create claude project-b --provider minimax\n</code></pre> <p>Each project gets isolated history and settings.</p>"},{"location":"getting-started/concepts/#different-providers-for-different-costs","title":"Different Providers for Different Costs","text":"<pre><code># Cheap provider for experiments\nringlet profiles create claude experiment --provider openrouter\n\n# Premium provider for production\nringlet profiles create claude production --provider anthropic\n</code></pre>"},{"location":"getting-started/concepts/#quick-switching-with-aliases","title":"Quick Switching with Aliases","text":"<pre><code># Install aliases for fast access\nringlet aliases install project-a\nringlet aliases install project-b\n\n# Now just run:\nproject-a   # Starts Claude with project-a profile\nproject-b   # Starts Claude with project-b profile\n</code></pre>"},{"location":"getting-started/concepts/#summary","title":"Summary","text":"Concept What It Is Example Agent AI coding CLI tool Claude Code, Codex Provider API backend Anthropic, MiniMax Profile Agent + Provider binding <code>work-claude</code> Daemon Background service <code>ringletd</code> Registry Configuration source GitHub repo"},{"location":"getting-started/concepts/#next-steps","title":"Next Steps","text":"<p>Now that you understand the concepts:</p> <ul> <li>:octicons-arrow-right-24: Learn about Profiles in depth</li> <li>:octicons-arrow-right-24: Configure Providers for your needs</li> <li>:octicons-arrow-right-24: Track Usage and costs</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>This guide covers all the ways to install Clown on your system.</p>"},{"location":"getting-started/installation/#quick-install-recommended","title":"Quick Install (Recommended)","text":"<p>The easiest way to install Clown is using our install script:</p> Linux/macOS <pre><code>curl -fsSL https://raw.githubusercontent.com/neul-labs/ccswitch/main/install.sh | bash\n</code></pre> <p>This will:</p> <ol> <li>Detect your platform (Linux/macOS, x64/arm64)</li> <li>Download the pre-built binary</li> <li>Install to <code>~/.local/bin</code></li> <li>Provide instructions to add to your PATH</li> </ol>"},{"location":"getting-started/installation/#installation-methods","title":"Installation Methods","text":""},{"location":"getting-started/installation/#pre-built-binaries","title":"Pre-built Binaries","text":"<p>Download the latest release directly:</p> Platform Architecture Download Linux x86_64 ringlet-linux-x64 Linux arm64 ringlet-linux-arm64 macOS x86_64 ringlet-darwin-x64 macOS Apple Silicon ringlet-darwin-arm64 <p>After downloading:</p> <pre><code># Extract\ntar -xzf ringlet-*.tar.gz\n\n# Move to PATH\nmv ringlet ringletd ~/.local/bin/\n\n# Make executable\nchmod +x ~/.local/bin/ringlet ~/.local/bin/ringletd\n</code></pre>"},{"location":"getting-started/installation/#from-source","title":"From Source","text":"<p>Build from source using Cargo:</p> <pre><code># Install from git\ncargo install --git https://github.com/neul-labs/ccswitch ringlet\n\n# Or clone and build\ngit clone https://github.com/neul-labs/ccswitch\ncd ccswitch\ncargo build --release\ncp target/release/ringlet target/release/ringletd ~/.local/bin/\n</code></pre> <p>Requirements</p> <p>Building from source requires:</p> <ul> <li>Rust 1.75 or later</li> <li>A C compiler (for native dependencies)</li> </ul>"},{"location":"getting-started/installation/#local-build","title":"Local Build","text":"<p>If you have the repository cloned, you can build and install directly:</p> <pre><code>cd /path/to/ccswitch\n./install.sh --local\n</code></pre> <p>This is useful for:</p> <ul> <li>Development and testing</li> <li>Offline installation</li> <li>When GitHub releases are unavailable</li> </ul>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>After installation, verify everything works:</p> <pre><code># Check version\nringlet --version\n\n# List available agents\nringlet agents list\n\n# Check daemon status\nringlet daemon status\n</code></pre> <p>Expected output:</p> <pre><code>ringlet 0.1.0\n</code></pre>"},{"location":"getting-started/installation/#path-configuration","title":"PATH Configuration","text":"<p>If <code>ringlet</code> is not found after installation, add it to your PATH:</p> BashZshFish <pre><code>echo 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> <pre><code>echo 'export PATH=\"$HOME/.local/bin:$PATH\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre> <pre><code>fish_add_path ~/.local/bin\n</code></pre>"},{"location":"getting-started/installation/#installing-agents","title":"Installing Agents","text":"<p>Clown works with these coding agents:</p>"},{"location":"getting-started/installation/#claude-code","title":"Claude Code","text":"<pre><code># Via npm\nnpm install -g @anthropic-ai/claude-code\n\n# Verify\nclaude --version\n</code></pre>"},{"location":"getting-started/installation/#codex-cli","title":"Codex CLI","text":"<pre><code># Via npm\nnpm install -g @openai/codex\n\n# Verify\ncodex --version\n</code></pre>"},{"location":"getting-started/installation/#grok-cli","title":"Grok CLI","text":"<pre><code># Follow installation from xAI\n# https://grok.x.ai/cli\n</code></pre> <p>Agent Detection</p> <p>Clown automatically detects installed agents. Run <code>ringlet agents list</code> to see what's available.</p>"},{"location":"getting-started/installation/#uninstalling","title":"Uninstalling","text":"<p>To remove Clown:</p> <pre><code># Stop the daemon\nringlet daemon stop\n\n# Remove binaries\nrm ~/.local/bin/ringlet ~/.local/bin/ringletd\n\n# Remove configuration (optional)\nrm -rf ~/.config/ringlet\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Now that Clown is installed:</p> <ol> <li>:octicons-arrow-right-24: Follow the Quick Start to create your first profile</li> <li>:octicons-arrow-right-24: Learn the Key Concepts to understand how Clown works</li> </ol>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Create and run your first ringlet profile in under 2 minutes.</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<p>Before starting, ensure you have:</p> <ul> <li>[x] ringlet installed (Installation guide)</li> <li>[x] An AI coding agent installed (e.g., Claude Code)</li> </ul>"},{"location":"getting-started/quickstart/#option-1-interactive-setup-recommended","title":"Option 1: Interactive Setup (Recommended)","text":"<p>The fastest way to get started is with the interactive wizard:</p> <pre><code>ringlet init\n</code></pre> <p>This will:</p> <ol> <li>Detect your installed agents</li> <li>Show available providers</li> <li>Guide you through creating your first profile</li> </ol> <p>Example session:</p> <pre><code>$ ringlet init\n\nWelcome to Ringlet!\nThis wizard will help you get started with managing coding agents.\n\nChecking daemon connection... connected.\n\nDetecting installed agents...\n\nInstalled agents:\n  [x] Claude Code (1.0.23)\n\nNot installed:\n  [ ] Grok CLI\n  [ ] Codex CLI\n\nAvailable providers:\n  - self: Agent's Own Auth\n  - anthropic: Anthropic API (requires API key)\n  - minimax: MiniMax API (requires API key)\n  - openrouter: OpenRouter (requires API key)\n\nWould you like to create your first profile? [Y/n] y\n\n--- Create Your First Profile ---\n\nSelect an agent: Claude Code (1.0.23)\nSelect a provider: self - Agent's Own Auth\nProfile alias: my-project\n\nProfile 'my-project' created successfully!\n\nRun it with: ringlet profiles run my-project\n\n==================================================\nSetup complete!\n\nNext steps:\n  ringlet profiles list        View your profiles\n  ringlet profiles run &lt;alias&gt; Run an agent session\n  ringlet --help               See all available commands\n</code></pre> <p>Using agent's built-in auth</p> <p>The <code>self</code> provider uses the agent's own authentication (e.g., Claude Code's built-in login). No API key needed - just sign in when the agent launches.</p>"},{"location":"getting-started/quickstart/#option-2-manual-setup","title":"Option 2: Manual Setup","text":"<p>If you prefer more control, create profiles manually:</p>"},{"location":"getting-started/quickstart/#step-1-discover-your-agents","title":"Step 1: Discover Your Agents","text":"<pre><code>ringlet agents list\n</code></pre> <pre><code>ID          Name         Installed   Version\nclaude      Claude Code  Yes         1.0.23\ncodex       Codex CLI    No          -\ngrok        Grok CLI     No          -\n</code></pre>"},{"location":"getting-started/quickstart/#step-2-list-available-providers","title":"Step 2: List Available Providers","text":"<pre><code>ringlet providers list\n</code></pre> <pre><code>ID          Name        Type                 Default Model\nself        Self        self                 -\nanthropic   Anthropic   anthropic            claude-sonnet-4-20250514\nminimax     MiniMax     anthropic-compatible MiniMax-M2.1\nopenrouter  OpenRouter  openai-compatible    anthropic/claude-3.5-sonnet\n</code></pre>"},{"location":"getting-started/quickstart/#step-3-create-your-profile","title":"Step 3: Create Your Profile","text":"<pre><code>ringlet profiles create claude my-project --provider anthropic\n</code></pre> <p>You'll be prompted for your API key:</p> <pre><code>Enter API key for Anthropic: ************************************\nProfile 'my-project' created successfully!\n</code></pre> <p>API Key Storage</p> <p>Your API key is stored securely in your system's keychain, not in plain text files.</p>"},{"location":"getting-started/quickstart/#run-your-profile","title":"Run Your Profile","text":"<p>Start your agent with the new profile:</p> <pre><code>ringlet profiles run my-project\n</code></pre> <p>Claude Code will launch with:</p> <ul> <li>Isolated configuration (won't affect other profiles)</li> <li>Your API key configured (if using a provider)</li> <li>Separate history and settings</li> </ul>"},{"location":"getting-started/quickstart/#step-5-create-a-quick-alias","title":"Step 5: Create a Quick Alias","text":"<p>For faster access, install a shell alias:</p> <pre><code>ringlet aliases install my-project\n</code></pre> <p>Now you can simply run:</p> <pre><code>my-project\n</code></pre>"},{"location":"getting-started/quickstart/#step-6-check-your-usage","title":"Step 6: Check Your Usage","text":"<p>After using your agent, check token usage:</p> <pre><code>ringlet usage\n</code></pre> <p>Example output:</p> <pre><code>Usage Summary (Today)\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTotal Tokens: 15,432\n  Input:      12,100\n  Output:      3,332\n\nEstimated Cost: $0.04\n\nBy Profile:\n  my-project    15,432 tokens    $0.04\n</code></pre>"},{"location":"getting-started/quickstart/#what-youve-learned","title":"What You've Learned","text":"<p>You've now:</p> <ul> <li>[x] Discovered available agents and providers</li> <li>[x] Created an isolated profile</li> <li>[x] Run your agent with the profile</li> <li>[x] Set up a quick alias</li> <li>[x] Checked your usage statistics</li> </ul>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li> <p>:material-account-multiple:{ .lg .middle } Create More Profiles</p> <p>Create profiles for different projects or providers.</p> <pre><code>ringlet profiles create claude work --provider minimax\nringlet profiles create claude personal --provider anthropic\n</code></pre> </li> <li> <p>:material-swap-horizontal:{ .lg .middle } Switch Profiles</p> <p>List and switch between profiles easily.</p> <pre><code>ringlet profiles list\nringlet profiles run work\n</code></pre> </li> <li> <p>:material-chart-bar:{ .lg .middle } Track Usage</p> <p>Monitor costs across profiles and time periods.</p> <pre><code>ringlet usage --period week\nringlet usage profiles\n</code></pre> </li> <li> <p>:material-book-open:{ .lg .middle } Learn More</p> <p>Explore the full documentation.</p> <p>:octicons-arrow-right-24: Key Concepts</p> </li> </ul>"},{"location":"getting-started/quickstart/#common-commands","title":"Common Commands","text":"Command Description <code>ringlet init</code> Interactive setup wizard <code>ringlet profiles list</code> List all profiles <code>ringlet profiles run &lt;alias&gt;</code> Run a profile <code>ringlet profiles run &lt;alias&gt; --remote</code> Run in remote mode (Web UI) <code>ringlet profiles inspect &lt;alias&gt;</code> View profile details <code>ringlet usage</code> Show today's usage <code>ringlet aliases install &lt;alias&gt;</code> Create shell alias <code>ringlet terminal list</code> List active terminal sessions <code>ringlet daemon status</code> Check daemon status"},{"location":"guides/agents/","title":"Working with Agents","text":"<p>Agents are the AI coding assistants that Clown manages. This guide covers how to discover, configure, and add new agents.</p>"},{"location":"guides/agents/#what-is-an-agent","title":"What is an Agent?","text":"<p>An agent is a CLI coding tool like:</p> <ul> <li>Claude Code - Anthropic's agentic IDE</li> <li>Codex CLI - OpenAI's coding assistant</li> <li>Grok CLI - xAI's coding agent</li> <li>Droid CLI - Factory.ai's engineering tool</li> <li>OpenCode - Open-source alternative</li> </ul> <p>Each agent has a manifest that tells Clown:</p> <ul> <li>How to detect if it's installed</li> <li>How to isolate profiles</li> <li>What configuration it needs</li> <li>Which providers it works with</li> </ul>"},{"location":"guides/agents/#discovering-agents","title":"Discovering Agents","text":""},{"location":"guides/agents/#list-available-agents","title":"List Available Agents","text":"<pre><code>ringlet agents list\n</code></pre> <p>Example output:</p> <pre><code>ID          Name          Installed   Version    Profiles\nclaude      Claude Code   Yes         1.0.0      3\ncodex       Codex CLI     Yes         0.5.0      1\ngrok        Grok CLI      No          -          0\ndroid       Droid CLI     Yes         2.1.0      0\nopencode    OpenCode      No          -          0\n</code></pre>"},{"location":"guides/agents/#inspect-an-agent","title":"Inspect an Agent","text":"<pre><code>ringlet agents inspect claude\n</code></pre> <p>Example output:</p> <pre><code>ID: claude\nName: Claude Code\nBinary: claude\nVersion: 1.0.0\nBinary Path: /usr/local/bin/claude\nProfile Strategy: home-wrapper\nProfile Home: ~/.claude-profiles/{alias}\nSupports Hooks: Yes\nDefault Model: claude-sonnet-4\nSupported Models:\n  - claude-sonnet-4\n  - claude-opus-4\nCompatible Providers:\n  - anthropic\n  - anthropic-compatible (minimax)\n</code></pre>"},{"location":"guides/agents/#agent-provider-compatibility","title":"Agent-Provider Compatibility","text":"<p>Not all agents work with all providers. Here's the compatibility matrix:</p> Agent anthropic anthropic-compatible openai openai-compatible Claude Code \u2705 \u2705 \u274c \u274c Droid CLI \u2705 \u2705 \u274c \u274c OpenCode \u2705 \u2705 \u274c \u274c Codex CLI \u274c \u274c \u2705 \u2705 Grok CLI \u274c \u274c \u2705 \u2705 <p>Provider Types</p> <ul> <li>anthropic - Native Anthropic API</li> <li>anthropic-compatible - APIs that mimic Anthropic (MiniMax)</li> <li>openai - Native OpenAI API</li> <li>openai-compatible - APIs that mimic OpenAI (OpenRouter)</li> </ul>"},{"location":"guides/agents/#supported-agents","title":"Supported Agents","text":""},{"location":"guides/agents/#claude-code","title":"Claude Code","text":"<p>Anthropic's official coding assistant.</p> <p>Installation:</p> <pre><code># macOS with Homebrew\nbrew install claude-code\n\n# Or follow https://docs.claude.com/en/docs/claude-code/setup\n</code></pre> <p>Compatible providers: Anthropic, MiniMax</p> <p>Profile isolation: Full HOME wrapper at <code>~/.claude-profiles/{alias}</code></p> <p>Features:</p> <ul> <li>Event hooks support (PreToolUse, PostToolUse, etc.)</li> <li>MCP server integration</li> <li>Conversation history isolation</li> </ul> <p>Create a profile:</p> <pre><code># With Anthropic\nringlet profiles create claude my-claude --provider anthropic\n\n# With MiniMax\nringlet profiles create claude my-minimax --provider minimax\n</code></pre>"},{"location":"guides/agents/#codex-cli","title":"Codex CLI","text":"<p>OpenAI's coding assistant.</p> <p>Installation:</p> <pre><code>npm install -g @openai/codex\n</code></pre> <p>Compatible providers: OpenAI, OpenRouter, MiniMax (OpenAI-compatible endpoint)</p> <p>Profile isolation: Full HOME wrapper at <code>~/.codex-profiles/{alias}</code></p> <p>Create a profile:</p> <pre><code># With OpenAI\nringlet profiles create codex my-codex --provider openai\n\n# With OpenRouter\nringlet profiles create codex my-router --provider openrouter\n</code></pre>"},{"location":"guides/agents/#grok-cli","title":"Grok CLI","text":"<p>xAI's coding assistant.</p> <p>Installation:</p> <pre><code>npm install -g @vibe-kit/grok-cli\n</code></pre> <p>Compatible providers: OpenAI-compatible providers</p> <p>Profile isolation: Full HOME wrapper at <code>~/.grok-profiles/{alias}</code></p> <p>Create a profile:</p> <pre><code>ringlet profiles create grok my-grok --provider openrouter\n</code></pre>"},{"location":"guides/agents/#droid-cli","title":"Droid CLI","text":"<p>Factory.ai's AI engineering tool.</p> <p>Installation:</p> <pre><code># macOS / Linux\ncurl -fsSL https://app.factory.ai/cli | sh\n\n# Windows\nirm https://app.factory.ai/cli/windows | iex\n</code></pre> <p>Compatible providers: Anthropic, MiniMax</p> <p>Profile isolation: Full HOME wrapper at <code>~/.droid-profiles/{alias}</code></p> <p>Create a profile:</p> <pre><code>ringlet profiles create droid my-droid --provider anthropic\n</code></pre>"},{"location":"guides/agents/#opencode","title":"OpenCode","text":"<p>Open-source coding agent.</p> <p>Installation:</p> <pre><code>curl -fsSL https://opencode.ai/install | bash\n# or\nnpm install -g opencode-ai\n</code></pre> <p>Compatible providers: Anthropic, MiniMax</p> <p>Profile isolation: Full HOME wrapper at <code>~/.opencode-profiles/{alias}</code></p> <p>Create a profile:</p> <pre><code>ringlet profiles create opencode my-opencode --provider anthropic\n</code></pre>"},{"location":"guides/agents/#how-agent-detection-works","title":"How Agent Detection Works","text":"<p>Clown detects agents using commands defined in their manifests:</p> <pre><code>[detect]\ncommands = [\"claude --version\"]\nfiles = [\"~/.claude/settings.json\"]\n</code></pre> <p>Detection runs when:</p> <ol> <li>You run <code>ringlet agents list</code></li> <li>You create a profile for an agent</li> <li>The daemon starts</li> </ol> <p>Agent Not Detected?</p> <p>If an agent isn't showing up:</p> <ol> <li>Ensure the binary is in your PATH</li> <li>Run <code>ringlet registry sync --force</code> to refresh manifests</li> <li>Verify with <code>which &lt;agent-binary&gt;</code></li> </ol>"},{"location":"guides/agents/#profile-isolation-strategy","title":"Profile Isolation Strategy","text":"<p>All agents use the home-wrapper strategy:</p> <pre><code>Original HOME: /home/user\nProfile HOME:  ~/.claude-profiles/my-project\n\nWhen profile runs:\n  HOME=/home/user/.claude-profiles/my-project\n  claude &lt;args&gt;\n</code></pre> <p>This ensures:</p> <ul> <li>Configuration files are isolated per profile</li> <li>Credentials are separate</li> <li>History doesn't leak between profiles</li> <li>Settings can differ per project</li> </ul>"},{"location":"guides/agents/#agent-manifest-structure","title":"Agent Manifest Structure","text":"<p>Agent manifests define how Clown works with each tool:</p> <pre><code>id = \"claude\"\nname = \"Claude Code\"\nbinary = \"claude\"\nversion_flag = \"--version\"\n\n[detect]\ncommands = [\"claude --version\"]\nfiles = [\"~/.claude/settings.json\"]\n\n[profile]\nstrategy = \"home-wrapper\"\nsource_home = \"~/.claude-profiles/{alias}\"\nscript = \"claude.rhai\"\n\n[models]\ndefault = \"claude-sonnet-4\"\nsupported = [\"claude-sonnet-4\", \"claude-opus-4\"]\n\n[hooks]\ncreate = []\ndelete = []\npre_run = []\npost_run = []\n\nsupports_hooks = true\n</code></pre> Field Purpose <code>id</code> Unique identifier <code>binary</code> Executable name <code>detect</code> How to find the installed agent <code>profile.strategy</code> Isolation method <code>profile.script</code> Rhai script for config generation <code>models</code> Supported model identifiers <code>hooks</code> Lifecycle hooks <code>supports_hooks</code> Whether event hooks work"},{"location":"guides/agents/#adding-a-new-agent","title":"Adding a New Agent","text":"<p>To add support for a new coding agent:</p>"},{"location":"guides/agents/#1-create-the-manifest","title":"1. Create the Manifest","text":"<p>Create <code>~/.config/ringlet/agents.d/my-agent.toml</code>:</p> <pre><code>id = \"my-agent\"\nname = \"My Coding Agent\"\nbinary = \"my-agent\"\nversion_flag = \"--version\"\n\n[detect]\ncommands = [\"my-agent --version\"]\n\n[profile]\nstrategy = \"home-wrapper\"\nsource_home = \"~/.my-agent-profiles/{alias}\"\nscript = \"my-agent.rhai\"\n\n[models]\ndefault = \"default-model\"\nsupported = [\"default-model\", \"advanced-model\"]\n</code></pre>"},{"location":"guides/agents/#2-create-the-configuration-script","title":"2. Create the Configuration Script","text":"<p>Create <code>~/.config/ringlet/scripts/my-agent.rhai</code>:</p> <pre><code>// Generate configuration for my-agent\n\nlet config = #{\n    api_key: provider.api_key,\n    model: profile.model,\n    base_url: provider.endpoint_url\n};\n\n// Output\n#{\n    files: #{\n        \".my-agent/config.json\": json::encode(config)\n    },\n    env: #{\n        \"MY_AGENT_API_KEY\": provider.api_key\n    }\n}\n</code></pre>"},{"location":"guides/agents/#3-test-detection","title":"3. Test Detection","text":"<pre><code>ringlet registry sync --force\nringlet agents list\n</code></pre>"},{"location":"guides/agents/#4-create-a-profile","title":"4. Create a Profile","text":"<pre><code>ringlet profiles create my-agent test --provider anthropic\nringlet profiles run test\n</code></pre>"},{"location":"guides/agents/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/agents/#agent-shows-as-not-installed","title":"Agent shows as \"Not Installed\"","text":"<ol> <li>Verify the binary is in PATH: <code>which claude</code></li> <li>Check if detection command works: <code>claude --version</code></li> <li>Sync registry: <code>ringlet registry sync --force</code></li> </ol>"},{"location":"guides/agents/#wrong-version-displayed","title":"Wrong version displayed","text":"<ol> <li>Run <code>ringlet registry sync --force</code></li> <li>Check manifest version_flag matches agent's actual flag</li> </ol>"},{"location":"guides/agents/#profile-creation-fails","title":"Profile creation fails","text":"<ol> <li>Verify agent-provider compatibility</li> <li>Check if Rhai script exists for the agent</li> <li>Look at daemon logs: <code>ringlet daemon status</code></li> </ol>"},{"location":"guides/hooks/","title":"Event Hooks","text":"<p>Hooks allow you to execute custom commands or webhooks in response to events during agent execution. This enables logging, auditing, notifications, and integration with external systems.</p>"},{"location":"guides/hooks/#overview","title":"Overview","text":"<p>Hooks are profile-level configurations that trigger actions when specific events occur during agent execution. Each profile can have its own set of hooks.</p>"},{"location":"guides/hooks/#supported-events","title":"Supported Events","text":"Event Description When it fires <code>PreToolUse</code> Before a tool is executed Just before Bash, Write, Edit, etc. <code>PostToolUse</code> After a tool completes After tool execution finishes <code>Notification</code> On agent notifications When agent sends a notification <code>Stop</code> When agent stops On normal or error termination <p>Agent Support</p> <p>The agent must support hooks (<code>supports_hooks: true</code> in manifest). Currently, Claude Code is the primary agent with hooks support.</p>"},{"location":"guides/hooks/#cli-commands","title":"CLI Commands","text":""},{"location":"guides/hooks/#add-a-hook","title":"Add a Hook","text":"<pre><code>ringlet hooks add &lt;alias&gt; &lt;event&gt; &lt;matcher&gt; &lt;command&gt;\n</code></pre> <p>Parameters:</p> Parameter Description <code>alias</code> Profile alias <code>event</code> Event type (PreToolUse, PostToolUse, Notification, Stop) <code>matcher</code> Tool pattern to match (e.g., \"Bash|Write\" or \"*\" for all) <code>command</code> Shell command to execute <p>Examples:</p> <pre><code># Log all Bash commands before execution\nringlet hooks add myprofile PreToolUse \"Bash\" \"echo 'Running: $EVENT' &gt;&gt; /tmp/ringlet.log\"\n\n# Log all tool usage after completion\nringlet hooks add myprofile PostToolUse \"*\" \"logger -t ringlet '$EVENT'\"\n\n# Send notification to webhook on stop\nringlet hooks add myprofile Stop \"*\" \"curl -X POST https://hooks.example.com/ringlet -d '$EVENT'\"\n\n# Match multiple tools\nringlet hooks add myprofile PreToolUse \"Bash|Write|Edit\" \"echo 'File operation: $EVENT'\"\n</code></pre>"},{"location":"guides/hooks/#list-hooks","title":"List Hooks","text":"<pre><code>ringlet hooks list &lt;alias&gt;\n</code></pre> <p>Example output:</p> <pre><code>Hooks for profile 'myprofile':\n\nPreToolUse:\n  [0] matcher: \"Bash\"\n      command: echo 'Running: $EVENT' &gt;&gt; /tmp/ringlet.log\n\nPostToolUse:\n  [0] matcher: \"*\"\n      command: logger -t ringlet '$EVENT'\n\nStop:\n  [0] matcher: \"*\"\n      command: curl -X POST https://hooks.example.com/ringlet -d '$EVENT'\n</code></pre>"},{"location":"guides/hooks/#remove-a-hook","title":"Remove a Hook","text":"<pre><code>ringlet hooks remove &lt;alias&gt; &lt;event&gt; &lt;index&gt;\n</code></pre> <p>Parameters:</p> <ul> <li><code>alias</code> - Profile alias</li> <li><code>event</code> - Event type</li> <li><code>index</code> - Rule index (0-based, as shown in <code>hooks list</code>)</li> </ul> <p>Example:</p> <pre><code># Remove the first PreToolUse hook\nringlet hooks remove myprofile PreToolUse 0\n</code></pre>"},{"location":"guides/hooks/#importexport-hooks","title":"Import/Export Hooks","text":"<pre><code># Import hooks from JSON file\nringlet hooks import &lt;alias&gt; &lt;file&gt;\n\n# Export hooks to JSON\nringlet hooks export &lt;alias&gt; &gt; hooks-backup.json\n\n# View current configuration\nringlet hooks export myprofile | jq .\n</code></pre>"},{"location":"guides/hooks/#configuration-format","title":"Configuration Format","text":"<p>Hooks are stored in JSON format:</p> <pre><code>{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Bash|Write\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"echo $EVENT &gt;&gt; /tmp/tool-log.txt\",\n          \"timeout\": 5000\n        }\n      ]\n    }\n  ],\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"logger -t ringlet 'Tool completed'\"\n        }\n      ]\n    }\n  ],\n  \"Notification\": [],\n  \"Stop\": [\n    {\n      \"matcher\": \"*\",\n      \"hooks\": [\n        {\n          \"type\": \"url\",\n          \"url\": \"https://hooks.example.com/agent-stopped\"\n        }\n      ]\n    }\n  ]\n}\n</code></pre>"},{"location":"guides/hooks/#hook-rule-structure","title":"Hook Rule Structure","text":"Field Type Description <code>matcher</code> string Tool pattern (pipe-separated names or \"*\") <code>hooks</code> array Actions to execute when matched"},{"location":"guides/hooks/#hook-action-types","title":"Hook Action Types","text":"<p>Command Action:</p> <pre><code>{\n  \"type\": \"command\",\n  \"command\": \"echo $EVENT\",\n  \"timeout\": 5000\n}\n</code></pre> Field Required Description <code>type</code> Yes Must be \"command\" <code>command</code> Yes Shell command to execute <code>timeout</code> No Timeout in milliseconds <p>URL Action (Webhook):</p> <pre><code>{\n  \"type\": \"url\",\n  \"url\": \"https://hooks.example.com/webhook\"\n}\n</code></pre> Field Required Description <code>type</code> Yes Must be \"url\" <code>url</code> Yes Webhook URL to POST to"},{"location":"guides/hooks/#event-data","title":"Event Data","text":"<p>The <code>$EVENT</code> variable in commands contains JSON data about the event:</p> <pre><code>{\n  \"type\": \"PreToolUse\",\n  \"tool\": \"Bash\",\n  \"timestamp\": \"2025-01-18T10:30:00Z\",\n  \"profile\": \"myprofile\",\n  \"details\": { ... }\n}\n</code></pre>"},{"location":"guides/hooks/#use-cases","title":"Use Cases","text":""},{"location":"guides/hooks/#audit-logging","title":"Audit Logging","text":"<p>Log all tool usage to a file:</p> <pre><code>ringlet hooks add work PostToolUse \"*\" \\\n  \"echo '[$(date -Iseconds)] $EVENT' &gt;&gt; ~/.ringlet/audit.log\"\n</code></pre>"},{"location":"guides/hooks/#slack-notifications","title":"Slack Notifications","text":"<p>Send notifications when agent stops:</p> <pre><code>ringlet hooks add work Stop \"*\" \\\n  \"curl -X POST -H 'Content-type: application/json' \\\n   --data '{\\\"text\\\":\\\"Agent stopped\\\"}' \\\n   $SLACK_WEBHOOK_URL\"\n</code></pre>"},{"location":"guides/hooks/#custom-validation","title":"Custom Validation","text":"<p>Block certain operations with pre-tool hooks:</p> <pre><code>ringlet hooks add work PreToolUse \"Bash\" \\\n  \"echo '$EVENT' | jq -e '.command | contains(\\\"rm -rf\\\") | not' || exit 1\"\n</code></pre>"},{"location":"guides/hooks/#auto-formatting","title":"Auto-Formatting","text":"<p>Run formatters after file edits:</p> <pre><code>ringlet hooks add work PostToolUse \"Edit|Write\" \\\n  \"prettier --write \\\"$CLAUDE_FILE_PATHS\\\" 2&gt;/dev/null || true\"\n</code></pre>"},{"location":"guides/hooks/#integration-with-monitoring","title":"Integration with Monitoring","text":"<p>Send metrics to monitoring systems:</p> <pre><code>ringlet hooks add work PostToolUse \"*\" \\\n  \"curl -X POST http://localhost:9091/metrics/job/ringlet \\\n   -d 'tool_execution_count{tool=\\\"'$(echo $EVENT | jq -r .tool)'\\\"} 1'\"\n</code></pre>"},{"location":"guides/hooks/#storage","title":"Storage","text":"<p>Hooks are stored in the profile's metadata:</p> <pre><code>~/.config/ringlet/profiles/{alias}.json\n</code></pre> <p>The <code>hooks_config</code> field in profile metadata contains the full hooks configuration.</p>"},{"location":"guides/hooks/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/hooks/#hook-not-firing","title":"Hook not firing","text":"<ol> <li>Verify the event type is correct (case-sensitive: <code>PreToolUse</code>, not <code>pretooluse</code>)</li> <li>Check the matcher pattern matches the tool name</li> <li>Ensure the agent supports hooks</li> </ol>"},{"location":"guides/hooks/#command-errors","title":"Command errors","text":"<ol> <li>Test the command manually in a shell</li> <li>Check the <code>$EVENT</code> variable is properly quoted</li> <li>Verify command timeout is sufficient</li> </ol>"},{"location":"guides/hooks/#viewing-hook-execution","title":"Viewing hook execution","text":"<p>Enable debug logging:</p> <pre><code>ringlet --log-level debug profiles run myprofile\n</code></pre>"},{"location":"guides/profiles/","title":"Profile Management","text":"<p>Profiles are the heart of Clown. Each profile binds an agent to a specific provider, model, and credentials with complete isolation.</p>"},{"location":"guides/profiles/#what-is-a-profile","title":"What is a Profile?","text":"<p>A profile contains:</p> <ul> <li>Agent binding - Which CLI tool to use (Claude Code, Codex, etc.)</li> <li>Provider binding - Which API backend (Anthropic, MiniMax, etc.)</li> <li>Credentials - API key stored securely in your system keychain</li> <li>Configuration - Model selection, arguments, hooks, and more</li> </ul> <p>When you run a profile, Clown creates an isolated environment where all configuration is separate from other profiles.</p>"},{"location":"guides/profiles/#profile-lifecycle","title":"Profile Lifecycle","text":""},{"location":"guides/profiles/#create","title":"Create","text":"<pre><code>ringlet profiles create &lt;agent-id&gt; &lt;alias&gt; --provider &lt;provider-id&gt; [options]\n</code></pre> <p>Options:</p> Flag Description <code>--provider &lt;id&gt;</code> API provider to use (required) <code>--endpoint &lt;id&gt;</code> Specific endpoint for multi-region providers <code>--model &lt;model&gt;</code> Override default model <code>--hooks &lt;list&gt;</code> Enable agent hooks (comma-separated) <code>--mcp &lt;list&gt;</code> Enable MCP servers (comma-separated) <code>--bare</code> Create minimal profile without defaults <code>--proxy</code> Enable request routing proxy <code>--template &lt;name&gt;</code> Use a registry template <p>Example:</p> <pre><code># Basic profile\nringlet profiles create claude my-project --provider anthropic\n\n# With specific model and endpoint\nringlet profiles create claude china-work --provider minimax --endpoint china --model MiniMax-M2.1\n\n# With hooks and MCP servers\nringlet profiles create claude dev-claude --provider anthropic --hooks auto_format --mcp filesystem,github\n\n# Using a template\nringlet profiles create claude quick --provider anthropic --template anthropic-sonnet\n</code></pre>"},{"location":"guides/profiles/#list","title":"List","text":"<pre><code>ringlet profiles list [--agent &lt;agent-id&gt;]\n</code></pre> <p>Example output:</p> <pre><code>Alias              Provider    Endpoint       Model            Last Used\nwork-anthropic     anthropic   default        claude-sonnet-4  2026-01-08T11:23:51Z\nwork-minimax       minimax     international  MiniMax-M2.1     2026-01-08T09:18:12Z\nhome-minimax       minimax     international  MiniMax-M2.1     2026-01-07T22:45:00Z\n</code></pre>"},{"location":"guides/profiles/#inspect","title":"Inspect","text":"<pre><code>ringlet profiles inspect &lt;alias&gt;\n</code></pre> <p>Shows profile configuration (secrets are redacted):</p> <pre><code>Alias: work-minimax\nAgent: claude\nProvider: minimax\nEndpoint: international\nModel: MiniMax-M2.1\nCreated: 2026-01-05T10:00:00Z\nLast Used: 2026-01-08T09:18:12Z\nProfile Home: ~/.claude-profiles/work-minimax\nAPI Key: ****...****\n</code></pre>"},{"location":"guides/profiles/#run","title":"Run","text":"<pre><code>ringlet profiles run &lt;alias&gt; [-- &lt;agent-args&gt;]\n</code></pre> <p>Launches the agent with the profile's isolated environment:</p> <pre><code># Basic run\nringlet profiles run my-project\n\n# With additional arguments\nringlet profiles run my-project -- /path/to/code --verbose\n</code></pre>"},{"location":"guides/profiles/#delete","title":"Delete","text":"<pre><code>ringlet profiles delete &lt;alias&gt;\n</code></pre> <p>Removes the profile and runs any cleanup hooks defined in the agent manifest.</p>"},{"location":"guides/profiles/#shell-integration","title":"Shell Integration","text":""},{"location":"guides/profiles/#export-environment","title":"Export Environment","text":"<p>For manual usage, export a profile's environment to your shell:</p> <pre><code>eval \"$(ringlet profiles env &lt;alias&gt;)\"\nclaude  # Now uses the profile's configuration\n</code></pre>"},{"location":"guides/profiles/#shell-aliases","title":"Shell Aliases","text":"<p>Install quick-access aliases:</p> <pre><code># Install alias\nringlet aliases install my-project\n\n# Now you can run:\nmy-project  # Equivalent to: ringlet profiles run my-project\n\n# Uninstall when done\nringlet aliases uninstall my-project\n</code></pre>"},{"location":"guides/profiles/#model-selection","title":"Model Selection","text":"<p>When creating a profile, the model is determined by (highest to lowest priority):</p> <ol> <li><code>--model</code> flag - Explicitly specified</li> <li>Provider default - From provider manifest</li> <li>Agent default - From agent manifest</li> </ol> <pre><code># Uses provider default (MiniMax-M2.1 for minimax)\nringlet profiles create claude work --provider minimax\n\n# Override with explicit model\nringlet profiles create claude work --provider minimax --model claude-opus-4\n</code></pre> <p>Changing Models Later</p> <p>To change a profile's model, delete and recreate it, or edit the JSON directly at <code>~/.config/ringlet/profiles/&lt;alias&gt;.json</code>.</p>"},{"location":"guides/profiles/#profile-isolation","title":"Profile Isolation","text":""},{"location":"guides/profiles/#how-it-works","title":"How It Works","text":"<p>Clown uses the home-wrapper strategy for isolation:</p> <pre><code>~/.claude-profiles/my-project/\n\u251c\u2500\u2500 .claude/\n\u2502   \u251c\u2500\u2500 settings.json    # Profile-specific settings\n\u2502   \u251c\u2500\u2500 hooks.json       # Hook configuration\n\u2502   \u2514\u2500\u2500 history/         # Conversation history\n\u2514\u2500\u2500 .config/\n    \u2514\u2500\u2500 ...              # Other agent configs\n</code></pre> <p>When running a profile:</p> <ol> <li>Clown sets <code>HOME</code> to the profile directory</li> <li>Agent reads/writes config relative to this new HOME</li> <li>Each profile has completely separate state</li> </ol>"},{"location":"guides/profiles/#what-gets-isolated","title":"What Gets Isolated","text":"Isolated Not Isolated Configuration files System binaries API credentials Shell configuration Conversation history Network access Agent settings File system access"},{"location":"guides/profiles/#advanced-features","title":"Advanced Features","text":""},{"location":"guides/profiles/#profile-hooks","title":"Profile Hooks","text":"<p>Profiles support event-driven hooks for tool usage and agent events:</p> <pre><code># Add a hook\nringlet hooks add my-project PreToolUse \"Bash|Write\" \"echo Tool: $EVENT\"\n\n# List hooks\nringlet hooks list my-project\n\n# Remove a hook\nringlet hooks remove my-project PreToolUse 0\n</code></pre> <p>See Hooks Guide for details.</p>"},{"location":"guides/profiles/#proxy-routing","title":"Proxy Routing","text":"<p>Enable intelligent request routing:</p> <pre><code># Create profile with proxy\nringlet profiles create claude smart-routing --provider anthropic --proxy\n\n# Configure routing\nringlet proxy route add smart-routing cheap-route \"tokens &lt; 1000\" \"minimax/MiniMax-M2.1\"\n</code></pre> <p>See Proxy Guide for details.</p>"},{"location":"guides/profiles/#mcp-servers","title":"MCP Servers","text":"<p>Enable Model Context Protocol servers:</p> <pre><code>ringlet profiles create claude dev --provider anthropic --mcp filesystem,github\n</code></pre>"},{"location":"guides/profiles/#profile-schema","title":"Profile Schema","text":"<p>Profiles are stored as JSON in <code>~/.config/ringlet/profiles/</code>:</p> <pre><code>{\n  \"alias\": \"my-project\",\n  \"agent_id\": \"claude\",\n  \"provider_id\": \"anthropic\",\n  \"endpoint_id\": \"default\",\n  \"model\": \"claude-sonnet-4\",\n  \"env\": {\n    \"ANTHROPIC_MODEL\": \"claude-sonnet-4\"\n  },\n  \"args\": [],\n  \"working_dir\": null,\n  \"metadata\": {\n    \"created_at\": \"2026-01-05T10:00:00Z\",\n    \"last_used\": \"2026-01-08T09:18:12Z\",\n    \"profile_home\": \"~/.claude-profiles/my-project\",\n    \"hooks_config\": {},\n    \"proxy_config\": null\n  }\n}\n</code></pre> <p>Secret Storage</p> <p>API keys are stored in your system's keychain (macOS Keychain, GNOME Keyring, etc.), not in the JSON file.</p>"},{"location":"guides/profiles/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Use descriptive aliases - <code>project-provider-purpose</code> format is readable    <pre><code>ringlet profiles create claude acme-minimax-dev --provider minimax\n</code></pre></p> </li> <li> <p>One profile per project - Keep settings isolated    <pre><code>ringlet profiles create claude project-a --provider anthropic\nringlet profiles create claude project-b --provider anthropic\n</code></pre></p> </li> <li> <p>Use aliases for quick access - Install shims for frequent profiles    <pre><code>ringlet aliases install project-a\n</code></pre></p> </li> <li> <p>Export for scripts - Use JSON output for automation    <pre><code>ringlet profiles list --json | jq '.[] | .alias'\n</code></pre></p> </li> </ol>"},{"location":"guides/profiles/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/profiles/#profile-wont-start","title":"Profile won't start","text":"<ol> <li>Check agent is detected: <code>ringlet agents list</code></li> <li>Verify credentials: <code>ringlet profiles inspect &lt;alias&gt;</code></li> <li>Check daemon status: <code>ringlet daemon status</code></li> </ol>"},{"location":"guides/profiles/#wrong-model-being-used","title":"Wrong model being used","text":"<ol> <li>Inspect the profile: <code>ringlet profiles inspect &lt;alias&gt;</code></li> <li>Verify model field matches expected</li> <li>Recreate with explicit <code>--model</code> flag if needed</li> </ol>"},{"location":"guides/profiles/#credentials-not-working","title":"Credentials not working","text":"<ol> <li>Try recreating the profile to re-enter credentials</li> <li>Check if the provider endpoint is reachable</li> <li>Verify API key is valid with the provider directly</li> </ol>"},{"location":"guides/providers/","title":"Provider Configuration","text":"<p>Providers define API backends that serve AI models. By separating providers from agents, you can run the same tool against different backends.</p>"},{"location":"guides/providers/#what-is-a-provider","title":"What is a Provider?","text":"<p>A provider specifies:</p> <ul> <li>API endpoint - Where to send requests</li> <li>Authentication - How to authenticate (API key)</li> <li>Models - What models are available</li> <li>Type - API compatibility (Anthropic vs OpenAI style)</li> </ul>"},{"location":"guides/providers/#built-in-providers","title":"Built-in Providers","text":"<p>Clown ships with these providers:</p> ID Name Type Endpoint <code>anthropic</code> Anthropic API anthropic <code>api.anthropic.com</code> <code>minimax</code> MiniMax anthropic-compatible <code>api.minimax.io</code> (intl), <code>api.minimaxi.com</code> (China) <code>openai</code> OpenAI API openai <code>api.openai.com</code> <code>openrouter</code> OpenRouter openai-compatible <code>openrouter.ai</code>"},{"location":"guides/providers/#cli-commands","title":"CLI Commands","text":""},{"location":"guides/providers/#list-providers","title":"List Providers","text":"<pre><code>ringlet providers list\n</code></pre> <p>Output:</p> <pre><code>ID          Name           Type                  Default Model\nanthropic   Anthropic API  anthropic             claude-sonnet-4\nminimax     MiniMax        anthropic-compatible  MiniMax-M2.1\nopenai      OpenAI API     openai                gpt-4o\nopenrouter  OpenRouter     openai-compatible     auto\n</code></pre>"},{"location":"guides/providers/#inspect-a-provider","title":"Inspect a Provider","text":"<pre><code>ringlet providers inspect minimax\n</code></pre> <p>Output:</p> <pre><code>ID: minimax\nName: MiniMax\nType: anthropic-compatible\nEndpoints:\n  international: https://api.minimax.io/anthropic (default)\n  china: https://api.minimaxi.com/anthropic\nAuth: MINIMAX_API_KEY\nModels: MiniMax-M2.1\n</code></pre>"},{"location":"guides/providers/#using-providers","title":"Using Providers","text":""},{"location":"guides/providers/#basic-usage","title":"Basic Usage","text":"<p>Specify a provider when creating a profile:</p> <pre><code>ringlet profiles create claude my-project --provider anthropic\n</code></pre>"},{"location":"guides/providers/#multi-region-providers","title":"Multi-Region Providers","text":"<p>Some providers offer multiple endpoints for different regions:</p> <pre><code># Use international endpoint (default)\nringlet profiles create claude intl-project --provider minimax\n\n# Use China endpoint\nringlet profiles create claude china-project --provider minimax --endpoint china\n</code></pre>"},{"location":"guides/providers/#same-credentials-different-profiles","title":"Same Credentials, Different Profiles","text":"<p>When creating multiple profiles with the same provider, Clown offers to reuse credentials:</p> <pre><code>$ ringlet profiles create claude project-a --provider minimax\nEnter MiniMax API key: ****\n\n$ ringlet profiles create claude project-b --provider minimax\n? Reuse existing MiniMax credentials? [project-a] Yes\n\u2714 Created profile using existing credentials\n</code></pre>"},{"location":"guides/providers/#provider-compatibility","title":"Provider Compatibility","text":""},{"location":"guides/providers/#type-matrix","title":"Type Matrix","text":"Type Description Example Providers <code>anthropic</code> Native Anthropic API Anthropic <code>anthropic-compatible</code> APIs mimicking Anthropic MiniMax <code>openai</code> Native OpenAI API OpenAI <code>openai-compatible</code> APIs mimicking OpenAI OpenRouter"},{"location":"guides/providers/#agent-compatibility","title":"Agent Compatibility","text":"Provider Type Compatible Agents anthropic Claude Code, Droid, OpenCode anthropic-compatible Claude Code, Droid, OpenCode openai Codex CLI, Grok CLI openai-compatible Codex CLI, Grok CLI"},{"location":"guides/providers/#adding-custom-providers","title":"Adding Custom Providers","text":""},{"location":"guides/providers/#create-a-provider-manifest","title":"Create a Provider Manifest","text":"<p>Create a TOML file in <code>~/.config/ringlet/providers.d/</code>:</p> <pre><code># ~/.config/ringlet/providers.d/my-gateway.toml\nid = \"my-gateway\"\nname = \"Internal API Gateway\"\ntype = \"anthropic-compatible\"\n\n[endpoints]\nproduction = \"https://api.internal.company.com/llm\"\nstaging = \"https://api-staging.internal.company.com/llm\"\ndefault = \"production\"\n\n[auth]\nenv_key = \"INTERNAL_API_KEY\"\nprompt = \"Enter your internal gateway API key\"\n\n[models]\navailable = [\"internal-claude-3\", \"internal-gpt-4\"]\ndefault = \"internal-claude-3\"\n</code></pre>"},{"location":"guides/providers/#use-your-custom-provider","title":"Use Your Custom Provider","text":"<pre><code># Sync to detect new provider\nringlet registry sync --force\n\n# Create a profile\nringlet profiles create claude internal --provider my-gateway\n</code></pre>"},{"location":"guides/providers/#provider-manifest-reference","title":"Provider Manifest Reference","text":"Field Description <code>id</code> Unique identifier (e.g., <code>minimax</code>) <code>name</code> Display name <code>type</code> API compatibility type <code>endpoints</code> Named endpoints with URLs <code>endpoints.default</code> Default endpoint name <code>auth.env_key</code> Environment variable for API key <code>auth.prompt</code> Message shown when prompting for key <code>models.available</code> List of available model IDs <code>models.default</code> Default model for new profiles <p>Example:</p> <pre><code>id = \"minimax\"\nname = \"MiniMax\"\ntype = \"anthropic-compatible\"\n\n[endpoints]\ninternational = \"https://api.minimax.io/anthropic\"\nchina = \"https://api.minimaxi.com/anthropic\"\ndefault = \"international\"\n\n[auth]\nenv_key = \"MINIMAX_API_KEY\"\nprompt = \"Enter your MiniMax API key\"\n\n[models]\navailable = [\"MiniMax-M2.1\"]\ndefault = \"MiniMax-M2.1\"\n</code></pre>"},{"location":"guides/providers/#common-configurations","title":"Common Configurations","text":""},{"location":"guides/providers/#anthropic-direct","title":"Anthropic Direct","text":"<pre><code>ringlet profiles create claude my-claude --provider anthropic\n</code></pre> <p>Uses: - Endpoint: <code>api.anthropic.com</code> - Key: <code>ANTHROPIC_API_KEY</code> - Models: Claude Sonnet, Claude Opus</p>"},{"location":"guides/providers/#minimax-international","title":"MiniMax (International)","text":"<pre><code>ringlet profiles create claude my-minimax --provider minimax\n</code></pre> <p>Uses: - Endpoint: <code>api.minimax.io/anthropic</code> - Key: <code>MINIMAX_API_KEY</code> - Models: MiniMax-M2.1</p>"},{"location":"guides/providers/#minimax-china","title":"MiniMax (China)","text":"<pre><code>ringlet profiles create claude china-minimax --provider minimax --endpoint china\n</code></pre> <p>Uses: - Endpoint: <code>api.minimaxi.com/anthropic</code> - Key: <code>MINIMAX_API_KEY</code> - Models: MiniMax-M2.1</p>"},{"location":"guides/providers/#openrouter","title":"OpenRouter","text":"<pre><code>ringlet profiles create codex my-codex --provider openrouter\n</code></pre> <p>Uses: - Endpoint: <code>openrouter.ai/api/v1</code> - Key: <code>OPENROUTER_API_KEY</code> - Models: Various (GPT-4, Claude, etc.)</p>"},{"location":"guides/providers/#how-providers-work-internally","title":"How Providers Work Internally","text":"<p>When you create a profile, Clown:</p> <ol> <li>Reads provider manifest - Gets endpoint, auth requirements, models</li> <li>Prompts for API key - Stores securely in system keychain</li> <li>Runs Rhai script - Generates agent-specific configuration</li> <li>Creates profile - Saves binding with all settings</li> </ol> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Agent     \u2502     \u2502  Provider   \u2502     \u2502   Rhai      \u2502\n\u2502  Manifest   \u2502  +  \u2502  Manifest   \u2502  \u2192  \u2502  Script     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                               \u2502\n                                               \u25bc\n                                        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                        \u2502   Profile   \u2502\n                                        \u2502  (JSON +    \u2502\n                                        \u2502   Keychain) \u2502\n                                        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/providers/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/providers/#provider-not-found","title":"Provider Not Found","text":"<ol> <li>Check if manifest exists: <code>ls ~/.config/ringlet/providers.d/</code></li> <li>Sync registry: <code>ringlet registry sync --force</code></li> <li>Verify TOML syntax is valid</li> </ol>"},{"location":"guides/providers/#authentication-errors","title":"Authentication Errors","text":"<ol> <li>Verify API key is correct</li> <li>Check if endpoint is reachable</li> <li>Ensure provider type matches agent requirements</li> </ol>"},{"location":"guides/providers/#wrong-endpoint-used","title":"Wrong Endpoint Used","text":"<ol> <li>Explicitly specify endpoint: <code>--endpoint china</code></li> <li>Check provider's default endpoint setting</li> <li>Inspect profile: <code>ringlet profiles inspect &lt;alias&gt;</code></li> </ol>"},{"location":"guides/providers/#model-not-available","title":"Model Not Available","text":"<ol> <li>Check provider's model list: <code>ringlet providers inspect &lt;id&gt;</code></li> <li>Verify model is supported by both provider and agent</li> <li>Use <code>--model</code> flag to override</li> </ol>"},{"location":"guides/proxy/","title":"Request Routing with Proxy","text":"<p>The proxy feature enables intelligent request routing from agents to multiple LLM providers. Each profile can have its own proxy instance with dedicated routing configuration.</p>"},{"location":"guides/proxy/#overview","title":"Overview","text":"<p>Clown integrates with ultrallm, a high-performance Rust-based LLM proxy that supports 25+ providers and multiple routing strategies.</p>"},{"location":"guides/proxy/#key-benefits","title":"Key Benefits","text":"<ul> <li>Cost Optimization: Route long-context requests to cheaper providers</li> <li>Provider Flexibility: Use different providers for different use cases</li> <li>Profile Isolation: Each profile has independent routing configuration</li> <li>Automatic Management: Proxy starts/stops automatically with profiles</li> </ul>"},{"location":"guides/proxy/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                          ringlet daemon                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 Profile: work   \u2502  \u2502 Profile: test   \u2502  \u2502 Profile: cheap  \u2502  \u2502\n\u2502  \u2502 Port: 8081      \u2502  \u2502 Port: 8082      \u2502  \u2502 Port: 8083      \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502                    \u2502                    \u2502\n            \u25bc                    \u25bc                    \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ultrallm :8081    \u2502 \u2502 ultrallm :8082    \u2502 \u2502 ultrallm :8083    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502                     \u2502                     \u2502\n          \u25bc                     \u25bc                     \u25bc\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502 Anthropic\u2502          \u2502  MiniMax \u2502          \u2502   Z.AI   \u2502\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Each profile's agent runs with <code>baseUrl</code> pointing to its local proxy instance.</p>"},{"location":"guides/proxy/#prerequisites","title":"Prerequisites","text":"<p>The ultrallm binary must be available. Clown looks for it in:</p> <ol> <li><code>~/.cache/ringlet/binaries/ultrallm</code></li> <li><code>~/.local/bin/ultrallm</code></li> <li>System PATH</li> </ol> <p>Installing ultrallm</p> <p>You can build ultrallm from source or download a release from the ultrallm repository.</p>"},{"location":"guides/proxy/#creating-profiles-with-proxy","title":"Creating Profiles with Proxy","text":"<p>Use the <code>--proxy</code> flag when creating a profile:</p> <pre><code>ringlet profiles create claude work --proxy -p anthropic\n</code></pre> <p>This creates a profile with proxy enabled. The proxy configuration is stored in the profile metadata.</p>"},{"location":"guides/proxy/#cli-commands","title":"CLI Commands","text":""},{"location":"guides/proxy/#proxy-lifecycle","title":"Proxy Lifecycle","text":"<pre><code># Enable proxy for an existing profile\nringlet proxy enable &lt;alias&gt;\n\n# Disable proxy for a profile\nringlet proxy disable &lt;alias&gt;\n\n# Start proxy instance manually\nringlet proxy start &lt;alias&gt;\n\n# Stop proxy instance\nringlet proxy stop &lt;alias&gt;\n\n# Stop all proxy instances\nringlet proxy stop-all\n\n# Restart proxy instance\nringlet proxy restart &lt;alias&gt;\n</code></pre>"},{"location":"guides/proxy/#status-and-monitoring","title":"Status and Monitoring","text":"<pre><code># Show status of all proxy instances\nringlet proxy status\n\n# Show status for a specific profile\nringlet proxy status &lt;alias&gt;\n\n# Show proxy configuration for a profile\nringlet proxy config &lt;alias&gt;\n\n# View proxy logs (last 50 lines by default)\nringlet proxy logs &lt;alias&gt;\n\n# View more log lines\nringlet proxy logs &lt;alias&gt; --lines 200\n</code></pre>"},{"location":"guides/proxy/#routing-rules","title":"Routing Rules","text":"<p>Routing rules determine how requests are distributed to providers based on conditions.</p>"},{"location":"guides/proxy/#adding-rules","title":"Adding Rules","text":"<pre><code>ringlet proxy route add &lt;alias&gt; &lt;name&gt; &lt;condition&gt; &lt;target&gt; [--priority N]\n</code></pre> <p>Examples:</p> <pre><code># Route long context to cheaper provider\nringlet proxy route add work \"long-context\" \"tokens &gt; 100000\" \"minimax/claude-3-sonnet\" --priority 10\n\n# Route thinking mode to premium model\nringlet proxy route add work \"thinking\" \"thinking\" \"anthropic/claude-opus-4\" --priority 5\n\n# Default fallback rule\nringlet proxy route add work \"default\" \"always\" \"anthropic/claude-sonnet-4\"\n</code></pre>"},{"location":"guides/proxy/#condition-syntax","title":"Condition Syntax","text":"Condition Description <code>always</code> Always match (use for default/fallback rules) <code>thinking</code> Match requests with thinking/extended mode enabled <code>tokens &gt; N</code> Match when token count exceeds N <code>tokens &lt; N</code> Match when token count is below N <code>tools &gt;= N</code> Match when tool count is at least N"},{"location":"guides/proxy/#managing-rules","title":"Managing Rules","text":"<pre><code># List routing rules\nringlet proxy route list &lt;alias&gt;\n\n# Remove a routing rule\nringlet proxy route remove &lt;alias&gt; &lt;name&gt;\n</code></pre>"},{"location":"guides/proxy/#model-aliases","title":"Model Aliases","text":"<p>Model aliases map requested model names to provider-specific targets.</p> <pre><code># Set a model alias\nringlet proxy alias set &lt;alias&gt; &lt;from-model&gt; &lt;to-target&gt;\n\n# Examples\nringlet proxy alias set work \"claude-sonnet-4\" \"minimax/claude-3-sonnet\"\nringlet proxy alias set work \"fast-model\" \"anthropic/claude-haiku-3\"\n\n# List model aliases\nringlet proxy alias list &lt;alias&gt;\n\n# Remove a model alias\nringlet proxy alias remove &lt;alias&gt; &lt;from-model&gt;\n</code></pre>"},{"location":"guides/proxy/#how-it-works","title":"How It Works","text":""},{"location":"guides/proxy/#port-allocation","title":"Port Allocation","text":"<ul> <li>Base port: 8080</li> <li>Range: 8080-8180 (supports up to 100 profiles)</li> <li>Ports are automatically allocated and released</li> <li>Each profile gets a unique port</li> </ul>"},{"location":"guides/proxy/#auto-start-behavior","title":"Auto-Start Behavior","text":"<p>When you run a profile with proxy enabled:</p> <ol> <li>Clown checks if the proxy is already running</li> <li>If not, it starts a new ultrallm instance</li> <li>The agent's configuration is updated with the proxy URL</li> <li>The agent starts and routes requests through the proxy</li> </ol> <pre><code>ringlet profiles run work\n# Proxy automatically starts on port 8081\n# Claude Code runs with baseUrl: http://127.0.0.1:8081\n</code></pre>"},{"location":"guides/proxy/#graceful-shutdown","title":"Graceful Shutdown","text":"<ul> <li>Proxies stay running between profile runs (for faster subsequent starts)</li> <li>When the daemon shuts down, all proxies are gracefully terminated</li> <li>SIGTERM is sent first, then SIGKILL after 5 seconds if needed</li> </ul>"},{"location":"guides/proxy/#profile-structure","title":"Profile Structure","text":"<p>When proxy is enabled, the profile home includes:</p> <pre><code>~/.claude-profiles/work/\n\u251c\u2500\u2500 .claude/\n\u2502   \u2514\u2500\u2500 settings.json     # baseUrl: http://localhost:{port}\n\u251c\u2500\u2500 .ultrallm/\n\u2502   \u251c\u2500\u2500 config.yaml       # Generated routing configuration\n\u2502   \u2514\u2500\u2500 logs/\n\u2502       \u2514\u2500\u2500 proxy.log     # Proxy logs\n\u2514\u2500\u2500 ...\n</code></pre>"},{"location":"guides/proxy/#routing-strategies","title":"Routing Strategies","text":"Strategy Description <code>Simple</code> Use first matching rule <code>Weighted</code> Weighted random among matches <code>LowestCost</code> Pick cheapest option <code>Adaptive</code> Learn from latency/errors <code>Conditional</code> Rule-based routing"},{"location":"guides/proxy/#use-cases","title":"Use Cases","text":""},{"location":"guides/proxy/#cost-optimization","title":"Cost Optimization","text":"<p>Route long-context requests to cheaper providers:</p> <pre><code># Create profile with proxy\nringlet profiles create claude work --proxy -p anthropic\n\n# Add rule to route long context to cheaper provider\nringlet proxy route add work \"long-context\" \"tokens &gt; 100000\" \"minimax/claude-3-sonnet\" --priority 10\n\n# Add default rule for normal requests\nringlet proxy route add work \"default\" \"always\" \"anthropic/claude-sonnet-4\"\n\n# Start using the profile\nringlet profiles run work\n</code></pre>"},{"location":"guides/proxy/#multi-provider-fallback","title":"Multi-Provider Fallback","text":"<p>Configure fallback to alternative providers when primary is unavailable:</p> <pre><code># Create profile with proxy\nringlet profiles create claude reliable --proxy -p anthropic\n\n# Primary provider (highest priority)\nringlet proxy route add reliable \"primary\" \"always\" \"anthropic/claude-sonnet-4\" --priority 10\n\n# Fallback provider (lower priority)\nringlet proxy route add reliable \"fallback\" \"always\" \"minimax/claude-3-sonnet\" --priority 0\n</code></pre>"},{"location":"guides/proxy/#development-vs-production","title":"Development vs Production","text":"<pre><code># Development: Route to cheaper/faster providers\nringlet profiles create claude dev --proxy -p minimax\nringlet proxy route add dev \"default\" \"always\" \"minimax/claude-3-sonnet\"\n\n# Production: Route to premium providers\nringlet profiles create claude prod --proxy -p anthropic\nringlet proxy route add prod \"thinking\" \"thinking\" \"anthropic/claude-opus-4\" --priority 10\nringlet proxy route add prod \"default\" \"always\" \"anthropic/claude-sonnet-4\"\n</code></pre>"},{"location":"guides/proxy/#tool-heavy-workloads","title":"Tool-Heavy Workloads","text":"<p>Route requests with many tools to more capable models:</p> <pre><code>ringlet proxy route add work \"heavy-tools\" \"tools &gt;= 10\" \"anthropic/claude-opus-4\" --priority 5\nringlet proxy route add work \"default\" \"always\" \"anthropic/claude-sonnet-4\"\n</code></pre>"},{"location":"guides/proxy/#monitoring","title":"Monitoring","text":""},{"location":"guides/proxy/#view-status","title":"View Status","text":"<pre><code>ringlet proxy status\n\n# Output:\n# Profile   Port   PID      Status    Restarts   Started\n# work      8081   12345    running   0          2026-01-18 10:30\n# dev       8082   12346    running   0          2026-01-18 09:15\n</code></pre>"},{"location":"guides/proxy/#view-configuration","title":"View Configuration","text":"<pre><code>ringlet proxy config work\n\n# Output:\n# Enabled: true\n# Port: auto\n# Strategy: Conditional\n# Rules:\n#   [long-context] tokens &gt; 100000 -&gt; minimax/claude-3-sonnet (priority: 10)\n#   [default] always -&gt; anthropic/claude-sonnet-4 (priority: 0)\n</code></pre>"},{"location":"guides/proxy/#view-logs","title":"View Logs","text":"<pre><code># View last 50 lines\nringlet proxy logs work\n\n# View more lines\nringlet proxy logs work --lines 200\n\n# Follow in real-time\ntail -f ~/.claude-profiles/work/.ultrallm/logs/proxy.log\n</code></pre>"},{"location":"guides/proxy/#health-check","title":"Health Check","text":"<p>The proxy health endpoint is available at:</p> <pre><code>http://127.0.0.1:{port}/health\n</code></pre>"},{"location":"guides/proxy/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/proxy/#proxy-not-starting","title":"Proxy not starting","text":"<ol> <li>Verify ultrallm binary is installed and executable</li> <li>Check if port is already in use</li> <li>Review daemon logs: <code>ringlet --log-level debug daemon start</code></li> </ol>"},{"location":"guides/proxy/#connection-refused","title":"Connection refused","text":"<ol> <li>Verify proxy is running: <code>ringlet proxy status</code></li> <li>Confirm port allocation in profile</li> <li>Check proxy logs for errors</li> </ol>"},{"location":"guides/proxy/#routing-not-working","title":"Routing not working","text":"<ol> <li>Verify routing rules: <code>ringlet proxy route list &lt;alias&gt;</code></li> <li>Check generated config in <code>.ultrallm/config.yaml</code></li> <li>Ensure API keys are set for target providers</li> </ol>"},{"location":"guides/scripting/","title":"Scripting with Rhai","text":"<p>Clown uses Rhai, an embedded scripting language for Rust, to generate agent-specific configuration files. Each agent has a <code>.rhai</code> script that receives context about the provider, profile, and user preferences, then outputs the required configuration.</p>"},{"location":"guides/scripting/#why-rhai","title":"Why Rhai?","text":"<ul> <li>Extensibility: Add new agents without recompiling ringlet</li> <li>Customization: Users can override scripts for special cases</li> <li>Declarative: Configuration logic is visible and editable</li> <li>Sandboxed: Scripts can't access filesystem or network directly</li> <li>Future-proof: New agent features can be supported by updating scripts</li> </ul>"},{"location":"guides/scripting/#script-resolution-order","title":"Script Resolution Order","text":"<p>Scripts are resolved in this order:</p> <ol> <li><code>~/.config/ringlet/scripts/&lt;agent-id&gt;.rhai</code> (user override)</li> <li><code>registry/scripts/&lt;agent-id&gt;.rhai</code> (from GitHub registry)</li> <li>Built-in scripts (compiled into binary)</li> </ol>"},{"location":"guides/scripting/#script-interface","title":"Script Interface","text":""},{"location":"guides/scripting/#input-variables","title":"Input Variables","text":"<p>Scripts receive these variables from ringlet:</p> <pre><code>// === Provider Context ===\nprovider.id          // \"minimax\"\nprovider.name        // \"MiniMax\"\nprovider.type        // \"anthropic-compatible\"\nprovider.endpoint_id // \"international\" or \"china\"\nprovider.endpoint    // \"https://api.minimax.io/anthropic\"\nprovider.api_key     // API key (from keychain)\nprovider.model       // \"MiniMax-M2.1\"\n\n// === Profile Context ===\nprofile.alias        // \"work-minimax\"\nprofile.home         // \"/home/user/.claude-profiles/work-minimax\"\nprofile.project_dir  // Current project directory (if applicable)\n\n// === Agent Context ===\nagent.id             // \"claude\"\nagent.binary         // \"claude\"\n\n// === User Preferences ===\nprefs.hooks.auto_format       // true/false\nprefs.hooks.auto_lint         // true/false\nprefs.hooks.custom            // Map of custom hooks\nprefs.mcp_servers.filesystem  // true/false\nprefs.mcp_servers.github      // true/false\nprefs.mcp_servers.custom      // Map of custom MCP servers\nprefs.custom                  // Any custom key-value pairs\n</code></pre>"},{"location":"guides/scripting/#output-structure","title":"Output Structure","text":"<p>Scripts must return a map with these keys:</p> <pre><code>#{\n    // Required: Files to generate (relative paths from profile.home)\n    \"files\": #{\n        \".claude/settings.json\": json_content,\n        \".claude.json\": mcp_config_content\n    },\n\n    // Optional: Environment variables to inject at runtime\n    \"env\": #{\n        \"ANTHROPIC_BASE_URL\": \"https://...\",\n        \"ANTHROPIC_AUTH_TOKEN\": \"...\"\n    },\n\n    // Optional: Hooks configuration (for agents that support them)\n    \"hooks\": #{\n        \"PreToolUse\": [...],\n        \"PostToolUse\": [...],\n        \"Notification\": [...],\n        \"Stop\": [...]\n    },\n\n    // Optional: MCP servers (for agents that support them)\n    \"mcp_servers\": #{\n        \"filesystem\": #{\n            \"command\": \"npx\",\n            \"args\": [\"-y\", \"@anthropic/mcp-filesystem\"],\n            \"env\": #{}\n        }\n    }\n}\n</code></pre>"},{"location":"guides/scripting/#built-in-functions","title":"Built-in Functions","text":"<p>Clown exposes these functions to Rhai scripts:</p> <pre><code>// Encode a map as pretty-printed JSON\njson::encode(map)  // Returns String\n\n// Encode a map as TOML\ntoml::encode(map)  // Returns String\n</code></pre>"},{"location":"guides/scripting/#example-scripts","title":"Example Scripts","text":""},{"location":"guides/scripting/#basic-claude-code","title":"Basic: Claude Code","text":"<pre><code>// Claude Code configuration script\n// Generates ~/.claude/settings.json\n\nlet settings = #{\n    \"env\": #{\n        \"ANTHROPIC_BASE_URL\": provider.endpoint,\n        \"ANTHROPIC_AUTH_TOKEN\": provider.api_key,\n        \"API_TIMEOUT_MS\": \"3000000\",\n        \"CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC\": \"1\",\n        \"ANTHROPIC_MODEL\": provider.model,\n        \"ANTHROPIC_SMALL_FAST_MODEL\": provider.model,\n        \"ANTHROPIC_DEFAULT_SONNET_MODEL\": provider.model,\n        \"ANTHROPIC_DEFAULT_OPUS_MODEL\": provider.model,\n        \"ANTHROPIC_DEFAULT_HAIKU_MODEL\": provider.model\n    }\n};\n\n#{\n    \"files\": #{\n        \".claude/settings.json\": json::encode(settings)\n    },\n    \"env\": #{}\n}\n</code></pre>"},{"location":"guides/scripting/#with-hooks","title":"With Hooks","text":"<pre><code>// Claude Code with hooks support\n\nlet env_config = #{\n    \"ANTHROPIC_BASE_URL\": provider.endpoint,\n    \"ANTHROPIC_AUTH_TOKEN\": provider.api_key,\n    \"API_TIMEOUT_MS\": \"3000000\",\n    \"ANTHROPIC_MODEL\": provider.model\n};\n\n// Build hooks based on user preferences\nlet hooks_config = #{};\n\nif prefs.hooks.auto_format {\n    hooks_config.PostToolUse = [\n        #{\n            \"matcher\": \"Edit|Write|MultiEdit\",\n            \"hooks\": [\n                #{\n                    \"type\": \"command\",\n                    \"command\": \"prettier --write \\\"$CLAUDE_FILE_PATHS\\\" 2&gt;/dev/null || true\"\n                }\n            ]\n        }\n    ];\n}\n\nif prefs.hooks.auto_lint {\n    let lint_hook = #{\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [#{ \"type\": \"command\", \"command\": \"eslint --fix \\\"$CLAUDE_FILE_PATHS\\\"\" }]\n    };\n    if hooks_config.PostToolUse == () {\n        hooks_config.PostToolUse = [];\n    }\n    hooks_config.PostToolUse.push(lint_hook);\n}\n\n// Build settings.json\nlet settings = #{ \"env\": env_config };\nif hooks_config.keys().len() &gt; 0 {\n    settings.hooks = hooks_config;\n}\n\n#{\n    \"files\": #{\n        \".claude/settings.json\": json::encode(settings)\n    },\n    \"env\": #{},\n    \"hooks\": hooks_config\n}\n</code></pre>"},{"location":"guides/scripting/#with-mcp-servers","title":"With MCP Servers","text":"<pre><code>// Claude Code with MCP server support\n\nlet env_config = #{\n    \"ANTHROPIC_BASE_URL\": provider.endpoint,\n    \"ANTHROPIC_AUTH_TOKEN\": provider.api_key,\n    \"ANTHROPIC_MODEL\": provider.model\n};\n\n// Build MCP servers based on user preferences\nlet mcp_config = #{};\n\nif prefs.mcp_servers.filesystem {\n    mcp_config.filesystem = #{\n        \"command\": \"npx\",\n        \"args\": [\"-y\", \"@anthropic/mcp-filesystem\", profile.project_dir],\n        \"env\": #{}\n    };\n}\n\nif prefs.mcp_servers.github &amp;&amp; prefs.mcp_servers.github_token != () {\n    mcp_config.github = #{\n        \"command\": \"npx\",\n        \"args\": [\"-y\", \"@anthropic/mcp-github\"],\n        \"env\": #{ \"GITHUB_TOKEN\": prefs.mcp_servers.github_token }\n    };\n}\n\n// Add any custom MCP servers\nif prefs.mcp_servers.custom != () {\n    for name in prefs.mcp_servers.custom.keys() {\n        mcp_config[name] = prefs.mcp_servers.custom[name];\n    }\n}\n\n// Build output files\nlet files = #{\n    \".claude/settings.json\": json::encode(#{ \"env\": env_config })\n};\n\nif mcp_config.keys().len() &gt; 0 {\n    files[\".claude.json\"] = json::encode(#{ \"mcpServers\": mcp_config });\n}\n\n#{\n    \"files\": files,\n    \"env\": #{},\n    \"mcp_servers\": mcp_config\n}\n</code></pre>"},{"location":"guides/scripting/#toml-output-codex-cli","title":"TOML Output: Codex CLI","text":"<pre><code>// Codex CLI configuration script\n// Generates ~/.codex/config.toml\n\nlet provider_section = #{\n    \"name\": provider.name + \" Chat Completions API\",\n    \"base_url\": provider.endpoint,\n    \"env_key\": \"CLOWN_API_KEY\",\n    \"wire_api\": \"chat\",\n    \"requires_openai_auth\": false\n};\n\nlet profile_section = #{\n    \"model\": \"codex-\" + provider.model,\n    \"model_provider\": provider.id\n};\n\nlet config = #{\n    \"model_providers\": #{},\n    \"profiles\": #{}\n};\nconfig.model_providers[provider.id] = provider_section;\nconfig.profiles[profile.alias] = profile_section;\n\n#{\n    \"files\": #{\n        \".codex/config.toml\": toml::encode(config)\n    },\n    \"env\": #{\n        \"CLOWN_API_KEY\": provider.api_key\n    }\n}\n</code></pre>"},{"location":"guides/scripting/#environment-only-grok-cli","title":"Environment Only: Grok CLI","text":"<pre><code>// Grok CLI - pure environment variables, no config files\n\n#{\n    \"files\": #{},\n    \"env\": #{\n        \"GROK_BASE_URL\": provider.endpoint,\n        \"GROK_API_KEY\": provider.api_key\n    }\n}\n</code></pre>"},{"location":"guides/scripting/#user-preferences","title":"User Preferences","text":"<p>Users can configure default preferences in <code>~/.config/ringlet/config.toml</code>:</p> <pre><code>[defaults]\nprovider = \"anthropic\"\n\n[hooks]\nauto_format = true\nauto_lint = false\n\n[hooks.custom.PostToolUse]\n[[hooks.custom.PostToolUse]]\nmatcher = \"Write\"\ntype = \"command\"\ncommand = \"echo 'File written'\"\n\n[mcp_servers]\nfilesystem = true\ngithub = false\ngithub_token = \"\"\n\n[mcp_servers.custom.my-server]\ncommand = \"node\"\nargs = [\"./my-mcp.js\"]\n</code></pre>"},{"location":"guides/scripting/#cli-flags","title":"CLI Flags","text":"<p>Override preferences per profile:</p> <pre><code># Enable specific hooks\nringlet profiles create claude work --provider minimax --hooks auto_format,auto_lint\n\n# Enable MCP servers\nringlet profiles create claude work --provider minimax --mcp filesystem,github\n\n# Minimal profile (no hooks, no MCP)\nringlet profiles create claude minimal --provider anthropic --bare\n</code></pre>"},{"location":"guides/scripting/#creating-custom-scripts","title":"Creating Custom Scripts","text":""},{"location":"guides/scripting/#1-create-script-directory","title":"1. Create Script Directory","text":"<pre><code>mkdir -p ~/.config/ringlet/scripts\n</code></pre>"},{"location":"guides/scripting/#2-write-your-script","title":"2. Write Your Script","text":"<pre><code>// ~/.config/ringlet/scripts/claude.rhai\n// Custom Claude Code configuration\n\nlet settings = #{\n    \"env\": #{\n        \"ANTHROPIC_BASE_URL\": provider.endpoint,\n        \"ANTHROPIC_AUTH_TOKEN\": provider.api_key,\n        \"MY_CUSTOM_VAR\": \"custom-value\"\n    }\n};\n\n#{\n    \"files\": #{\n        \".claude/settings.json\": json::encode(settings)\n    },\n    \"env\": #{}\n}\n</code></pre>"},{"location":"guides/scripting/#3-create-a-profile","title":"3. Create a Profile","text":"<p>Your script will be used automatically:</p> <pre><code>ringlet profiles create claude custom --provider minimax\n</code></pre>"},{"location":"guides/scripting/#debugging-scripts","title":"Debugging Scripts","text":"<p>Use <code>ringlet scripts test</code> to validate a script:</p> <pre><code># Test script with mock data\nringlet scripts test claude.rhai --provider minimax --alias test\n\n# Show generated output without creating profile\nringlet profiles create claude test --provider minimax --dry-run\n</code></pre>"},{"location":"guides/scripting/#rhai-language-reference","title":"Rhai Language Reference","text":"<p>Rhai uses syntax similar to JavaScript and Rust:</p> <pre><code>// Variables\nlet x = 42;\nlet name = \"Claude\";\n\n// Maps (object literals)\nlet config = #{\n    \"key\": \"value\",\n    \"nested\": #{\n        \"inner\": 123\n    }\n};\n\n// Arrays\nlet items = [\"a\", \"b\", \"c\"];\n\n// Conditionals\nif condition {\n    // ...\n} else {\n    // ...\n}\n\n// Loops\nfor item in items {\n    print(item);\n}\n\n// String interpolation\nlet msg = `Hello ${name}`;\n\n// Map operations\nconfig.new_key = \"new value\";\nconfig[\"another\"] = 456;\nlet keys = config.keys();\nlet len = config.keys().len();\n\n// Null check\nif value == () {\n    // value is null/undefined\n}\n</code></pre> <p>For full Rhai documentation, see The Rhai Book.</p>"},{"location":"guides/terminal/","title":"Remote Terminal Sessions","text":"<p>Run agent sessions remotely in the daemon and access them from anywhere through the web UI or multiple CLI clients.</p>"},{"location":"guides/terminal/#overview","title":"Overview","text":"<p>Remote terminal sessions allow you to:</p> <ul> <li>Run agents in the background - Sessions persist even when you disconnect</li> <li>Access from web UI - Full interactive terminal in your browser</li> <li>Share sessions - Multiple clients can view and interact with the same session</li> <li>View history - Reconnecting shows terminal scrollback (up to 1MB)</li> <li>Specify working directory - Start sessions in any folder</li> </ul>"},{"location":"guides/terminal/#quick-start","title":"Quick Start","text":""},{"location":"guides/terminal/#1-start-the-daemon","title":"1. Start the Daemon","text":"<pre><code>ringlet daemon start --stay-alive\n</code></pre>"},{"location":"guides/terminal/#2-create-a-remote-session","title":"2. Create a Remote Session","text":"<p>From CLI:</p> <pre><code>ringlet profiles run my-project --remote\n</code></pre> <p>This outputs the session ID and runs the agent in the daemon's PTY.</p> <p>From Web UI:</p> <ol> <li>Open <code>http://127.0.0.1:8765</code> in your browser</li> <li>Go to the Terminal section</li> <li>Click New Session</li> <li>Select a profile and click Create Session</li> </ol>"},{"location":"guides/terminal/#3-access-the-terminal","title":"3. Access the Terminal","text":"<p>Open the web UI at <code>http://127.0.0.1:8765</code> and select your session from the list. You'll see the full terminal with input/output.</p>"},{"location":"guides/terminal/#cli-commands","title":"CLI Commands","text":""},{"location":"guides/terminal/#start-a-remote-session","title":"Start a Remote Session","text":"<pre><code>ringlet profiles run &lt;alias&gt; --remote [OPTIONS]\n</code></pre> Option Description <code>--remote</code> Run in daemon with PTY (enables web access) <code>--cols &lt;N&gt;</code> Terminal columns (default: 80) <code>--rows &lt;N&gt;</code> Terminal rows (default: 24) <code>--no-sandbox</code> Disable sandboxing (sandbox enabled by default) <code>--bwrap-flags &lt;FLAGS&gt;</code> Custom bwrap flags (Linux only, comma-separated) <p>Examples:</p> <pre><code># Basic remote session (sandboxed by default)\nringlet profiles run my-project --remote\n\n# With custom terminal size\nringlet profiles run my-project --remote --cols 120 --rows 40\n\n# Without sandbox (full system access)\nringlet profiles run my-project --remote --no-sandbox\n\n# With custom sandbox rules (Linux)\nringlet profiles run my-project --remote --bwrap-flags=\"--unshare-net\"\n\n# Pass additional arguments to the agent\nringlet profiles run my-project --remote -- --dangerously-skip-permissions\n</code></pre>"},{"location":"guides/terminal/#list-sessions","title":"List Sessions","text":"<pre><code>ringlet terminal list\n</code></pre> <p>Output:</p> <pre><code>SESSION ID                            PROFILE          STATE       CLIENTS\n--------------------------------------------------------------------------------\n46e15057-abbb-42cd-ad0e-52471a76ef9f  my-project       running     1\n843b2463-c3c8-457d-8473-e92cff18c954  work-profile     running     0\n</code></pre>"},{"location":"guides/terminal/#get-session-info","title":"Get Session Info","text":"<pre><code>ringlet terminal info &lt;session-id&gt;\n</code></pre> <p>Output:</p> <pre><code>Session ID: 46e15057-abbb-42cd-ad0e-52471a76ef9f\nProfile: my-project\nState: running\nPID: 12345\nSize: 80x24\nClients: 1\nCreated: 2026-01-22T00:22:45Z\n</code></pre>"},{"location":"guides/terminal/#terminate-a-session","title":"Terminate a Session","text":"<pre><code>ringlet terminal kill &lt;session-id&gt;\n</code></pre>"},{"location":"guides/terminal/#web-ui","title":"Web UI","text":"<p>The web UI provides a full-featured terminal experience at <code>http://127.0.0.1:8765/terminal</code>.</p>"},{"location":"guides/terminal/#features","title":"Features","text":"<ul> <li>Session sidebar - List of all active and terminated sessions</li> <li>Full terminal emulation - Powered by xterm.js</li> <li>Click to focus - Click anywhere in the terminal to start typing</li> <li>Scrollback history - Scroll up to see previous output</li> <li>Multi-client support - Multiple browser tabs can view the same session</li> <li>Session creation - Create new sessions with profile selection and options</li> </ul>"},{"location":"guides/terminal/#creating-sessions-in-web-ui","title":"Creating Sessions in Web UI","text":"<ol> <li>Click New Session button</li> <li>Select a profile from the dropdown</li> <li>Optionally add arguments (e.g., <code>--dangerously-skip-permissions</code>)</li> <li>Optionally specify a working directory</li> <li>Click Create Session</li> </ol> <p>The terminal connects automatically and shows the agent starting up.</p>"},{"location":"guides/terminal/#working-directory","title":"Working Directory","text":"<p>By default, terminal sessions start in the profile's home directory. You can override this when creating a session.</p> <p>CLI:</p> <p>Working directory is inherited from the profile configuration.</p> <p>Web UI:</p> <p>Enter a path in the Working Directory field when creating a new session.</p> <p>API:</p> <pre><code>curl -X POST http://127.0.0.1:8765/api/terminal/sessions \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"profile_alias\": \"my-project\",\n    \"working_dir\": \"/home/user/code/my-app\",\n    \"cols\": 80,\n    \"rows\": 24\n  }'\n</code></pre>"},{"location":"guides/terminal/#security-sandboxing","title":"Security: Sandboxing","text":"<p>Remote terminal sessions are sandboxed by default for security. This isolates the agent process from your system, limiting what files and resources it can access.</p>"},{"location":"guides/terminal/#how-it-works","title":"How It Works","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Host System                         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502        Sandbox (bwrap / sandbox-exec)            \u2502  \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502  \u2502\n\u2502  \u2502  \u2502          Agent Process (claude)            \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502                                            \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  Read-only:  /usr, /bin, /lib, /etc       \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  Read-write: ~/, working_dir, /tmp        \u2502  \u2502  \u2502\n\u2502  \u2502  \u2502  Network:    allowed (API access)          \u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"guides/terminal/#platform-support","title":"Platform Support","text":"Platform Sandbox Tool Status Linux bwrap (bubblewrap) \u2705 Supported macOS sandbox-exec \u2705 Supported Windows - \u274c Not supported <p>Installing bwrap on Linux</p> <p>On Ubuntu/Debian: <code>sudo apt install bubblewrap</code> On Fedora: <code>sudo dnf install bubblewrap</code> On Arch: <code>sudo pacman -S bubblewrap</code></p>"},{"location":"guides/terminal/#default-sandbox-rules","title":"Default Sandbox Rules","text":"<p>The default sandbox provides practical security:</p> <ul> <li>Read-only root filesystem - System binaries and libraries are protected</li> <li>Read-write home directory - Agent configs, caches, and settings work normally</li> <li>Read-write working directory - The agent can modify your project files</li> <li>Read-write /tmp - Temporary files work as expected</li> <li>Network access allowed - API calls to providers work normally</li> <li>Process isolation - Separate PID/IPC namespaces (Linux)</li> </ul>"},{"location":"guides/terminal/#disabling-sandboxing","title":"Disabling Sandboxing","text":"<p>If your agent needs full system access (e.g., to install packages or modify system files), you can disable the sandbox.</p> <p>CLI:</p> <pre><code>ringlet profiles run my-project --remote --no-sandbox\n</code></pre> <p>Web UI:</p> <p>Check the \"Disable sandbox\" checkbox when creating a new session.</p> <p>API:</p> <pre><code>curl -X POST http://127.0.0.1:8765/api/terminal/sessions \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"profile_alias\": \"my-project\",\n    \"no_sandbox\": true\n  }'\n</code></pre> <p>Security Implications</p> <p>Disabling the sandbox gives the agent full access to your user account. Only disable it when necessary and for trusted profiles.</p>"},{"location":"guides/terminal/#custom-sandbox-rules-linux","title":"Custom Sandbox Rules (Linux)","text":"<p>You can provide custom bwrap flags for advanced use cases:</p> <pre><code>ringlet profiles run my-project --remote --bwrap-flags=\"--unshare-net,--ro-bind /data /data\"\n</code></pre> <p>Common custom flags:</p> Flag Effect <code>--unshare-net</code> Disable network access <code>--ro-bind /path /path</code> Mount path as read-only <code>--bind /path /path</code> Mount path as read-write"},{"location":"guides/terminal/#multi-client-sessions","title":"Multi-Client Sessions","text":"<p>Multiple clients can connect to the same terminal session simultaneously. This is useful for:</p> <ul> <li>Pair programming - Share your agent session with a colleague</li> <li>Monitoring - Watch an agent session from multiple devices</li> <li>Debugging - Open the same session in multiple browser tabs</li> </ul> <p>All connected clients see the same output in real-time. Any client can send input, which is broadcast to the terminal.</p>"},{"location":"guides/terminal/#session-states","title":"Session States","text":"State Description <code>starting</code> Session is initializing, agent is launching <code>running</code> Agent is running and interactive <code>terminated</code> Agent has exited (check exit code) <p>When a session terminates, all connected clients receive a notification with the exit code.</p>"},{"location":"guides/terminal/#scrollback-buffer","title":"Scrollback Buffer","text":"<p>Terminal sessions maintain a scrollback buffer (up to 1MB) that stores recent terminal output. When you reconnect to a session or open it in a new browser tab, the scrollback is sent automatically so you can see what happened while disconnected.</p>"},{"location":"guides/terminal/#api-reference","title":"API Reference","text":""},{"location":"guides/terminal/#rest-endpoints","title":"REST Endpoints","text":"Method Endpoint Description <code>GET</code> <code>/api/terminal/sessions</code> List all sessions <code>GET</code> <code>/api/terminal/sessions/{id}</code> Get session details <code>POST</code> <code>/api/terminal/sessions</code> Create new session <code>DELETE</code> <code>/api/terminal/sessions/{id}</code> Terminate session <code>POST</code> <code>/api/terminal/cleanup</code> Remove terminated sessions"},{"location":"guides/terminal/#websocket","title":"WebSocket","text":"<p>Connect to <code>/ws/terminal/{session_id}</code> for real-time terminal I/O.</p> <p>Client messages:</p> <ul> <li>Binary - Raw terminal input (keystrokes)</li> <li>JSON - Control messages: <code>{ \"type\": \"resize\", \"cols\": 120, \"rows\": 40 }</code></li> <li>JSON - Signal messages: <code>{ \"type\": \"signal\", \"signal\": 2 }</code> (SIGINT)</li> </ul> <p>Server messages:</p> <ul> <li>Binary - Raw terminal output</li> <li>JSON - State changes: <code>{ \"type\": \"state_changed\", \"state\": \"terminated\", \"exit_code\": 0 }</code></li> <li>JSON - Errors: <code>{ \"type\": \"error\", \"message\": \"Session not found\" }</code></li> </ul> <p>See the HTTP API Reference for complete details.</p>"},{"location":"guides/terminal/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/terminal/#terminal-not-receiving-input","title":"Terminal not receiving input","text":"<ol> <li>Click on the terminal area to focus it</li> <li>Check that the session state is <code>running</code></li> <li>Verify WebSocket connection in browser dev tools</li> </ol>"},{"location":"guides/terminal/#session-disconnects-immediately","title":"Session disconnects immediately","text":"<p>Check the daemon logs for errors:</p> <pre><code>tail -f ~/.config/ringlet/ringletd.log\n</code></pre> <p>Common causes:</p> <ul> <li>Profile not found</li> <li>Agent binary not installed</li> <li>Invalid working directory</li> </ul>"},{"location":"guides/terminal/#scrollback-not-showing","title":"Scrollback not showing","text":"<p>Scrollback is only sent on initial connection. If you've been connected since the session started, all output is already visible. Try opening in a new browser tab to see the scrollback.</p>"},{"location":"guides/terminal/#session-not-found-error","title":"\"Session not found\" error","text":"<p>The session may have been terminated. Run <code>ringlet terminal list</code> to see active sessions.</p>"},{"location":"guides/usage/","title":"Usage Tracking","text":"<p>The usage tracking feature provides native token and cost monitoring for all agent sessions. It tracks token consumption across all profiles and calculates costs for profiles using direct API keys.</p>"},{"location":"guides/usage/#overview","title":"Overview","text":"<p>Usage tracking captures:</p> <ul> <li>Token Usage: Input tokens, output tokens, cache creation tokens, and cache read tokens</li> <li>Cost Calculation: Estimated costs based on LiteLLM's pricing database</li> <li>Session Metrics: Session counts, runtime durations, and last-used timestamps</li> <li>Aggregations: Breakdowns by profile, model, and date</li> </ul>"},{"location":"guides/usage/#key-concepts","title":"Key Concepts","text":"Concept Description Token Tracking Always enabled for all profiles Cost Calculation Only calculated when profile uses \"self\" provider Pricing Source LiteLLM's <code>model_prices_and_context_window.json</code> Pricing Sync Downloaded during <code>ringlet registry sync</code> <p>Why 'self' Provider Only for Costs?</p> <p>The <code>self</code> provider indicates you're using your own API key directly with a provider like Anthropic. In this case, you pay per-token and cost tracking is meaningful. Other providers (managed services, enterprise gateways) handle billing differently, so cost calculations would be inaccurate.</p>"},{"location":"guides/usage/#cli-commands","title":"CLI Commands","text":""},{"location":"guides/usage/#view-usage-summary","title":"View Usage Summary","text":"<pre><code># Default: show today's usage\nringlet usage\n\n# Specify time period\nringlet usage --period today\nringlet usage --period yesterday\nringlet usage --period week\nringlet usage --period month\nringlet usage --period 7d\nringlet usage --period 30d\nringlet usage --period all\n\n# Filter by profile\nringlet usage --profile my-profile\n\n# Filter by model\nringlet usage --model claude-sonnet-4\n\n# Combine filters\nringlet usage --period month --profile work-claude\n</code></pre>"},{"location":"guides/usage/#view-breakdown","title":"View Breakdown","text":"<pre><code># Daily breakdown\nringlet usage daily --period week\n\n# Usage by model\nringlet usage models\n\n# Usage by profile\nringlet usage profiles\n</code></pre>"},{"location":"guides/usage/#export-usage-data","title":"Export Usage Data","text":"<pre><code># Export as JSON\nringlet usage export --format json &gt; usage.json\n\n# Export as CSV\nringlet usage export --format csv --period month &gt; usage.csv\n</code></pre>"},{"location":"guides/usage/#import-claude-data","title":"Import Claude Data","text":"<p>Import existing usage data from Claude Code's native files:</p> <pre><code># Import from default location (~/.claude)\nringlet usage import-claude\n\n# Import from custom location\nringlet usage import-claude --claude-dir /path/to/.claude\n</code></pre> <p>This imports data from:</p> <ul> <li><code>~/.claude/stats-cache.json</code> - Aggregate token usage by model</li> <li><code>~/.claude/projects/*/session.jsonl</code> - Session-level data</li> </ul>"},{"location":"guides/usage/#web-ui","title":"Web UI","text":"<p>The embedded Web UI includes a dedicated Usage page accessible at <code>http://127.0.0.1:8765/usage</code> when the daemon is running.</p>"},{"location":"guides/usage/#features","title":"Features","text":"<ul> <li>Period Selector: Switch between Today, Yesterday, This Week, This Month, Last 7 Days, Last 30 Days, All Time</li> <li>Overview Cards: Total tokens, total cost, sessions, and runtime at a glance</li> <li>Token Breakdown: Detailed view of input, output, cache creation, and cache read tokens</li> <li>Cost Breakdown: Detailed cost breakdown (when available)</li> <li>Profile Table: Usage breakdown by profile with tokens, cost, and last used date</li> <li>Import Button: One-click import of Claude Code's native usage data</li> </ul>"},{"location":"guides/usage/#accessing-the-ui","title":"Accessing the UI","text":"<pre><code># Start the daemon\nringlet daemon start --stay-alive\n\n# Open in browser\nopen http://127.0.0.1:8765\n</code></pre> <p>Navigate to \"Usage\" in the sidebar to view the usage tracking page.</p>"},{"location":"guides/usage/#token-types","title":"Token Types","text":"Token Type Description Input Tokens Tokens in the request (prompt, system message, context) Output Tokens Tokens in the response (completion) Cache Creation Tokens written to prompt cache Cache Read Tokens read from prompt cache (cheaper than input)"},{"location":"guides/usage/#http-api","title":"HTTP API","text":""},{"location":"guides/usage/#get-usage-statistics","title":"Get Usage Statistics","text":"<pre><code>GET /api/usage\nGET /api/usage?period=week\nGET /api/usage?profile=my-profile\nGET /api/usage?period=month&amp;profile=work-claude\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"period\": \"This week\",\n    \"total_tokens\": {\n      \"input_tokens\": 125000,\n      \"output_tokens\": 45000,\n      \"cache_creation_input_tokens\": 10000,\n      \"cache_read_input_tokens\": 50000\n    },\n    \"total_cost\": {\n      \"input_cost\": 0.375,\n      \"output_cost\": 0.675,\n      \"cache_creation_cost\": 0.0375,\n      \"cache_read_cost\": 0.015,\n      \"total_cost\": 1.1025\n    },\n    \"total_sessions\": 42,\n    \"total_runtime_secs\": 3600,\n    \"aggregates\": {\n      \"by_profile\": {\n        \"work-claude\": {\n          \"profile\": \"work-claude\",\n          \"tokens\": { \"...\" },\n          \"cost\": { \"...\" },\n          \"sessions\": 30,\n          \"runtime_secs\": 2400,\n          \"last_used\": \"2026-01-20T10:30:00Z\"\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"guides/usage/#import-claude-data_1","title":"Import Claude Data","text":"<pre><code>POST /api/usage/import-claude\nPOST /api/usage/import-claude?claude_dir=/custom/path\n</code></pre>"},{"location":"guides/usage/#configuration","title":"Configuration","text":""},{"location":"guides/usage/#pricing-sync","title":"Pricing Sync","text":"<p>Model pricing is downloaded from LiteLLM during registry sync:</p> <pre><code>ringlet registry sync\n</code></pre> <p>This downloads <code>model_prices_and_context_window.json</code> to:</p> <pre><code>~/.config/ringlet/registry/litellm-pricing.json\n</code></pre>"},{"location":"guides/usage/#pricing-data-format","title":"Pricing Data Format","text":"<p>The pricing file includes per-token costs for 200+ models:</p> <pre><code>{\n  \"claude-sonnet-4-20250514\": {\n    \"input_cost_per_token\": 0.000003,\n    \"output_cost_per_token\": 0.000015,\n    \"cache_creation_input_token_cost\": 0.00000375,\n    \"cache_read_input_token_cost\": 0.0000003\n  }\n}\n</code></pre>"},{"location":"guides/usage/#data-storage","title":"Data Storage","text":"<p>Usage data is stored under the telemetry directory:</p> <pre><code>~/.config/ringlet/telemetry/\n\u251c\u2500\u2500 sessions.jsonl        # Per-session records with token/cost data\n\u2514\u2500\u2500 aggregates.json       # Rolled-up stats per profile/model\n</code></pre>"},{"location":"guides/usage/#use-cases","title":"Use Cases","text":""},{"location":"guides/usage/#track-token-usage-across-profiles","title":"Track Token Usage Across Profiles","text":"<p>Monitor how many tokens each profile consumes:</p> <pre><code># View all profiles\nringlet usage profiles\n\n# Check specific profile\nringlet usage --profile work-claude --period month\n</code></pre>"},{"location":"guides/usage/#monitor-costs-for-direct-api-usage","title":"Monitor Costs for Direct API Usage","text":"<p>Track costs when using your own API keys:</p> <pre><code># Create profile with self provider\nringlet profiles create claude direct-api --provider self\n\n# View costs\nringlet usage --profile direct-api\n</code></pre>"},{"location":"guides/usage/#import-existing-claude-data","title":"Import Existing Claude Data","text":"<p>Migrate historical usage data from Claude Code:</p> <pre><code># Import all available Claude data\nringlet usage import-claude\n\n# Verify import\nringlet usage --period all\n</code></pre>"},{"location":"guides/usage/#export-for-analysis","title":"Export for Analysis","text":"<p>Export usage data for external analysis or reporting:</p> <pre><code># Export last month's data as CSV\nringlet usage export --format csv --period month &gt; monthly-usage.csv\n\n# Export all data as JSON for processing\nringlet usage export --format json --period all &gt; all-usage.json\n</code></pre>"},{"location":"guides/usage/#troubleshooting","title":"Troubleshooting","text":""},{"location":"guides/usage/#no-usage-data-showing","title":"No usage data showing","text":"<ol> <li>Verify the daemon is running: <code>ringlet daemon status</code></li> <li>Check if any profiles have been used: <code>ringlet profiles list</code></li> <li>Sync registry to get pricing: <code>ringlet registry sync</code></li> </ol>"},{"location":"guides/usage/#costs-showing-as-or-null","title":"Costs showing as \"-\" or null","text":"<ol> <li>Verify the profile uses \"self\" provider</li> <li>Check if pricing data is synced: <code>ls ~/.config/ringlet/registry/litellm-pricing.json</code></li> <li>Verify the model has pricing in LiteLLM database</li> </ol>"},{"location":"guides/usage/#import-not-finding-data","title":"Import not finding data","text":"<ol> <li>Verify Claude directory exists: <code>ls ~/.claude</code></li> <li>Check for stats-cache.json: <code>ls ~/.claude/stats-cache.json</code></li> <li>Try specifying path explicitly: <code>ringlet usage import-claude --claude-dir ~/.claude</code></li> </ol>"},{"location":"reference/api/","title":"HTTP API Reference","text":"<p>The Clown daemon exposes an HTTP API on <code>http://127.0.0.1:8765</code> for UI integrations and external tools.</p>"},{"location":"reference/api/#overview","title":"Overview","text":"<p>The HTTP API provides:</p> <ul> <li>RESTful endpoints for profiles, agents, providers, and usage</li> <li>JSON responses with consistent structure</li> <li>WebSocket support for real-time events</li> </ul>"},{"location":"reference/api/#base-url","title":"Base URL","text":"<pre><code>http://127.0.0.1:8765\n</code></pre>"},{"location":"reference/api/#response-format","title":"Response Format","text":"<p>All responses follow this structure:</p> <pre><code>{\n  \"success\": true,\n  \"data\": { ... }\n}\n</code></pre> <p>Error responses:</p> <pre><code>{\n  \"success\": false,\n  \"error\": \"Error message\"\n}\n</code></pre>"},{"location":"reference/api/#profiles","title":"Profiles","text":""},{"location":"reference/api/#list-profiles","title":"List Profiles","text":"<pre><code>GET /api/profiles\n</code></pre> <p>Query Parameters:</p> Parameter Type Description <code>agent</code> string Filter by agent ID <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"alias\": \"my-project\",\n      \"agent_id\": \"claude\",\n      \"provider_id\": \"anthropic\",\n      \"endpoint_id\": \"default\",\n      \"model\": \"claude-sonnet-4\",\n      \"last_used\": \"2026-01-08T10:30:00Z\"\n    }\n  ]\n}\n</code></pre>"},{"location":"reference/api/#get-profile","title":"Get Profile","text":"<pre><code>GET /api/profiles/{alias}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"alias\": \"my-project\",\n    \"agent_id\": \"claude\",\n    \"provider_id\": \"anthropic\",\n    \"endpoint_id\": \"default\",\n    \"model\": \"claude-sonnet-4\",\n    \"created_at\": \"2026-01-05T10:00:00Z\",\n    \"last_used\": \"2026-01-08T10:30:00Z\",\n    \"profile_home\": \"~/.claude-profiles/my-project\"\n  }\n}\n</code></pre>"},{"location":"reference/api/#create-profile","title":"Create Profile","text":"<pre><code>POST /api/profiles\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"agent_id\": \"claude\",\n  \"alias\": \"new-project\",\n  \"provider_id\": \"anthropic\",\n  \"endpoint_id\": \"default\",\n  \"model\": \"claude-sonnet-4\",\n  \"api_key\": \"sk-...\"\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"alias\": \"new-project\",\n    \"message\": \"Profile created successfully\"\n  }\n}\n</code></pre>"},{"location":"reference/api/#delete-profile","title":"Delete Profile","text":"<pre><code>DELETE /api/profiles/{alias}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"message\": \"Profile deleted\"\n  }\n}\n</code></pre>"},{"location":"reference/api/#agents","title":"Agents","text":""},{"location":"reference/api/#list-agents","title":"List Agents","text":"<pre><code>GET /api/agents\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"claude\",\n      \"name\": \"Claude Code\",\n      \"installed\": true,\n      \"version\": \"1.0.0\",\n      \"binary_path\": \"/usr/local/bin/claude\",\n      \"profile_count\": 3\n    },\n    {\n      \"id\": \"codex\",\n      \"name\": \"Codex CLI\",\n      \"installed\": true,\n      \"version\": \"0.5.0\",\n      \"binary_path\": \"/usr/local/bin/codex\",\n      \"profile_count\": 1\n    }\n  ]\n}\n</code></pre>"},{"location":"reference/api/#get-agent","title":"Get Agent","text":"<pre><code>GET /api/agents/{id}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"claude\",\n    \"name\": \"Claude Code\",\n    \"installed\": true,\n    \"version\": \"1.0.0\",\n    \"binary\": \"claude\",\n    \"binary_path\": \"/usr/local/bin/claude\",\n    \"profile_strategy\": \"home-wrapper\",\n    \"supports_hooks\": true,\n    \"default_model\": \"claude-sonnet-4\",\n    \"supported_models\": [\"claude-sonnet-4\", \"claude-opus-4\"]\n  }\n}\n</code></pre>"},{"location":"reference/api/#providers","title":"Providers","text":""},{"location":"reference/api/#list-providers","title":"List Providers","text":"<pre><code>GET /api/providers\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"anthropic\",\n      \"name\": \"Anthropic\",\n      \"type\": \"anthropic\",\n      \"default_model\": \"claude-sonnet-4\"\n    },\n    {\n      \"id\": \"minimax\",\n      \"name\": \"MiniMax\",\n      \"type\": \"anthropic-compatible\",\n      \"default_model\": \"MiniMax-M2.1\"\n    }\n  ]\n}\n</code></pre>"},{"location":"reference/api/#get-provider","title":"Get Provider","text":"<pre><code>GET /api/providers/{id}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"minimax\",\n    \"name\": \"MiniMax\",\n    \"type\": \"anthropic-compatible\",\n    \"endpoints\": {\n      \"international\": \"https://api.minimax.io/anthropic\",\n      \"china\": \"https://api.minimaxi.com/anthropic\"\n    },\n    \"default_endpoint\": \"international\",\n    \"models\": [\"MiniMax-M2.1\"],\n    \"default_model\": \"MiniMax-M2.1\"\n  }\n}\n</code></pre>"},{"location":"reference/api/#usage","title":"Usage","text":""},{"location":"reference/api/#get-usage-statistics","title":"Get Usage Statistics","text":"<pre><code>GET /api/usage\n</code></pre> <p>Query Parameters:</p> Parameter Type Description <code>period</code> string Time period: today, yesterday, week, month, 7d, 30d, all <code>profile</code> string Filter by profile alias <code>model</code> string Filter by model <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"period\": \"This week\",\n    \"total_tokens\": {\n      \"input_tokens\": 125000,\n      \"output_tokens\": 45000,\n      \"cache_creation_input_tokens\": 10000,\n      \"cache_read_input_tokens\": 50000\n    },\n    \"total_cost\": {\n      \"input_cost\": 0.375,\n      \"output_cost\": 0.675,\n      \"cache_creation_cost\": 0.0375,\n      \"cache_read_cost\": 0.015,\n      \"total_cost\": 1.1025\n    },\n    \"total_sessions\": 42,\n    \"total_runtime_secs\": 3600,\n    \"aggregates\": {\n      \"by_profile\": {\n        \"work-claude\": {\n          \"profile\": \"work-claude\",\n          \"tokens\": {\n            \"input_tokens\": 80000,\n            \"output_tokens\": 30000\n          },\n          \"cost\": {\n            \"total_cost\": 0.75\n          },\n          \"sessions\": 30,\n          \"runtime_secs\": 2400,\n          \"last_used\": \"2026-01-20T10:30:00Z\"\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"reference/api/#import-claude-data","title":"Import Claude Data","text":"<pre><code>POST /api/usage/import-claude\n</code></pre> <p>Query Parameters:</p> Parameter Type Description <code>claude_dir</code> string Path to .claude directory (optional) <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": \"Imported 125000 input tokens, 45000 output tokens from stats-cache.json. Found 42 session entries from JSONL files\"\n}\n</code></pre>"},{"location":"reference/api/#proxy","title":"Proxy","text":""},{"location":"reference/api/#get-proxy-status","title":"Get Proxy Status","text":"<pre><code>GET /api/proxy/status\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"profile\": \"work\",\n      \"port\": 8081,\n      \"pid\": 12345,\n      \"status\": \"running\",\n      \"restarts\": 0,\n      \"started_at\": \"2026-01-18T10:30:00Z\"\n    }\n  ]\n}\n</code></pre>"},{"location":"reference/api/#get-proxy-status-for-profile","title":"Get Proxy Status for Profile","text":"<pre><code>GET /api/proxy/status/{alias}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"profile\": \"work\",\n    \"enabled\": true,\n    \"port\": 8081,\n    \"pid\": 12345,\n    \"status\": \"running\"\n  }\n}\n</code></pre>"},{"location":"reference/api/#start-proxy","title":"Start Proxy","text":"<pre><code>POST /api/proxy/{alias}/start\n</code></pre>"},{"location":"reference/api/#stop-proxy","title":"Stop Proxy","text":"<pre><code>POST /api/proxy/{alias}/stop\n</code></pre>"},{"location":"reference/api/#registry","title":"Registry","text":""},{"location":"reference/api/#get-registry-status","title":"Get Registry Status","text":"<pre><code>GET /api/registry\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"channel\": \"stable\",\n    \"commit\": \"f4a12c3\",\n    \"last_sync\": \"2026-01-08T10:00:00Z\",\n    \"cached\": true\n  }\n}\n</code></pre>"},{"location":"reference/api/#sync-registry","title":"Sync Registry","text":"<pre><code>POST /api/registry/sync\n</code></pre> <p>Query Parameters:</p> Parameter Type Description <code>force</code> boolean Force refresh"},{"location":"reference/api/#daemon","title":"Daemon","text":""},{"location":"reference/api/#get-daemon-status","title":"Get Daemon Status","text":"<pre><code>GET /api/daemon/status\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"status\": \"running\",\n    \"pid\": 12345,\n    \"uptime_secs\": 3600,\n    \"version\": \"0.1.0\",\n    \"profiles_count\": 5,\n    \"active_proxies\": 2\n  }\n}\n</code></pre>"},{"location":"reference/api/#terminal-sessions","title":"Terminal Sessions","text":"<p>Terminal sessions allow running agents in a PTY (pseudo-terminal) within the daemon, accessible via WebSocket for real-time interaction through the web UI or other clients.</p>"},{"location":"reference/api/#list-terminal-sessions","title":"List Terminal Sessions","text":"<pre><code>GET /api/terminal/sessions\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"46e15057-abbb-42cd-ad0e-52471a76ef9f\",\n      \"profile_alias\": \"my-project\",\n      \"state\": \"running\",\n      \"created_at\": \"2026-01-22T00:22:45Z\",\n      \"pid\": 12345,\n      \"cols\": 80,\n      \"rows\": 24,\n      \"client_count\": 1\n    }\n  ]\n}\n</code></pre>"},{"location":"reference/api/#get-terminal-session","title":"Get Terminal Session","text":"<pre><code>GET /api/terminal/sessions/{session_id}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"46e15057-abbb-42cd-ad0e-52471a76ef9f\",\n    \"profile_alias\": \"my-project\",\n    \"state\": \"running\",\n    \"created_at\": \"2026-01-22T00:22:45Z\",\n    \"pid\": 12345,\n    \"cols\": 80,\n    \"rows\": 24,\n    \"client_count\": 1\n  }\n}\n</code></pre>"},{"location":"reference/api/#create-terminal-session","title":"Create Terminal Session","text":"<pre><code>POST /api/terminal/sessions\nContent-Type: application/json\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"profile_alias\": \"my-project\",\n  \"args\": [\"--dangerously-skip-permissions\"],\n  \"cols\": 80,\n  \"rows\": 24,\n  \"working_dir\": \"/home/user/code\"\n}\n</code></pre> Field Type Required Description <code>profile_alias</code> string Yes Profile to run <code>args</code> string[] No Additional arguments for the agent <code>cols</code> number No Terminal columns (default: 80) <code>rows</code> number No Terminal rows (default: 24) <code>working_dir</code> string No Working directory (default: profile home) <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"session_id\": \"46e15057-abbb-42cd-ad0e-52471a76ef9f\",\n    \"ws_url\": \"/ws/terminal/46e15057-abbb-42cd-ad0e-52471a76ef9f\"\n  }\n}\n</code></pre>"},{"location":"reference/api/#terminate-terminal-session","title":"Terminate Terminal Session","text":"<pre><code>DELETE /api/terminal/sessions/{session_id}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true\n}\n</code></pre>"},{"location":"reference/api/#cleanup-terminated-sessions","title":"Cleanup Terminated Sessions","text":"<p>Remove terminated sessions from the list.</p> <pre><code>POST /api/terminal/cleanup\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true\n}\n</code></pre>"},{"location":"reference/api/#terminal-websocket","title":"Terminal WebSocket","text":"<p>Connect to a terminal session for real-time I/O.</p> <pre><code>WebSocket: ws://127.0.0.1:8765/ws/terminal/{session_id}\n</code></pre> <p>Client Messages:</p> <ul> <li>Binary: Raw terminal input (keystrokes)</li> <li>JSON: Control messages</li> </ul> <pre><code>// Resize terminal\n{ \"type\": \"resize\", \"cols\": 120, \"rows\": 40 }\n\n// Send signal (e.g., SIGINT=2)\n{ \"type\": \"signal\", \"signal\": 2 }\n</code></pre> <p>Server Messages:</p> <ul> <li>Binary: Raw terminal output</li> <li>JSON: Control messages</li> </ul> <pre><code>// Connected successfully\n{ \"type\": \"connected\", \"session_id\": \"...\" }\n\n// State changed\n{ \"type\": \"state_changed\", \"state\": \"terminated\", \"exit_code\": 0 }\n\n// Error\n{ \"type\": \"error\", \"message\": \"Session not found\" }\n</code></pre> <p>Features:</p> <ul> <li>When connecting, the server sends the full scrollback buffer (terminal history)</li> <li>Multiple clients can connect to the same session</li> <li>Terminal output is broadcast to all connected clients</li> </ul>"},{"location":"reference/api/#web-ui","title":"Web UI","text":"<p>The daemon also serves a web UI at the root path:</p> <pre><code>GET /\n</code></pre> <p>This provides a browser-based interface for:</p> <ul> <li>Viewing profiles</li> <li>Monitoring usage</li> <li>Managing proxy configurations</li> <li>Viewing logs</li> </ul>"},{"location":"reference/api/#error-codes","title":"Error Codes","text":"HTTP Status Description 200 Success 400 Bad request (invalid parameters) 404 Resource not found 409 Conflict (e.g., profile already exists) 500 Internal server error <p>Error Response:</p> <pre><code>{\n  \"success\": false,\n  \"error\": \"Profile 'my-project' not found\"\n}\n</code></pre>"},{"location":"reference/cli/","title":"CLI Reference","text":"<p>Complete reference for all <code>ringlet</code> commands.</p>"},{"location":"reference/cli/#global-options","title":"Global Options","text":"<pre><code>ringlet [OPTIONS] &lt;COMMAND&gt;\n</code></pre> Option Description <code>--log-level &lt;LEVEL&gt;</code> Set log level (error, warn, info, debug, trace) <code>--json</code> Output in JSON format <code>-h, --help</code> Print help information <code>-V, --version</code> Print version information"},{"location":"reference/cli/#init","title":"init","text":"<p>Interactive setup wizard for new users.</p> <pre><code>ringlet init [OPTIONS]\n</code></pre> Option Description <code>--skip-daemon</code> Skip daemon connection check <code>--no-profile</code> Skip profile creation <code>-y, --yes</code> Accept defaults without prompting <code>--json</code> Output in JSON format <p>The init wizard will:</p> <ol> <li>Check daemon connectivity</li> <li>Detect installed agents and their versions</li> <li>Display available providers</li> <li>Guide you through creating your first profile</li> </ol> <p>Example:</p> <pre><code>$ ringlet init\n\nWelcome to Ringlet!\nThis wizard will help you get started with managing coding agents.\n\nChecking daemon connection... connected.\n\nDetecting installed agents...\n\nInstalled agents:\n  [x] Claude Code (1.0.23)\n\nNot installed:\n  [ ] Grok CLI\n  [ ] Codex CLI\n\nAvailable providers:\n  - self: Agent's Own Auth\n  - anthropic: Anthropic API (requires API key)\n  - minimax: MiniMax API (requires API key)\n  - openrouter: OpenRouter (requires API key)\n\nWould you like to create your first profile? [Y/n] y\n\n--- Create Your First Profile ---\n\nSelect an agent: Claude Code (1.0.23)\nSelect a provider: self - Agent's Own Auth\nProfile alias: my-project\n\nProfile 'my-project' created successfully!\n\nRun it with: ringlet profiles run my-project\n\n==================================================\nSetup complete!\n\nNext steps:\n  ringlet profiles list        View your profiles\n  ringlet profiles run &lt;alias&gt; Run an agent session\n  ringlet --help               See all available commands\n</code></pre>"},{"location":"reference/cli/#agents","title":"agents","text":"<p>Discover and manage AI coding agents.</p>"},{"location":"reference/cli/#agents-list","title":"agents list","text":"<p>List all detected agents.</p> <pre><code>ringlet agents list [OPTIONS]\n</code></pre> Option Description <code>--json</code> Output as JSON <p>Example:</p> <pre><code>$ ringlet agents list\nID          Name         Installed   Version    Profiles\nclaude      Claude Code  Yes         1.0.0      3\ncodex       Codex CLI    Yes         0.5.0      1\ngrok        Grok CLI     No          -          0\n</code></pre>"},{"location":"reference/cli/#agents-inspect","title":"agents inspect","text":"<p>Show detailed information about an agent.</p> <pre><code>ringlet agents inspect &lt;AGENT_ID&gt;\n</code></pre> <p>Example:</p> <pre><code>$ ringlet agents inspect claude\nID: claude\nName: Claude Code\nBinary: claude\nVersion: 1.0.0\nBinary Path: /usr/local/bin/claude\nProfile Strategy: home-wrapper\nProfile Home: ~/.claude-profiles/{alias}\nSupports Hooks: Yes\nDefault Model: claude-sonnet-4\n</code></pre>"},{"location":"reference/cli/#providers","title":"providers","text":"<p>Manage API providers.</p>"},{"location":"reference/cli/#providers-list","title":"providers list","text":"<p>List all available providers.</p> <pre><code>ringlet providers list [OPTIONS]\n</code></pre> Option Description <code>--json</code> Output as JSON <p>Example:</p> <pre><code>$ ringlet providers list\nID          Name        Type                 Default Model\nanthropic   Anthropic   anthropic            claude-sonnet-4\nminimax     MiniMax     anthropic-compatible MiniMax-M2.1\nopenai      OpenAI      openai               gpt-4o\nopenrouter  OpenRouter  openai-compatible    auto\n</code></pre>"},{"location":"reference/cli/#providers-inspect","title":"providers inspect","text":"<p>Show detailed information about a provider.</p> <pre><code>ringlet providers inspect &lt;PROVIDER_ID&gt;\n</code></pre> <p>Example:</p> <pre><code>$ ringlet providers inspect minimax\nID: minimax\nName: MiniMax\nType: anthropic-compatible\nEndpoints:\n  international: https://api.minimax.io/anthropic (default)\n  china: https://api.minimaxi.com/anthropic\nAuth: MINIMAX_API_KEY\nModels: MiniMax-M2.1\n</code></pre>"},{"location":"reference/cli/#profiles","title":"profiles","text":"<p>Create, manage, and run profiles.</p>"},{"location":"reference/cli/#profiles-create","title":"profiles create","text":"<p>Create a new profile.</p> <pre><code>ringlet profiles create &lt;AGENT_ID&gt; &lt;ALIAS&gt; [OPTIONS]\n</code></pre> Option Description <code>-p, --provider &lt;ID&gt;</code> Provider to use (required) <code>--endpoint &lt;ID&gt;</code> Specific endpoint for multi-region providers <code>--model &lt;MODEL&gt;</code> Override default model <code>--hooks &lt;LIST&gt;</code> Enable hooks (comma-separated) <code>--mcp &lt;LIST&gt;</code> Enable MCP servers (comma-separated) <code>--bare</code> Create minimal profile without defaults <code>--proxy</code> Enable request routing proxy <code>--template &lt;NAME&gt;</code> Use a registry template <code>--dry-run</code> Show what would be created without creating <p>Examples:</p> <pre><code># Basic profile\nringlet profiles create claude my-project --provider anthropic\n\n# With specific endpoint and model\nringlet profiles create claude china-work --provider minimax --endpoint china --model MiniMax-M2.1\n\n# With hooks and MCP servers\nringlet profiles create claude dev --provider anthropic --hooks auto_format --mcp filesystem,github\n\n# With proxy enabled\nringlet profiles create claude smart --provider anthropic --proxy\n</code></pre>"},{"location":"reference/cli/#profiles-list","title":"profiles list","text":"<p>List all profiles.</p> <pre><code>ringlet profiles list [OPTIONS]\n</code></pre> Option Description <code>--agent &lt;ID&gt;</code> Filter by agent <code>--json</code> Output as JSON <p>Example:</p> <pre><code>$ ringlet profiles list\nAlias              Provider    Endpoint       Model            Last Used\nwork-anthropic     anthropic   default        claude-sonnet-4  2026-01-08T11:23:51Z\nwork-minimax       minimax     international  MiniMax-M2.1     2026-01-08T09:18:12Z\n</code></pre>"},{"location":"reference/cli/#profiles-inspect","title":"profiles inspect","text":"<p>Show profile details.</p> <pre><code>ringlet profiles inspect &lt;ALIAS&gt;\n</code></pre> <p>Example:</p> <pre><code>$ ringlet profiles inspect work-minimax\nAlias: work-minimax\nAgent: claude\nProvider: minimax\nEndpoint: international\nModel: MiniMax-M2.1\nCreated: 2026-01-05T10:00:00Z\nLast Used: 2026-01-08T09:18:12Z\nProfile Home: ~/.claude-profiles/work-minimax\nAPI Key: ****...****\n</code></pre>"},{"location":"reference/cli/#profiles-run","title":"profiles run","text":"<p>Run a profile.</p> <pre><code>ringlet profiles run &lt;ALIAS&gt; [OPTIONS] [-- &lt;AGENT_ARGS&gt;...]\n</code></pre> Option Description <code>--remote</code> Run in daemon with PTY (enables web terminal access) <code>--cols &lt;N&gt;</code> Terminal columns (default: 80, only with --remote) <code>--rows &lt;N&gt;</code> Terminal rows (default: 24, only with --remote) <code>--no-sandbox</code> Disable sandboxing (remote sessions are sandboxed by default) <code>--bwrap-flags &lt;FLAGS&gt;</code> Custom bwrap flags (Linux only, comma-separated) <p>Sandboxing (Remote Sessions):</p> <p>Remote terminal sessions are sandboxed by default for security:</p> <ul> <li>Linux: Uses bwrap (bubblewrap)</li> <li>macOS: Uses sandbox-exec</li> <li>Windows: No sandboxing available</li> </ul> <p>The default sandbox allows:</p> <ul> <li>Read-only access to system directories (<code>/usr</code>, <code>/bin</code>, <code>/lib</code>, <code>/etc</code>)</li> <li>Read-write access to home directory, working directory, and <code>/tmp</code></li> <li>Network access (required for API calls)</li> </ul> <p>Examples:</p> <pre><code># Basic run (foreground)\nringlet profiles run my-project\n\n# With additional agent arguments\nringlet profiles run my-project -- /path/to/code --verbose\n\n# Run as remote terminal session (accessible via web UI)\nringlet profiles run my-project --remote\n\n# Remote session without sandbox (full system access)\nringlet profiles run my-project --remote --no-sandbox\n\n# Remote session with custom bwrap flags (Linux only)\nringlet profiles run my-project --remote --bwrap-flags=\"--unshare-net\"\n\n# Custom bwrap with multiple flags\nringlet profiles run my-project --remote --bwrap-flags=\"--unshare-net,--ro-bind /data /data\"\n</code></pre>"},{"location":"reference/cli/#profiles-delete","title":"profiles delete","text":"<p>Delete a profile.</p> <pre><code>ringlet profiles delete &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#profiles-env","title":"profiles env","text":"<p>Export profile environment variables.</p> <pre><code>ringlet profiles env &lt;ALIAS&gt;\n</code></pre> <p>Example:</p> <pre><code>eval \"$(ringlet profiles env my-project)\"\nclaude  # Now uses the profile's configuration\n</code></pre>"},{"location":"reference/cli/#terminal","title":"terminal","text":"<p>Manage remote terminal sessions. Terminal sessions allow you to run agents in the daemon and access them through the web UI or CLI.</p> <p>Sandboxing</p> <p>Terminal sessions are sandboxed by default for security. Use <code>--no-sandbox</code> when creating sessions via <code>ringlet profiles run --remote</code> if you need full system access. See the Terminal Guide for details.</p>"},{"location":"reference/cli/#terminal-list","title":"terminal list","text":"<p>List all terminal sessions.</p> <pre><code>ringlet terminal list\n</code></pre> <p>Example:</p> <pre><code>$ ringlet terminal list\nSESSION ID                            PROFILE          STATE       CLIENTS\n--------------------------------------------------------------------------------\n46e15057-abbb-42cd-ad0e-52471a76ef9f  my-project       running     1\n</code></pre>"},{"location":"reference/cli/#terminal-info","title":"terminal info","text":"<p>Show detailed information about a session.</p> <pre><code>ringlet terminal info &lt;SESSION_ID&gt;\n</code></pre> <p>Example:</p> <pre><code>$ ringlet terminal info 46e15057-abbb-42cd-ad0e-52471a76ef9f\nSession ID: 46e15057-abbb-42cd-ad0e-52471a76ef9f\nProfile: my-project\nState: running\nPID: 12345\nSize: 80x24\nClients: 1\nCreated: 2026-01-22T00:22:45Z\n</code></pre>"},{"location":"reference/cli/#terminal-kill","title":"terminal kill","text":"<p>Terminate a terminal session.</p> <pre><code>ringlet terminal kill &lt;SESSION_ID&gt;\n</code></pre>"},{"location":"reference/cli/#terminal-attach","title":"terminal attach","text":"<p>Attach to a terminal session from the CLI (not yet implemented - use web UI).</p> <pre><code>ringlet terminal attach &lt;SESSION_ID&gt;\n</code></pre>"},{"location":"reference/cli/#aliases","title":"aliases","text":"<p>Manage shell aliases for quick profile access.</p>"},{"location":"reference/cli/#aliases-install","title":"aliases install","text":"<p>Install a shell alias for a profile.</p> <pre><code>ringlet aliases install &lt;ALIAS&gt;\n</code></pre> <p>Example:</p> <pre><code>ringlet aliases install my-project\n# Now you can run: my-project\n</code></pre>"},{"location":"reference/cli/#aliases-uninstall","title":"aliases uninstall","text":"<p>Remove a shell alias.</p> <pre><code>ringlet aliases uninstall &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#aliases-list","title":"aliases list","text":"<p>List installed aliases.</p> <pre><code>ringlet aliases list\n</code></pre>"},{"location":"reference/cli/#proxy","title":"proxy","text":"<p>Manage proxy instances for request routing.</p>"},{"location":"reference/cli/#proxy-enable","title":"proxy enable","text":"<p>Enable proxy for a profile.</p> <pre><code>ringlet proxy enable &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-disable","title":"proxy disable","text":"<p>Disable proxy for a profile.</p> <pre><code>ringlet proxy disable &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-start","title":"proxy start","text":"<p>Start a proxy instance.</p> <pre><code>ringlet proxy start &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-stop","title":"proxy stop","text":"<p>Stop a proxy instance.</p> <pre><code>ringlet proxy stop &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-stop-all","title":"proxy stop-all","text":"<p>Stop all proxy instances.</p> <pre><code>ringlet proxy stop-all\n</code></pre>"},{"location":"reference/cli/#proxy-restart","title":"proxy restart","text":"<p>Restart a proxy instance.</p> <pre><code>ringlet proxy restart &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-status","title":"proxy status","text":"<p>Show proxy status.</p> <pre><code>ringlet proxy status [ALIAS]\n</code></pre>"},{"location":"reference/cli/#proxy-config","title":"proxy config","text":"<p>Show proxy configuration.</p> <pre><code>ringlet proxy config &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-logs","title":"proxy logs","text":"<p>View proxy logs.</p> <pre><code>ringlet proxy logs &lt;ALIAS&gt; [OPTIONS]\n</code></pre> Option Description <code>--lines &lt;N&gt;</code> Number of lines to show (default: 50)"},{"location":"reference/cli/#proxy-route-add","title":"proxy route add","text":"<p>Add a routing rule.</p> <pre><code>ringlet proxy route add &lt;ALIAS&gt; &lt;NAME&gt; &lt;CONDITION&gt; &lt;TARGET&gt; [OPTIONS]\n</code></pre> Option Description <code>--priority &lt;N&gt;</code> Rule priority (higher = checked first) <p>Examples:</p> <pre><code>ringlet proxy route add work \"long-context\" \"tokens &gt; 100000\" \"minimax/claude-3-sonnet\" --priority 10\nringlet proxy route add work \"default\" \"always\" \"anthropic/claude-sonnet-4\"\n</code></pre>"},{"location":"reference/cli/#proxy-route-list","title":"proxy route list","text":"<p>List routing rules.</p> <pre><code>ringlet proxy route list &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-route-remove","title":"proxy route remove","text":"<p>Remove a routing rule.</p> <pre><code>ringlet proxy route remove &lt;ALIAS&gt; &lt;NAME&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-alias-set","title":"proxy alias set","text":"<p>Set a model alias.</p> <pre><code>ringlet proxy alias set &lt;ALIAS&gt; &lt;FROM_MODEL&gt; &lt;TO_TARGET&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-alias-list","title":"proxy alias list","text":"<p>List model aliases.</p> <pre><code>ringlet proxy alias list &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#proxy-alias-remove","title":"proxy alias remove","text":"<p>Remove a model alias.</p> <pre><code>ringlet proxy alias remove &lt;ALIAS&gt; &lt;FROM_MODEL&gt;\n</code></pre>"},{"location":"reference/cli/#hooks","title":"hooks","text":"<p>Manage profile hooks.</p>"},{"location":"reference/cli/#hooks-add","title":"hooks add","text":"<p>Add a hook to a profile.</p> <pre><code>ringlet hooks add &lt;ALIAS&gt; &lt;EVENT&gt; &lt;MATCHER&gt; &lt;COMMAND&gt;\n</code></pre> Parameter Description <code>ALIAS</code> Profile alias <code>EVENT</code> Event type: PreToolUse, PostToolUse, Notification, Stop <code>MATCHER</code> Tool pattern (e.g., \"Bash|Write\" or \"*\") <code>COMMAND</code> Shell command to execute <p>Example:</p> <pre><code>ringlet hooks add myprofile PreToolUse \"Bash\" \"echo 'Running: $EVENT' &gt;&gt; /tmp/ringlet.log\"\n</code></pre>"},{"location":"reference/cli/#hooks-list","title":"hooks list","text":"<p>List hooks for a profile.</p> <pre><code>ringlet hooks list &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#hooks-remove","title":"hooks remove","text":"<p>Remove a hook.</p> <pre><code>ringlet hooks remove &lt;ALIAS&gt; &lt;EVENT&gt; &lt;INDEX&gt;\n</code></pre>"},{"location":"reference/cli/#hooks-import","title":"hooks import","text":"<p>Import hooks from a file.</p> <pre><code>ringlet hooks import &lt;ALIAS&gt; &lt;FILE&gt;\n</code></pre>"},{"location":"reference/cli/#hooks-export","title":"hooks export","text":"<p>Export hooks to JSON.</p> <pre><code>ringlet hooks export &lt;ALIAS&gt;\n</code></pre>"},{"location":"reference/cli/#usage","title":"usage","text":"<p>Track token usage and costs.</p>"},{"location":"reference/cli/#usage-default","title":"usage (default)","text":"<p>Show usage summary.</p> <pre><code>ringlet usage [OPTIONS]\n</code></pre> Option Description <code>--period &lt;PERIOD&gt;</code> Time period: today, yesterday, week, month, 7d, 30d, all <code>--profile &lt;ALIAS&gt;</code> Filter by profile <code>--model &lt;MODEL&gt;</code> Filter by model <p>Example:</p> <pre><code>$ ringlet usage --period week\nUsage Summary (This Week)\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nTotal Tokens: 125,000\n  Input:       80,000\n  Output:      45,000\n\nEstimated Cost: $1.10\n</code></pre>"},{"location":"reference/cli/#usage-daily","title":"usage daily","text":"<p>Show daily breakdown.</p> <pre><code>ringlet usage daily [OPTIONS]\n</code></pre> Option Description <code>--period &lt;PERIOD&gt;</code> Time period"},{"location":"reference/cli/#usage-models","title":"usage models","text":"<p>Show usage by model.</p> <pre><code>ringlet usage models\n</code></pre>"},{"location":"reference/cli/#usage-profiles","title":"usage profiles","text":"<p>Show usage by profile.</p> <pre><code>ringlet usage profiles\n</code></pre>"},{"location":"reference/cli/#usage-export","title":"usage export","text":"<p>Export usage data.</p> <pre><code>ringlet usage export [OPTIONS]\n</code></pre> Option Description <code>--format &lt;FORMAT&gt;</code> Output format: json, csv <code>--period &lt;PERIOD&gt;</code> Time period"},{"location":"reference/cli/#usage-import-claude","title":"usage import-claude","text":"<p>Import usage data from Claude Code.</p> <pre><code>ringlet usage import-claude [OPTIONS]\n</code></pre> Option Description <code>--claude-dir &lt;PATH&gt;</code> Path to .claude directory"},{"location":"reference/cli/#registry","title":"registry","text":"<p>Manage the GitHub-based registry.</p>"},{"location":"reference/cli/#registry-sync","title":"registry sync","text":"<p>Synchronize registry metadata.</p> <pre><code>ringlet registry sync [OPTIONS]\n</code></pre> Option Description <code>--force</code> Force refresh even if cached <code>--offline</code> Use cached data only"},{"location":"reference/cli/#registry-inspect","title":"registry inspect","text":"<p>Show registry status.</p> <pre><code>ringlet registry inspect\n</code></pre>"},{"location":"reference/cli/#registry-pin","title":"registry pin","text":"<p>Pin to a specific version.</p> <pre><code>ringlet registry pin &lt;REF&gt;\n</code></pre>"},{"location":"reference/cli/#daemon","title":"daemon","text":"<p>Manage the background daemon.</p>"},{"location":"reference/cli/#daemon-status","title":"daemon status","text":"<p>Show daemon status.</p> <pre><code>ringlet daemon status\n</code></pre>"},{"location":"reference/cli/#daemon-start","title":"daemon start","text":"<p>Start the daemon.</p> <pre><code>ringlet daemon start [OPTIONS]\n</code></pre> Option Description <code>--stay-alive</code> Keep running indefinitely"},{"location":"reference/cli/#daemon-stop","title":"daemon stop","text":"<p>Stop the daemon.</p> <pre><code>ringlet daemon stop\n</code></pre>"},{"location":"reference/cli/#scripts","title":"scripts","text":"<p>Manage Rhai configuration scripts.</p>"},{"location":"reference/cli/#scripts-test","title":"scripts test","text":"<p>Test a configuration script.</p> <pre><code>ringlet scripts test &lt;SCRIPT&gt; [OPTIONS]\n</code></pre> Option Description <code>--provider &lt;ID&gt;</code> Provider to use <code>--alias &lt;ALIAS&gt;</code> Profile alias for context"},{"location":"reference/cli/#export-import","title":"export / import","text":"<p>Backup and restore ringlet configuration.</p>"},{"location":"reference/cli/#export","title":"export","text":"<p>Export configuration.</p> <pre><code>ringlet export &gt; backup.json\n</code></pre>"},{"location":"reference/cli/#import","title":"import","text":"<p>Import configuration.</p> <pre><code>ringlet import backup.json\n</code></pre>"},{"location":"reference/configuration/","title":"Configuration Reference","text":"<p>Reference for all configuration files used by Clown.</p>"},{"location":"reference/configuration/#file-locations","title":"File Locations","text":"File Description <code>~/.config/ringlet/config.toml</code> User preferences <code>~/.config/ringlet/profiles/&lt;alias&gt;.json</code> Profile definitions <code>~/.config/ringlet/agents.d/*.toml</code> Custom agent manifests <code>~/.config/ringlet/providers.d/*.toml</code> Custom provider manifests <code>~/.config/ringlet/scripts/*.rhai</code> Custom Rhai scripts <code>~/.config/ringlet/registry/</code> Cached registry data <code>~/.config/ringlet/telemetry/</code> Usage tracking data <p>Platform-Specific Paths</p> <ul> <li>macOS/Linux: <code>~/.config/ringlet/</code></li> <li>Windows: <code>%APPDATA%\\ringlet\\</code></li> </ul>"},{"location":"reference/configuration/#user-configuration","title":"User Configuration","text":""},{"location":"reference/configuration/#configtoml","title":"config.toml","text":"<p>User preferences and defaults.</p> <pre><code># Default provider for new profiles\n[defaults]\nprovider = \"anthropic\"\n\n# Hook preferences\n[hooks]\nauto_format = true\nauto_lint = false\n\n# Custom hooks\n[hooks.custom.PostToolUse]\n[[hooks.custom.PostToolUse]]\nmatcher = \"Write\"\ntype = \"command\"\ncommand = \"echo 'File written'\"\n\n# MCP server preferences\n[mcp_servers]\nfilesystem = true\ngithub = false\ngithub_token = \"\"\n\n# Custom MCP servers\n[mcp_servers.custom.my-server]\ncommand = \"node\"\nargs = [\"./my-mcp.js\"]\n\n# Custom key-value pairs for scripts\n[custom]\nmy_setting = \"value\"\n</code></pre>"},{"location":"reference/configuration/#profile-schema","title":"Profile Schema","text":""},{"location":"reference/configuration/#profilesjson","title":"profiles/.json <p>Profile definition stored as JSON.</p> <pre><code>{\n  \"alias\": \"my-project\",\n  \"agent_id\": \"claude\",\n  \"provider_id\": \"anthropic\",\n  \"endpoint_id\": \"default\",\n  \"model\": \"claude-sonnet-4\",\n  \"env\": {\n    \"ANTHROPIC_MODEL\": \"claude-sonnet-4\"\n  },\n  \"args\": [],\n  \"working_dir\": null,\n  \"metadata\": {\n    \"created_at\": \"2026-01-05T10:00:00Z\",\n    \"last_used\": \"2026-01-08T09:18:12Z\",\n    \"profile_home\": \"~/.claude-profiles/my-project\",\n    \"hooks_config\": {},\n    \"proxy_config\": null\n  }\n}\n</code></pre>","text":""},{"location":"reference/configuration/#field-reference","title":"Field Reference    Field Type Description     <code>alias</code> string Unique profile identifier   <code>agent_id</code> string Agent identifier (e.g., \"claude\")   <code>provider_id</code> string Provider identifier (e.g., \"anthropic\")   <code>endpoint_id</code> string Endpoint for multi-region providers   <code>model</code> string Model identifier   <code>env</code> object Environment variables to inject   <code>args</code> array Additional CLI arguments   <code>working_dir</code> string? Optional working directory   <code>metadata</code> object Profile metadata","text":""},{"location":"reference/configuration/#metadata-fields","title":"Metadata Fields    Field Type Description     <code>created_at</code> string ISO 8601 creation timestamp   <code>last_used</code> string ISO 8601 last used timestamp   <code>profile_home</code> string Path to profile's isolated home   <code>hooks_config</code> object Hook configuration   <code>proxy_config</code> object? Proxy configuration (if enabled)","text":""},{"location":"reference/configuration/#proxy-configuration","title":"Proxy Configuration <pre><code>{\n  \"proxy_config\": {\n    \"enabled\": true,\n    \"port\": null,\n    \"routing\": {\n      \"strategy\": \"Conditional\",\n      \"rules\": [\n        {\n          \"name\": \"long-context\",\n          \"condition\": { \"type\": \"token_count\", \"min\": 50000 },\n          \"target\": \"minimax/claude-3-sonnet\",\n          \"priority\": 10\n        },\n        {\n          \"name\": \"default\",\n          \"condition\": { \"type\": \"always\" },\n          \"target\": \"anthropic/claude-sonnet-4\",\n          \"priority\": 0\n        }\n      ]\n    },\n    \"model_aliases\": {}\n  }\n}\n</code></pre>","text":""},{"location":"reference/configuration/#hooks-configuration","title":"Hooks Configuration <pre><code>{\n  \"hooks_config\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"echo $EVENT\",\n            \"timeout\": 5000\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [],\n    \"Notification\": [],\n    \"Stop\": []\n  }\n}\n</code></pre>","text":""},{"location":"reference/configuration/#agent-manifest","title":"Agent Manifest","text":""},{"location":"reference/configuration/#agentsdtoml","title":"agents.d/.toml <p>Define how Clown interacts with an agent.</p> <pre><code>id = \"claude\"\nname = \"Claude Code\"\nbinary = \"claude\"\nversion_flag = \"--version\"\n\n[detect]\ncommands = [\"claude --version\"]\nfiles = [\"~/.claude/settings.json\"]\n\n[profile]\nstrategy = \"home-wrapper\"\nsource_home = \"~/.claude-profiles/{alias}\"\nscript = \"claude.rhai\"\n\n[models]\ndefault = \"claude-sonnet-4\"\nsupported = [\"claude-sonnet-4\", \"claude-opus-4\"]\n\n[hooks]\ncreate = []\ndelete = []\npre_run = []\npost_run = []\n\nsupports_hooks = true\n</code></pre>","text":""},{"location":"reference/configuration/#field-reference_1","title":"Field Reference    Field Type Description     <code>id</code> string Unique identifier   <code>name</code> string Display name   <code>binary</code> string Executable name   <code>version_flag</code> string Flag to get version   <code>detect.commands</code> array Commands to detect installation   <code>detect.files</code> array Files that indicate installation   <code>profile.strategy</code> string Isolation strategy (home-wrapper)   <code>profile.source_home</code> string Template for profile home path   <code>profile.script</code> string Rhai script for config generation   <code>models.default</code> string Default model   <code>models.supported</code> array List of supported models   <code>supports_hooks</code> boolean Whether agent supports hooks","text":""},{"location":"reference/configuration/#provider-manifest","title":"Provider Manifest","text":""},{"location":"reference/configuration/#providersdtoml","title":"providers.d/.toml <p>Define API backends.</p> <pre><code>id = \"minimax\"\nname = \"MiniMax\"\ntype = \"anthropic-compatible\"\n\n[endpoints]\ninternational = \"https://api.minimax.io/anthropic\"\nchina = \"https://api.minimaxi.com/anthropic\"\ndefault = \"international\"\n\n[auth]\nenv_key = \"MINIMAX_API_KEY\"\nprompt = \"Enter your MiniMax API key\"\n\n[models]\navailable = [\"MiniMax-M2.1\"]\ndefault = \"MiniMax-M2.1\"\n</code></pre>","text":""},{"location":"reference/configuration/#field-reference_2","title":"Field Reference    Field Type Description     <code>id</code> string Unique identifier   <code>name</code> string Display name   <code>type</code> string API compatibility type   <code>endpoints</code> object Named endpoints with URLs   <code>endpoints.default</code> string Default endpoint name   <code>auth.env_key</code> string Environment variable for API key   <code>auth.prompt</code> string Prompt message for API key   <code>models.available</code> array Available models   <code>models.default</code> string Default model","text":""},{"location":"reference/configuration/#provider-types","title":"Provider Types    Type Description     <code>anthropic</code> Native Anthropic API   <code>anthropic-compatible</code> Anthropic-compatible APIs   <code>openai</code> Native OpenAI API   <code>openai-compatible</code> OpenAI-compatible APIs","text":""},{"location":"reference/configuration/#directory-structure","title":"Directory Structure","text":""},{"location":"reference/configuration/#full-layout","title":"Full Layout <pre><code>~/.config/ringlet/\n\u251c\u2500\u2500 config.toml               # User preferences\n\u251c\u2500\u2500 daemon-endpoint           # Active daemon endpoint\n\u251c\u2500\u2500 agents.d/                 # Custom agent manifests\n\u2502   \u2514\u2500\u2500 custom-agent.toml\n\u251c\u2500\u2500 providers.d/              # Custom provider manifests\n\u2502   \u2514\u2500\u2500 custom-provider.toml\n\u251c\u2500\u2500 scripts/                  # Custom Rhai scripts\n\u2502   \u2514\u2500\u2500 claude.rhai\n\u251c\u2500\u2500 profiles/                 # Profile definitions\n\u2502   \u251c\u2500\u2500 my-project.json\n\u2502   \u2514\u2500\u2500 work-claude.json\n\u251c\u2500\u2500 registry/                 # Cached registry data\n\u2502   \u251c\u2500\u2500 current -&gt; commits/f4a12c3\n\u2502   \u251c\u2500\u2500 registry.lock\n\u2502   \u251c\u2500\u2500 litellm-pricing.json\n\u2502   \u2514\u2500\u2500 commits/\n\u2502       \u2514\u2500\u2500 f4a12c3/\n\u2502           \u251c\u2500\u2500 registry.json\n\u2502           \u251c\u2500\u2500 agents/\n\u2502           \u251c\u2500\u2500 providers/\n\u2502           \u251c\u2500\u2500 scripts/\n\u2502           \u2514\u2500\u2500 models/\n\u251c\u2500\u2500 cache/                    # Detection cache\n\u2502   \u2514\u2500\u2500 agent-detections.json\n\u251c\u2500\u2500 telemetry/                # Usage data\n\u2502   \u251c\u2500\u2500 sessions.jsonl\n\u2502   \u2514\u2500\u2500 aggregates.json\n\u2514\u2500\u2500 logs/\n    \u2514\u2500\u2500 ringletd.log\n</code></pre>","text":""},{"location":"reference/configuration/#profile-home-structure","title":"Profile Home Structure <p>When a profile runs, Clown creates an isolated home:</p> <pre><code>~/.claude-profiles/my-project/\n\u251c\u2500\u2500 .claude/\n\u2502   \u251c\u2500\u2500 settings.json         # Agent settings\n\u2502   \u251c\u2500\u2500 hooks.json            # Hook configuration\n\u2502   \u2514\u2500\u2500 history/              # Conversation history\n\u251c\u2500\u2500 .claude.json              # MCP server config\n\u2514\u2500\u2500 .ultrallm/                # Proxy config (if enabled)\n    \u251c\u2500\u2500 config.yaml\n    \u2514\u2500\u2500 logs/\n        \u2514\u2500\u2500 proxy.log\n</code></pre>","text":""},{"location":"reference/configuration/#environment-variables","title":"Environment Variables","text":""},{"location":"reference/configuration/#override-locations","title":"Override Locations    Variable Description     <code>CLOWN_CONFIG_DIR</code> Override config directory   <code>CLOWN_DAEMON_ENDPOINT</code> Override daemon endpoint   <code>CLOWN_REGISTRY_URL</code> Override registry URL   <code>CLOWN_REGISTRY_CHANNEL</code> Override registry channel","text":""},{"location":"reference/configuration/#runtime-variables","title":"Runtime Variables <p>These are injected when running a profile:</p>    Variable Description     <code>HOME</code> Set to profile home for isolation   <code>ANTHROPIC_BASE_URL</code> API endpoint (Anthropic agents)   <code>ANTHROPIC_AUTH_TOKEN</code> API key (Anthropic agents)   <code>ANTHROPIC_MODEL</code> Model identifier","text":""},{"location":"reference/configuration/#telemetry-data","title":"Telemetry Data","text":""},{"location":"reference/configuration/#sessionsjsonl","title":"sessions.jsonl <p>Per-session records (JSON Lines format):</p> <pre><code>{\"profile\":\"my-project\",\"model\":\"claude-sonnet-4\",\"started_at\":\"2026-01-08T10:00:00Z\",\"ended_at\":\"2026-01-08T10:30:00Z\",\"tokens\":{\"input\":5000,\"output\":2000,\"cache_creation\":1000,\"cache_read\":500},\"cost\":{\"input\":0.015,\"output\":0.030,\"total\":0.045}}\n</code></pre>","text":""},{"location":"reference/configuration/#aggregatesjson","title":"aggregates.json <p>Rolled-up statistics:</p> <pre><code>{\n  \"by_profile\": {\n    \"my-project\": {\n      \"total_tokens\": 125000,\n      \"total_cost\": 1.10,\n      \"sessions\": 42,\n      \"last_used\": \"2026-01-08T10:30:00Z\"\n    }\n  },\n  \"by_model\": {\n    \"claude-sonnet-4\": {\n      \"total_tokens\": 100000,\n      \"total_cost\": 0.90\n    }\n  }\n}\n</code></pre>","text":""},{"location":"reference/events/","title":"WebSocket Events Reference","text":"<p>The Clown daemon publishes real-time events over WebSocket connections, enabling live updates in UI clients and CLI watch modes.</p>"},{"location":"reference/events/#overview","title":"Overview","text":"<p>Events are published when:</p> <ul> <li>Profiles are created, updated, or deleted</li> <li>Agents are detected or updated</li> <li>Registry is synced</li> <li>Proxy instances start or stop</li> <li>Usage statistics are updated</li> </ul>"},{"location":"reference/events/#connection","title":"Connection","text":"<pre><code>ws://127.0.0.1:8765/ws\n</code></pre>"},{"location":"reference/events/#message-format","title":"Message Format","text":"<p>All events are JSON objects:</p> <pre><code>{\n  \"type\": \"event_type\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": { ... }\n}\n</code></pre>"},{"location":"reference/events/#profile-events","title":"Profile Events","text":""},{"location":"reference/events/#profilecreated","title":"ProfileCreated","text":"<p>Emitted when a new profile is created.</p> <pre><code>{\n  \"type\": \"ProfileCreated\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"alias\": \"my-project\",\n    \"agent_id\": \"claude\",\n    \"provider_id\": \"anthropic\",\n    \"model\": \"claude-sonnet-4\"\n  }\n}\n</code></pre>"},{"location":"reference/events/#profileupdated","title":"ProfileUpdated","text":"<p>Emitted when a profile is modified.</p> <pre><code>{\n  \"type\": \"ProfileUpdated\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"alias\": \"my-project\",\n    \"changes\": [\"model\", \"hooks_config\"]\n  }\n}\n</code></pre>"},{"location":"reference/events/#profiledeleted","title":"ProfileDeleted","text":"<p>Emitted when a profile is deleted.</p> <pre><code>{\n  \"type\": \"ProfileDeleted\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"alias\": \"my-project\"\n  }\n}\n</code></pre>"},{"location":"reference/events/#profilestarted","title":"ProfileStarted","text":"<p>Emitted when a profile starts running.</p> <pre><code>{\n  \"type\": \"ProfileStarted\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"alias\": \"my-project\",\n    \"pid\": 12345\n  }\n}\n</code></pre>"},{"location":"reference/events/#profilestopped","title":"ProfileStopped","text":"<p>Emitted when a profile stops running.</p> <pre><code>{\n  \"type\": \"ProfileStopped\",\n  \"timestamp\": \"2026-01-08T10:45:00Z\",\n  \"data\": {\n    \"alias\": \"my-project\",\n    \"exit_code\": 0,\n    \"runtime_secs\": 900\n  }\n}\n</code></pre>"},{"location":"reference/events/#agent-events","title":"Agent Events","text":""},{"location":"reference/events/#agentdetected","title":"AgentDetected","text":"<p>Emitted when an agent is detected on the system.</p> <pre><code>{\n  \"type\": \"AgentDetected\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"id\": \"claude\",\n    \"name\": \"Claude Code\",\n    \"version\": \"1.0.0\",\n    \"binary_path\": \"/usr/local/bin/claude\"\n  }\n}\n</code></pre>"},{"location":"reference/events/#agentupdated","title":"AgentUpdated","text":"<p>Emitted when an agent's detection info changes.</p> <pre><code>{\n  \"type\": \"AgentUpdated\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"id\": \"claude\",\n    \"old_version\": \"0.9.0\",\n    \"new_version\": \"1.0.0\"\n  }\n}\n</code></pre>"},{"location":"reference/events/#registry-events","title":"Registry Events","text":""},{"location":"reference/events/#registrysyncstarted","title":"RegistrySyncStarted","text":"<p>Emitted when registry sync begins.</p> <pre><code>{\n  \"type\": \"RegistrySyncStarted\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"channel\": \"stable\",\n    \"force\": false\n  }\n}\n</code></pre>"},{"location":"reference/events/#registrysynccompleted","title":"RegistrySyncCompleted","text":"<p>Emitted when registry sync completes.</p> <pre><code>{\n  \"type\": \"RegistrySyncCompleted\",\n  \"timestamp\": \"2026-01-08T10:30:05Z\",\n  \"data\": {\n    \"channel\": \"stable\",\n    \"commit\": \"f4a12c3\",\n    \"from_cache\": false,\n    \"artifacts_downloaded\": 5\n  }\n}\n</code></pre>"},{"location":"reference/events/#registrysyncfailed","title":"RegistrySyncFailed","text":"<p>Emitted when registry sync fails.</p> <pre><code>{\n  \"type\": \"RegistrySyncFailed\",\n  \"timestamp\": \"2026-01-08T10:30:05Z\",\n  \"data\": {\n    \"error\": \"Network timeout\"\n  }\n}\n</code></pre>"},{"location":"reference/events/#proxy-events","title":"Proxy Events","text":""},{"location":"reference/events/#proxystarted","title":"ProxyStarted","text":"<p>Emitted when a proxy instance starts.</p> <pre><code>{\n  \"type\": \"ProxyStarted\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"profile\": \"work\",\n    \"port\": 8081,\n    \"pid\": 12345\n  }\n}\n</code></pre>"},{"location":"reference/events/#proxystopped","title":"ProxyStopped","text":"<p>Emitted when a proxy instance stops.</p> <pre><code>{\n  \"type\": \"ProxyStopped\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"profile\": \"work\",\n    \"exit_code\": 0\n  }\n}\n</code></pre>"},{"location":"reference/events/#proxyerror","title":"ProxyError","text":"<p>Emitted when a proxy encounters an error.</p> <pre><code>{\n  \"type\": \"ProxyError\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"profile\": \"work\",\n    \"error\": \"Port already in use\"\n  }\n}\n</code></pre>"},{"location":"reference/events/#usage-events","title":"Usage Events","text":""},{"location":"reference/events/#usageupdated","title":"UsageUpdated","text":"<p>Emitted when usage statistics are updated.</p> <pre><code>{\n  \"type\": \"UsageUpdated\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"profile\": \"my-project\",\n    \"tokens\": {\n      \"input_tokens\": 5000,\n      \"output_tokens\": 2000\n    },\n    \"cost\": {\n      \"total_cost\": 0.045\n    }\n  }\n}\n</code></pre>"},{"location":"reference/events/#usageimported","title":"UsageImported","text":"<p>Emitted when usage data is imported.</p> <pre><code>{\n  \"type\": \"UsageImported\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"source\": \"claude\",\n    \"records_imported\": 42\n  }\n}\n</code></pre>"},{"location":"reference/events/#daemon-events","title":"Daemon Events","text":""},{"location":"reference/events/#daemonstarted","title":"DaemonStarted","text":"<p>Emitted when the daemon starts.</p> <pre><code>{\n  \"type\": \"DaemonStarted\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"version\": \"0.1.0\",\n    \"pid\": 12345\n  }\n}\n</code></pre>"},{"location":"reference/events/#daemonshuttingdown","title":"DaemonShuttingDown","text":"<p>Emitted when the daemon begins shutdown.</p> <pre><code>{\n  \"type\": \"DaemonShuttingDown\",\n  \"timestamp\": \"2026-01-08T10:30:00Z\",\n  \"data\": {\n    \"reason\": \"idle_timeout\"\n  }\n}\n</code></pre>"},{"location":"reference/events/#client-implementation","title":"Client Implementation","text":""},{"location":"reference/events/#javascript-example","title":"JavaScript Example","text":"<pre><code>const ws = new WebSocket('ws://127.0.0.1:8765/ws');\n\nws.onopen = () =&gt; {\n  console.log('Connected to ringlet daemon');\n};\n\nws.onmessage = (event) =&gt; {\n  const message = JSON.parse(event.data);\n\n  switch (message.type) {\n    case 'ProfileCreated':\n      console.log(`Profile ${message.data.alias} created`);\n      break;\n    case 'UsageUpdated':\n      console.log(`Usage updated for ${message.data.profile}`);\n      break;\n    // Handle other events...\n  }\n};\n\nws.onclose = () =&gt; {\n  console.log('Disconnected from ringlet daemon');\n  // Implement reconnection logic\n};\n</code></pre>"},{"location":"reference/events/#python-example","title":"Python Example","text":"<pre><code>import asyncio\nimport websockets\nimport json\n\nasync def listen_events():\n    uri = \"ws://127.0.0.1:8765/ws\"\n    async with websockets.connect(uri) as websocket:\n        async for message in websocket:\n            event = json.loads(message)\n            print(f\"Event: {event['type']}\")\n            print(f\"Data: {event['data']}\")\n\nasyncio.run(listen_events())\n</code></pre>"},{"location":"reference/events/#event-subscriptions","title":"Event Subscriptions","text":"<p>By default, clients receive all events. Future versions may support filtering:</p> <pre><code>{\n  \"action\": \"subscribe\",\n  \"events\": [\"ProfileCreated\", \"ProfileDeleted\", \"UsageUpdated\"]\n}\n</code></pre>"},{"location":"reference/events/#reconnection","title":"Reconnection","text":"<p>The daemon may restart due to idle timeout or updates. Clients should implement reconnection logic:</p> <ol> <li>Detect disconnection</li> <li>Wait with exponential backoff</li> <li>Reconnect and refresh state from HTTP API</li> <li>Resume event listening</li> </ol>"}]}