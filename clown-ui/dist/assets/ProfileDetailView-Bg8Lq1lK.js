import{d as tt,u as et,a as st,o as ot,k as y,y as g,e as R,c as s,f as P,b as t,w as H,h as at,l as x,t as r,F as c,r as m,s as rt,j as V,n as lt,p as A,z as dt,q as it,v as F,m as nt,A as ut,i as o}from"./index-CKP-FecI.js";import{_ as yt}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-BF-cP9Dh.js";import{_ as q}from"./StatusBadge.vue_vue_type_script_setup_true_lang-zC5_eZd9.js";import{_ as gt}from"./Modal.vue_vue_type_script_setup_true_lang-CJzbGawk.js";const ct={key:0,class:"flex justify-center py-12"},vt={key:1,class:"text-center py-12"},xt={key:2},mt={class:"flex items-center justify-between mb-6"},pt={class:"flex items-center space-x-3"},kt={class:"text-2xl font-bold text-gray-900 dark:text-white"},bt={class:"text-gray-500 dark:text-gray-400 mt-1"},ft={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},ht={class:"-mb-px flex space-x-8"},_t=["onClick"],wt={key:0,class:"space-y-6"},Pt={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},Ct={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},St={class:"text-gray-900 dark:text-white"},Tt={class:"text-gray-900 dark:text-white"},Ut={class:"text-gray-900 dark:text-white"},Nt={class:"text-gray-900 dark:text-white"},Dt={class:"text-gray-900 dark:text-white"},Rt={key:0},Vt={class:"text-gray-900 dark:text-white"},At={key:1,class:"space-y-6"},Et={class:"flex justify-end"},$t={key:0,class:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow"},jt={key:1,class:"space-y-4"},Mt={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ht={class:"font-medium text-gray-900 dark:text-white"},Bt={class:"divide-y divide-gray-200 dark:divide-gray-700"},zt={class:"text-sm text-gray-500 dark:text-gray-400"},Lt={class:"font-mono"},Ft=["onClick"],qt={key:2,class:"space-y-6"},It={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},Ot={class:"flex items-center justify-between mb-4"},Wt={class:"flex items-center space-x-3"},Gt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Jt={key:0},Kt={class:"text-gray-900 dark:text-white"},Qt={key:1},Xt={class:"text-gray-900 dark:text-white"},Yt={class:"bg-white dark:bg-gray-800 rounded-lg shadow"},Zt={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},te={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},ee={class:"flex items-center justify-between"},se={class:"text-sm font-medium text-gray-900 dark:text-white"},oe={class:"text-xs text-gray-500 dark:text-gray-400"},ae={class:"bg-white dark:bg-gray-800 rounded-lg shadow"},re={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},le={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},de={class:"text-sm font-medium text-gray-900 dark:text-white"},ie={key:3,class:"bg-white dark:bg-gray-800 rounded-lg shadow"},ne={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},ue={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},ye={class:"font-mono text-sm text-gray-900 dark:text-white"},ge={class:"font-mono text-sm text-gray-600 dark:text-gray-300"},ke=tt({__name:"ProfileDetailView",setup(ce){const I=ut(),O=rt(),W=et(),b=st(),d=R(()=>I.params.alias),n=y(null),v=y(null),C=y(null),E=y([]),$=y({}),j=y({}),M=y(!0),p=y("overview"),f=R(()=>b.instances.some(l=>l.alias===d.value)),B=R(()=>b.getInstanceByAlias(d.value)),S=R(()=>{var l;return((l=C.value)==null?void 0:l.enabled)??!1});ot(async()=>{await T()});async function T(){M.value=!0;try{const[l,e,_,U,N,D]=await Promise.all([g.profiles.get(d.value),g.hooks.list(d.value).catch(()=>null),g.proxy.config(d.value).catch(()=>null),g.proxy.routes.list(d.value).catch(()=>[]),g.proxy.aliases.list(d.value).catch(()=>({})),g.profiles.env(d.value).catch(()=>({}))]);n.value=l,v.value=e,C.value=_,E.value=U,$.value=N,j.value=D,await b.fetchStatus(d.value)}catch(l){console.error("Failed to load profile:",l)}finally{M.value=!1}}async function G(){if(confirm(`Are you sure you want to delete profile "${d.value}"?`))try{await W.deleteProfile(d.value),O.push("/profiles")}catch(l){alert(l.message)}}async function J(){try{S.value?await g.proxy.disable(d.value):await g.proxy.enable(d.value),await T()}catch(l){alert(l.message)}}async function K(){try{await b.startProxy(d.value)}catch(l){alert(l.message)}}async function Q(){try{await b.stopProxy(d.value)}catch(l){alert(l.message)}}const h=y(!1),u=y({event:"PreToolUse",matcher:"*",command:""});async function z(){try{await g.hooks.add(d.value,u.value.event,{matcher:u.value.matcher,command:u.value.command}),h.value=!1,u.value={event:"PreToolUse",matcher:"*",command:""},await T()}catch(l){alert(l.message)}}async function X(l,e){if(confirm("Remove this hook?"))try{await g.hooks.remove(d.value,l,e),await T()}catch(_){alert(_.message)}}function k(l){if(!v.value)return[];switch(l){case"PreToolUse":return v.value.PreToolUse||[];case"PostToolUse":return v.value.PostToolUse||[];case"Notification":return v.value.Notification||[];case"Stop":return v.value.Stop||[];default:return[]}}const Y=["PreToolUse","PostToolUse","Notification","Stop"];return(l,e)=>{var U,N,D;const _=at("RouterLink");return o(),s("div",null,[M.value?(o(),s("div",ct,[P(yt,{size:"lg"})])):n.value?(o(),s("div",xt,[t("div",mt,[t("div",null,[t("div",pt,[t("h1",kt,r(n.value.alias),1),P(q,{status:S.value?"enabled":"disabled"},null,8,["status"])]),t("p",bt,r(n.value.agent_id)+" / "+r(n.value.provider_id),1)]),t("div",{class:"flex items-center space-x-3"},[t("button",{class:"px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-lg transition-colors",onClick:G}," Delete ")])]),t("div",ft,[t("nav",ht,[(o(),s(c,null,m(["overview","hooks","proxy","env"],a=>t("button",{key:a,class:lt(["py-2 px-1 border-b-2 font-medium text-sm capitalize",p.value===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"]),onClick:i=>p.value=a},r(a),11,_t)),64))])]),p.value==="overview"?(o(),s("div",wt,[t("div",Pt,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Profile Details",-1)),t("dl",Ct,[t("div",null,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Agent",-1)),t("dd",St,r(n.value.agent_id),1)]),t("div",null,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Provider",-1)),t("dd",Tt,r(n.value.provider_id),1)]),t("div",null,[e[10]||(e[10]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Model",-1)),t("dd",Ut,r(n.value.model),1)]),t("div",null,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Endpoint",-1)),t("dd",Nt,r(n.value.endpoint_id),1)]),t("div",null,[e[12]||(e[12]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Runs",-1)),t("dd",Dt,r(n.value.total_runs),1)]),f.value?(o(),s("div",Rt,[e[13]||(e[13]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Proxy Port",-1)),t("dd",Vt,r((U=B.value)==null?void 0:U.port),1)])):x("",!0)])])])):p.value==="hooks"?(o(),s("div",At,[t("div",Et,[t("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:e[0]||(e[0]=a=>h.value=!0)}," Add Hook ")]),!v.value||k("PreToolUse").length===0&&k("PostToolUse").length===0&&k("Notification").length===0&&k("Stop").length===0?(o(),s("div",$t,[...e[15]||(e[15]=[t("p",{class:"text-gray-500 dark:text-gray-400"},"No hooks configured",-1)])])):(o(),s("div",jt,[(o(),s(c,null,m(Y,a=>A(t("div",{key:a,class:"bg-white dark:bg-gray-800 rounded-lg shadow"},[t("div",Mt,[t("h3",Ht,r(a),1)]),t("ul",Bt,[(o(!0),s(c,null,m(k(a),(i,L)=>(o(),s("li",{key:L,class:"px-6 py-4 flex items-center justify-between"},[t("div",null,[t("p",zt,[e[16]||(e[16]=V(" Matcher: ",-1)),t("code",Lt,r(i.matcher),1)]),(o(!0),s(c,null,m(i.hooks,(w,Z)=>(o(),s("div",{key:Z,class:"text-sm text-gray-900 dark:text-white font-mono mt-1"},[w.type==="command"?(o(),s(c,{key:0},[V(" Command: "+r(w.command),1)],64)):w.type==="url"?(o(),s(c,{key:1},[V(" URL: "+r(w.url),1)],64)):x("",!0)]))),128))]),t("button",{class:"text-red-600 hover:text-red-700 text-sm",onClick:w=>X(a,L)}," Remove ",8,Ft)]))),128))])]),[[dt,k(a).length>0]])),64))]))])):p.value==="proxy"?(o(),s("div",qt,[t("div",It,[t("div",Ot,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Proxy Status",-1)),t("div",Wt,[t("button",{class:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:J},r(S.value?"Disable":"Enable")+" Proxy ",1),S.value&&!f.value?(o(),s("button",{key:0,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",onClick:K}," Start ")):x("",!0),f.value?(o(),s("button",{key:1,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",onClick:Q}," Stop ")):x("",!0)])]),t("div",Gt,[t("div",null,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Status",-1)),t("dd",null,[P(q,{status:f.value?"running":"stopped"},null,8,["status"])])]),f.value?(o(),s("div",Jt,[e[19]||(e[19]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Port",-1)),t("dd",Kt,r((N=B.value)==null?void 0:N.port),1)])):x("",!0),(D=C.value)!=null&&D.routing?(o(),s("div",Qt,[e[20]||(e[20]=t("dt",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Strategy",-1)),t("dd",Xt,r(C.value.routing.strategy),1)])):x("",!0)])]),t("div",Yt,[e[21]||(e[21]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"font-medium text-gray-900 dark:text-white"},"Routing Rules")],-1)),E.value.length===0?(o(),s("div",Zt," No routing rules configured ")):(o(),s("ul",te,[(o(!0),s(c,null,m(E.value,(a,i)=>(o(),s("li",{key:i,class:"px-6 py-4"},[t("div",ee,[t("div",null,[t("p",se,r(a.name)+" → "+r(a.target),1),t("p",oe," Priority: "+r(a.priority)+" | Condition: "+r(a.condition.type),1)])])]))),128))]))]),t("div",ae,[e[22]||(e[22]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"font-medium text-gray-900 dark:text-white"},"Model Aliases")],-1)),Object.keys($.value).length===0?(o(),s("div",re," No model aliases configured ")):(o(),s("ul",le,[(o(!0),s(c,null,m($.value,(a,i)=>(o(),s("li",{key:i,class:"px-6 py-4"},[t("p",de,r(i)+" → "+r(a),1)]))),128))]))])])):p.value==="env"?(o(),s("div",ie,[e[24]||(e[24]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Environment Variables")],-1)),Object.keys(j.value).length===0?(o(),s("div",ne," No environment variables set ")):(o(),s("ul",ue,[(o(!0),s(c,null,m(j.value,(a,i)=>(o(),s("li",{key:i,class:"px-6 py-4"},[t("span",ye,r(i),1),e[23]||(e[23]=t("span",{class:"text-gray-500 dark:text-gray-400"},"=",-1)),t("span",ge,r(a),1)]))),128))]))])):x("",!0)])):(o(),s("div",vt,[e[7]||(e[7]=t("p",{class:"text-gray-500 dark:text-gray-400"},"Profile not found",-1)),P(_,{to:"/profiles",class:"text-blue-600 hover:text-blue-700 mt-4 inline-block"},{default:H(()=>[...e[6]||(e[6]=[V(" Back to Profiles ",-1)])]),_:1})])),P(gt,{open:h.value,title:"Add Hook",onClose:e[5]||(e[5]=a=>h.value=!1)},{footer:H(()=>[t("button",{type:"button",class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",onClick:e[4]||(e[4]=a=>h.value=!1)}," Cancel "),t("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:z}," Add ")]),default:H(()=>[t("form",{onSubmit:nt(z,["prevent"]),class:"space-y-4"},[t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Event",-1)),A(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>u.value.event=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[...e[25]||(e[25]=[t("option",{value:"PreToolUse"},"Pre Tool Use",-1),t("option",{value:"PostToolUse"},"Post Tool Use",-1),t("option",{value:"Notification"},"Notification",-1),t("option",{value:"Stop"},"Stop",-1)])],512),[[it,u.value.event]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Matcher (tool pattern)",-1)),A(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>u.value.matcher=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Bash|Write|Edit or *"},null,512),[[F,u.value.matcher]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Command",-1)),A(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>u.value.command=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"echo $EVENT",required:""},null,512),[[F,u.value.command]])])],32)]),_:1},8,["open"])])}}});export{ke as default};
